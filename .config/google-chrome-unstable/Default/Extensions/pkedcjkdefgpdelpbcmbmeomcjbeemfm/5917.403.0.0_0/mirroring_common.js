'use strict';var yh;p("mr.IssueSeverity",{Cn:"fatal",Yq:"warning",ep:"notification"});p("mr.IssueAction",{tn:"dismiss",Bo:"learn_more"});var zh=function(a,b,c){this.routeId=null;this.severity=b;this.isBlocking="fatal"==this.severity?!0:!1;this.title=a;this.message=null;this.defaultAction=c;this.helpPageId=this.secondaryActions=null};var Ah=function(a,b){var c=this;this.b=void 0===b?null:b;this.a=new Promise(function(b,e){var d=function(a){c.b=null;e(a)};c.f=d;a(function(a){c.b=null;b(a)},d)})};Ah.prototype.cancel=function(a){this.f(a);if(this.b){var b=this.b;this.b=null;setTimeout(function(){return b(a)},0)}};var Bh=function(a,b,c){c=void 0===c?null:c;return new Ah(function(d,e){a.a.then(function(a){if(b)try{d(b(a))}catch(g){e(g)}else d(a)},function(a){if(c)try{d(c(a))}catch(g){e(g)}else e(a)})},function(b){a.cancel(b)})};
Ah.prototype.then=function(a,b){return Bh(this,a,void 0===b?null:b)};var Ch=function(a,b){return Bh(a,null,b)},Dh=function(a){return new Ah(function(b){b(a)})},Eh=function(a){return new Ah(function(b,c){c(a)})},Fh=function(a){return new Ah(function(b,c){a.then(b,c)})},Gh=function(a,b){var c=!1,d=null;return new Ah(function(e,f){a.then(function(a){c||(d=b(a),d.a.then(e,f))},f)},function(a){d?d.cancel(a):c=!0})};var Hh=function(){return null!=ub&&-1!=ub.indexOf("CrOS")},Ih=function(){var a=ub;if("string"!=typeof a)return!1;a=a.match(/Windows NT \d+.\d+/);if(!(a instanceof Array))return!1;a=a[0];a=a.match(/\d+.\d+/);if(!(a instanceof Array))return!1;a=a[0];return 6.2<=parseFloat(a)},Jh=function(){return Hh()?"ChromeOS":qc?"Windows":pc?"Mac":rc?"Linux":"Other"};var Kh="undefined"!=typeof chrome&&!!chrome.networkingPrivate&&!!chrome.networkingPrivate.setWifiTDLSEnabledState&&Hh(),Lh=Hh()||qc;var Mh=function(a,b,c,d){this.b=a;this.a=b;this.f=c||null;this.h=d||null},Ph=function(a,b){if("tab"==a.b)a=Nh(a);else if("offscreen_tab"==a.b)b=Nh(a),b.presentationId=a.h,a=b;else{var c={audio:!1,video:!1};a.a.shouldCaptureVideo&&(c.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:b}},Oh(a,c.video.mandatory));Lh&&a.a.shouldCaptureAudio&&(c.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:b}});a=c}return a},Nh=function(a){var b={audio:a.a.shouldCaptureAudio,video:a.a.shouldCaptureVideo};
a.a.shouldCaptureVideo&&(b.videoConstraints={mandatory:{enableAutoThrottling:!0}},Oh(a,b.videoConstraints.mandatory));return b},Oh=function(a,b){var c=a.a.minWidth,d=a.a.minHeight;a.a.senderSideLetterboxing&&(d=Qh(a.a),c=d.width,d=d.height);Object.assign(b,{minWidth:c,minHeight:d,maxWidth:a.a.maxWidth,maxHeight:a.a.maxHeight,maxFrameRate:a.a.maxFrameRate})};var Rh=function(a){this.b=a;this.f=Date.now()},Sh=function(a,b){null!=b&&(a+="_"+b);return a};Rh.prototype.a=function(a){Th(Sh(this.b,a),Date.now()-this.f)};var Th=function(a,b){0>b&&(w(Uh,"Timing analytics event with negative time"),b=0);1E4<b&&(b=1E4);try{chrome.metricsPrivate.recordTime(a,b)}catch(c){w(Uh,"Failed to record time "+b+" in "+a)}},Uh=v("mr.Timing"),Vh=function(a){Rh.call(this,a)};ka(Vh,Rh);
Vh.prototype.a=function(a){a=Sh(this.b,a);var b=Date.now()-this.f;if(0>b)w(Wh,"Timing analytics event with negative time");else{1E4>b&&(b=1E4);18E4<b&&(b=18E4);try{chrome.metricsPrivate.recordMediumTime(a,b)}catch(c){w(Wh,"Failed to record time "+b+" in "+a)}}};var Wh=v("mr.MediumTiming"),Xh=function(a){Rh.call(this,a)};ka(Xh,Rh);
Xh.prototype.a=function(a){a=Sh(this.b,a);var b=Date.now()-this.f;if(0>b)w(Yh,"Timing analytics event with negative time");else{18E4>b&&(b=18E4);36E5<b&&(b=36E5);try{chrome.metricsPrivate.recordLongTime(a,b)}catch(c){w(Yh,"Failed to record time "+b+" in "+a)}}};
var Yh=v("mr.LongTiming"),Zh=v("mr.Analytics"),$h=function(a){try{chrome.metricsPrivate.recordUserAction(a)}catch(b){w(Zh,"Failed to record event "+a)}},ai=function(a,b,c){var d,e=0,f;for(f in c)e++,c[f]==b&&(d=f);if(d){c={metricName:a,type:"histogram-linear",min:1,max:e,buckets:e+1};try{chrome.metricsPrivate.recordValue(c,b)}catch(g){w(Zh,"Failed to record enum value "+d+" ("+b+") in "+a,g)}}else Zh.error("Unknown analytics value, "+b+" for histogram, "+a,Error())},bi=function(a,b){try{if(0>b)throw Error("Invalid count for "+
a+": "+b);100<b&&w(Zh,"Small count for "+a+" exceeded limits: "+b,Error());chrome.metricsPrivate.recordSmallCount(a,b)}catch(c){w(Zh,"Failed to record small count "+a+" ("+b+")",c)}};var ci={Sm:0,Qm:1,Um:2,Rm:3,xm:4,Tm:5,bo:6,Eq:7,mn:8,sg:9},di=function(a,b){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);this.reason=0<=b&&9>=b?b:9};ka(di,Error);var ei=function(a){this.b=a;this.a=this.pe=null;this.l=v("mr.mirror.MirrorMediaStream")},fi=function(a,b){a.pe=b};ei.prototype.start=function(){return"tab"==this.b.b?gi(this):"offscreen_tab"==this.b.b?hi(this):ii(this)};
var gi=function(a){var b=Ph(a.b);x(a.l,"Starting tab capture with constraints "+JSON.stringify(b));return new Promise(function(c,d){chrome.tabCapture.capture(b,function(b){b?(ji(a,b),c(a)):d(ki())});window.setTimeout(function(){d(new di("chrome.tabCapture.capture failed to call its callback",2))},5E3)})};ei.prototype.f=function(a){a&&x(this.l,function(){return"Track "+JSON.stringify(a.target)+" ended"});this.stop()};
var ki=function(){return chrome.runtime.lastError&&chrome.runtime.lastError.message?new di(chrome.runtime.lastError.message,7):new di("empty_stream",0)},ii=function(a){return(new Promise(function(a,c){var b=["screen","audio"];"Linux"==Jh()&&b.push("window");var e=chrome.desktopCapture.chooseDesktopMedia(b,a);window.setTimeout(function(){chrome.desktopCapture.cancelChooseDesktopMedia(e);c(new di("timeout",1))},6E4)})).then(function(b){if(!b)throw new di("User cancelled capture dialog",3);var c=Ph(a.b,
b);x(a.l,function(){return"Starting desktop capture with constraints "+JSON.stringify(c)});return new Promise(function(a,b){navigator.webkitGetUserMedia(c,a,function(a){var c=8;if("PermissionDeniedError"==a.name||"NotAllowedError"==a.name)c=3;b(new di(a.name+" "+a.constraintName+": "+a.message,c))})})}).then(function(b){if(b)ji(a,b);else throw new di("empty_stream",8);return a})},hi=function(a){var b=Ph(a.b);x(a.l,function(){return"Starting offscreen tab capture with constraints "+JSON.stringify(b)});
return new Promise(function(c,d){chrome.tabCapture.captureOffscreenTab(a.b.f.toString(),b,function(b){b?(ji(a,b),c(a)):d(ki())})})},ji=function(a,b){a.a=b;b.getTracks().forEach(function(b){b.onended=a.f.bind(a)})};ei.prototype.stop=function(){this.a&&(this.a.getTracks().forEach(function(a){a.onended=null;a.stop()}),this.a=null,this.pe&&this.pe())};var li,mi={Jo:0,Vm:1,Wm:2,pn:3,qn:4,Jn:5,co:6,Ho:7,Vo:8,Wo:9,Qp:10,mq:11,nq:12,uq:13,Dq:14},ni=function(a){void 0==li&&(ai("MediaRouter.Provider.WakeEvent",a,mi),li=a)};var qi=function(a){return oi(a)||pi(a)},ri=function(a){if(!ab(a,"http:")&&!ab(a,"https:"))return!1;var b=document.createElement("a");b.href=a;return"http:"!=b.protocol&&"https:"!=b.protocol?!1:-1==b.hash.indexOf("__castAppId__")},si=["https://docs.google.com"],oi=function(a){return ab(a,"urn:x-org.chromium.media:source:tab:")||-1!=a.indexOf("0F5096E8")},pi=function(a){return"urn:x-org.chromium.media:source:desktop"==a};var ti=function(a){return(new Promise(function(b){chrome.tabs.get(a,b)})).then(function(b){if(!b)throw Error("No such tab "+a);return b})};var ui=function(){},zi=function(a){x(vi,"Loading module "+a);var b=wi.get(a)||null;if(b)return Promise.resolve(b);b=xi.get(a);b||(b=new Nc,xi.set(a,b),yi(a,b));return b.a},yi=function(a,b){var c=Ai.get(a)||null;if(!c)b.b(Error("No corresponding bundle for "+a));else if(!Bi.has(c)){var d=Ci.get(c);d||(x(vi,"Loading bundle "+c+" for module "+a),d=Di(c),Ci.set(c,d));d.catch(function(a){b.b(a)})}},Di=function(a){var b=new Nc;b.a.then(function(){x(vi,"Bundle "+a+" loaded")},function(b){vi.error("Failed to load bundle "+
a);throw b;});var c=document.createElement("script");c.src=chrome.extension.getURL(a);c.setAttribute("type","text/javascript");c.async=!0;c.onload=function(){return b.resolve(void 0)};c.onerror=function(){b.b(Error("Failed to load bundle "+a))};document.head.appendChild(c);return b.a},Ei=function(a,b){if(wi.has(a))throw Error("Duplicate module "+a);wi.set(a,b);(a=xi.get(a))&&a.resolve(b)};ui.prototype.handleEvent=function(a,b){for(var c=1;c<arguments.length;++c);throw Error("Not implemented");};
var Ai=new Map([["mr.cast.SinkDiscoveryService","background_script.js"],["mr.mirror.cast.Service","mirroring_cast_streaming.js"],["mr.cloud.discovery.CloudSinkDiscoveryService","background_script.js"],["mr.dial.SinkDiscoveryService","background_script.js"],["mr.mirror.hangouts.HangoutsService","mirroring_hangouts.js"],["mr.mirror.hangouts.MeetingsService","mirroring_hangouts.js"],["mr.ProviderManager","background_script.js"],["mr.mirror.webrtc.WebRtcService","mirroring_webrtc.js"]]),Bi=new Set(["background_script.js"]),
vi=v("mr.Module"),wi=new Map,xi=new Map,Ci=new Map;var Fi=chrome.i18n.getMessage("545449835455981095");var Gi=function(a,b){this.F=a;this.g=b||null;this.b=this.a=null;this.G=v("mr.mirror.Service."+a);this.w=n(this.J,this);this.h=!1};ka(Gi,ui);Gi.prototype.Ga=function(a){this.h||(this.g=a,this.h=!0,this.ce())};Gi.prototype.ce=function(){};Gi.prototype.getName=function(){return this.F};
var Mi=function(a,b,c,d,e,f){x(a.G,"Start mirroring on route "+b.id);return a.h?Fh(Hi(c,b.pb.tabId).then(function(){return Ii(a)}).then(function(){var a=Ji(c,d,e);return(new ei(a)).start()}).then(function(c){a.b=c;fi(c,function(){a.o(c)});return f?f(b).a:b}).then(function(b){if(a.a)throw new di("Cannot start multiple sessions");a.a=a.ae(d,b);return a.a.start(a.b.a)}).then(function(){oi(c)&&!chrome.tabs.onUpdated.hasListener(a.w)&&chrome.tabs.onUpdated.addListener(a.w);return a.u(b,c,d)}).then(null,
function(b){Ki(a,b);return Li(a).then(function(){throw b;})})):Eh(Error("Not initialized"))},Hi=function(a,b){return oi(a)?b?ti(b).then(function(a){if(!a.active)throw new di("Tab to be mirrored is not active",7);}):Promise.reject(new di("BUG: Tab ID is required.")):Promise.resolve()};
Gi.prototype.B=function(a,b,c,d,e){var f=this;if(!this.a)return Promise.reject(new di("No session to update streams on",7));if(!this.a.mi())return Promise.reject(new di("Session does not support updating stream",7));var g=!1;return Promise.resolve().then(function(){var a=Ji(b,c,d);return(new ei(a)).start()}).then(function(b){var c=f.b;f.b=b;var d=n(f.o,f,b);b.pe=d;g=!0;c.stop();return e?e(a).a:a}).then(function(a){if(!f.a)throw new di("Session ended while updating stream");f.a.b=a;return f.a.pi(f.b.a)}).then(this.u.bind(this,
a,b,c)).then(null,function(a){Ki(f,a);if(g)return Li(f).then(function(){throw a;});throw a;})};
Gi.prototype.u=function(a,b,c){var d=this;return new Promise(function(e,f){if(d.a)if(oi(b))Ni(d.a,a.pb.tabId).then(function(){Oi(d.a);d.Ee();e(d.a.Jb())},function(a){d.G.error("Failed to obtain initial tab info.",a);f(a)});else{if(ri(b)){var g="Capturing "+a.mediaSource;Pi(d.a,g,g,null);Oi(d.a);d.Gf()}else Pi(d.a,"Capturing Desktop","Capturing Desktop",null),Oi(d.a),d.Ae();Qi(d,c,d.b);e(d.a.Jb())}else f(new di("Session gone before executing post-startup steps",7))})};
var Ki=function(a,b){b.reason=null!=b.reason?b.reason:9;a.G.error("Failed to start mirroring: "+b.message+",  reason = "+b.reason+": "+b.stack);a.Ce(b.reason)};Gi.prototype.o=function(a){this.b==a&&(this.De(),Li(this))};
var Ii=function(a){return a.h?Li(a).then(function(b){b&&a.Be();return b}):Promise.reject("Not initialized")},Li=function(a){chrome.tabs.onUpdated.removeListener(a.w);a.b&&(a.b.stop(),a.b=null);if(!a.a)return Promise.resolve(!1);var b=a.a;a.a=null;return a.Te(b).catch(function(b){return a.G.error("Error in before-cleanup steps",b)}).then(function(){return b.stop()}).catch(function(b){return a.G.error("Error stopping session",b)}).then(function(){a.g.qf(b.Jb().id)}).catch(function(b){return a.G.error("Error in ended callbacks",
b)}).then(function(){return!0})};Gi.prototype.Te=function(){return Promise.resolve()};Gi.prototype.J=function(a,b,c){ni(14);this.a&&this.a.tabId&&this.a.tabId==a&&("complete"==b.status||b.favIconUrl&&"complete"==c.status)&&(this.a.ri(c),this.g.vh(this.a.Jb()),Oi(this.a))};
var Ji=function(a,b,c){if(oi(a))return new Mh("tab",b);if(pi(a))return new Mh("desktop",b);if(ri(a)){if(!c)throw new di("Missing offscreen tab presentation id");return new Mh("offscreen_tab",b,a,c)}throw new di("Source URN does not suggest a known capture type.");},Qi=function(a,b,c){b.shouldCaptureAudio&&c.a&&!c.a.getAudioTracks().length&&a.g.Pc().send(new zh(Fi,"notification","dismiss"))};h=Gi.prototype;h.ae=function(){};h.Ee=function(){};h.Ae=function(){};h.Gf=function(){};h.Be=function(){};
h.Ce=function(){};h.De=function(){};h.nf=function(){return Promise.reject("Not implemented")};var Ri=function(a){this.b=a;this.o=!1;this.tabId=this.A=this.iconUrl=null},Pi=function(a,b,c,d){a.b.description=b;a.o||a.b.offTheRecord?(a.A=null,a.iconUrl=null):(a.A=c,a.iconUrl=d)},Oi=function(a){a.o||a.b.offTheRecord||a.Yh()},Ni=function(a,b){a.tabId=b;return ti(b).then(a.ri.bind(a))};h=Ri.prototype;h.ri=function(a){this.o=a.incognito;var b=a.title,c;ab(a.url,"file://")?c="Local content (Tab)":(c=a.url.match(Pc)[3]||null,c=(c?decodeURI(c):c)+" (Tab)");Pi(this,b,c,a.favIconUrl)};h.Jb=function(){return this.b};
h.start=function(){};h.mi=function(){return!1};h.pi=function(){};h.stop=function(){return Promise.resolve()};h.Yh=function(){};var Vi=function(){var a=this;this.maxWidth=1920;this.maxHeight=1080;this.minHeight=this.minWidth=180;this.senderSideLetterboxing=!1;this.maxFrameRate=30;this.minVideoBitrate=300;this.maxVideoBitrate=5E3;this.audioBitrate=0;this.maxLatencyMillis=800;this.animatedLatencyMillis=this.minLatencyMillis=400;this.dscpEnabled=pc||rc||Hh()||Ih();this.enableLogging=!0;this.useTdls=!1;this.shouldCaptureAudio=this.shouldCaptureVideo=!0;var b=window.localStorage?window.localStorage.getItem(Si):null;if(b)try{var c=
JSON.parse(String(b));if(c instanceof Object)Ti(this,c),w(v("mr.mirror.Settings"),function(){return"Initial mr.mirror.Settings overridden to: "+Ui(a)});else throw Error("localStorage["+Si+"] does not parse as an Object: "+b);}catch(d){throw v("mr.mirror.Settings").error(Si+' must be of the form \'{"maxWidth":640, "maxHeight":360}\'.',d),Error("Overrides not parseable.  See ERROR log for details.");}};Vi.prototype.clone=function(){var a=new Vi;Ti(a,this);return a};
var Ui=function(a){return JSON.stringify(a,function(a,c){if(0==a.length||!a.endsWith("_"))return c})},Ti=function(a,b){for(var c=ja(Object.keys(b)),d=c.next();!d.done;d=c.next())d=d.value,d.endsWith("_")||typeof b[d]!==typeof a[d]||(a[d]=b[d])},Wi=function(a){var b=screen.width,c=screen.height;a.maxHeight*b<a.maxWidth*c?(b=Math.min(a.maxWidth,b),b-=b%160,c=90*b/160):(c=Math.min(a.maxHeight,c),c-=c%90,b=160*c/90);if(b<Math.max(160,a.minWidth)||c<Math.max(90,a.minHeight))b=Math.max(160,a.minWidth),
c=Math.max(90,a.minHeight);a.maxWidth=b;a.maxHeight=c},Qh=function(a){if(0==a.minHeight||0==a.maxHeight?0:Math.floor(100*a.minWidth/a.minHeight)==Math.floor(100*a.maxWidth/a.maxHeight))return{width:a.minWidth,height:a.minHeight};for(var b=a.maxWidth,c=a.maxHeight;0!=c;)var d=b%c,b=c,c=d;c=a.maxWidth/b;b=a.maxHeight/b;if(c<a.minWidth||b<a.minHeight)if(d=Math.max(a.minWidth/c,a.minHeight/b),c*=d,b*=d,c>a.maxWidth||b>a.maxHeight)c=a.maxWidth,b=a.maxHeight;c=Math.round(c);b=Math.round(b);return{width:c,
height:b}},Si="mr.mirror.Settings.Overrides";var Xi=function(a,b){this.type=a;this.data=b},Yi=function(a){a=JSON.parse(a);if(!a.type)throw Error("Invalid message");return new Xi(a.type,a.data)},Zi=function(a,b,c,d){this.description=a;this.settings=b||null;this.mediaConstraints=c||null;this.presentationUrl=d||null};var bj=function(a,b){this.l=v("cv2.PeerConnection");this.F=$i;this.a=aj(this,b);this.g=this.a.createDataChannel(a,{reliable:!1});this.B=new Nc;this.w=!1;this.h=0;this.f=null;this.v=this.j=0;this.b=!1;this.o=this.u=this.m=this.A=this.ia=pa},cj=function(a,b){a.m=b},dj=function(a,b){a.u=b},ej=function(a,b){a.o=b},fj=function(a,b){a.A=b},gj=function(a,b){a.g.onmessage=function(a){b(a.data)}},hj=function(a){var b={};b.iceServers=[{url:"stun:stun.l.google.com:19302"}].concat(a);return b},aj=function(a,
b){var c=hj(b);b=new webkitRTCPeerConnection(c);b.onicecandidate=n(a.H,a);b.a=n(a.N,a);b.oniceconnectionstatechange=n(a.K,a);x(a.l,function(){return"Created webkitRTCPeerConnnection with config: "+JSON.stringify(c)});return b};bj.prototype.start=function(){this.b||(this.b=!0,ij(this))};bj.prototype.stop=function(){x(this.l,"Stopping peer connection...");this.b&&(this.b=!1,"closed"!=this.a.signalingState&&this.a.close());this.a=null};
var ij=function(a){x(a.l,"Sending offer to peer.");a.j=Date.now();a.a.createOffer(n(a.J,a),function(b){w(a.l,"Error creating offer.",b)},a.F);a.B.a.then(function(b){a.A(b)})};bj.prototype.J=function(a){var b=this;x(this.l,function(){return"Setting local description: "+JSON.stringify(a)});this.a.setLocalDescription(a,function(){x(b.l,"Local description set successfully")},function(a){w(b.l,"Error setting local description.",a)})};
var jj=function(a,b){z(a.l,function(){return"<===: "+JSON.stringify(b)});var c=new RTCSessionDescription(b);x(a.l,function(){return"Setting remote description: "+JSON.stringify(c)});a.a.setRemoteDescription(c,function(){x(a.l,"Remote description set successfully.")},function(b){w(a.l,"Error setting remote description.",b)})};
bj.prototype.H=function(a){var b=this;a.candidate?(this.h++,this.v=Date.now(),1==this.h?this.f=ze(function(){x(b.l,"ICE candidate gathering timed out.");b.f=null;kj(b)},5E3):this.w&&w(this.l,"Received ICE candidate after resolving session description.")):(x(this.l,"End of ICE candidates."),Th("MediaRouter.WebRtc.IceCandidateGathering.Duration.Reported",Date.now()-this.j),kj(this),0<this.h&&Th("MediaRouter.WebRtc.IceCandidateGathering.Duration.Real",this.v-this.j))};
bj.prototype.N=function(){"completed"==this.a.iceGatheringState&&kj(this)};var kj=function(a){Ae(a.f);a.f=null;if(!a.w){x(a.l,"Resolving sesion description after gathering "+a.h+" ICE candidates.");var b=a.a.localDescription;a.B.resolve({type:b.type,sdp:b.sdp});a.w=!0}};
bj.prototype.K=function(a){var b=this;if(this.a){var c=this.a.iceConnectionState;x(this.l,"New ICE connection state: "+c+".");"connected"==c?this.m("iceconnected"):"completed"==c?this.m("icecompleted"):"failed"==c?(w(this.l,function(){return"Ice connection failed: "+JSON.stringify(a)}),this.u("icefailed")):"closed"==c?this.o("iceclosed"):"disconnected"==c&&(w(this.l,"Ice connection state is bad."),this.b?(x(this.l,"Restarting ICE."),this.a.createOffer(n(this.J,this),function(a){w(b.l,"Error creating new offer.",
a)},lj)):this.ia())}};var $i={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},lj={mandatory:{IceRestart:!0,OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};pa.a=window.localStorage;
var mj=0,oj=function(a){return(a=window.localStorage.getItem(nj(a,!1)))?JSON.parse(a):null},pj=function(a){return(a=window.localStorage.getItem(nj(a,!0)))?JSON.parse(a):null},rj=function(a){if(qj.has(a.fa()))throw Error("Duplicate instance name "+a.fa());qj.set(a.fa(),a);a.va()},xj=function(a){for(var b=0,c=ja(Object.keys(pa.a)),d=c.next();!d.done;d=c.next()){var d=d.value,e=d.length+window.localStorage.getItem(d).length;d.startsWith("mr.")?mj+=e:b+=e}sj=a;(window.localStorage.getItem("version")&&window.localStorage.getItem("version")!==
chrome.runtime.getManifest().version||tj(a))&&uj();x(vj,"initialize: "+mj+" bytes used, "+b+" other bytes");chrome.runtime.onSuspend.addListener(wj)},sj=null,vj=v("mr.PersistentDataManager"),qj=new Map,nj=function(a,b){return"mr."+(b?"persistent.":"temp.")+a.fa()},tj=function(a){return!!window.localStorage.getItem("mrInstanceId")&&window.localStorage.getItem("mrInstanceId")!==a},wj=function(){x(vj,"onSuspend");yj("version",chrome.runtime.getManifest().version);sj&&yj("mrInstanceId",sj);qj.forEach(zj)},
zj=function(a){var b=a.qa();b&&void 0!=b[0]&&yj(nj(a,!1),JSON.stringify(b[0]));b&&void 0!=b[1]&&yj(nj(a,!0),JSON.stringify(b[1]))},yj=function(a,b){var c;c=window.localStorage.getItem(a);c=void 0!=c?b.length-c.length:a.length+b.length;52E5<=mj+c&&(w(vj,"Unable to write "+c+" bytes"),uj());52E5<=mj+c?vj.error("Unable to write "+c+" bytes after clearing temporary"):(window.localStorage.setItem(a,b),mj+=c)},uj=function(){for(var a=ja(Object.keys(pa.a)),b=a.next();!b.done;b=a.next())b=b.value,b.startsWith("mr.temp.")&&
(mj-=b.length+window.localStorage.getItem(b).length,delete window.localStorage[b]);x(vj,"removeTemporary_: "+mj+" bytes used")};var Aj=xb("Firefox"),Bj=fc()||xb("iPod"),Cj=xb("iPad"),Dj=xb("Android")&&!(gc()||xb("Firefox")||xb("Opera")||xb("Silk")),Ej=gc(),Fj=xb("Safari")&&!(gc()||xb("Coast")||xb("Opera")||xb("Edge")||xb("Silk")||xb("Android"))&&!(fc()||xb("iPad")||xb("iPod"));var Gj=function(){},Hj=function(a){if(!ab(a,"urn:x-org.chromium:media:route:"))return null;var b=a.substring(31);if(!b)return null;b=rb(b,"/",2);if(3!=b.length)return null;var c=rb(b[1],"-",1);if(2!=c.length)return null;var d=new Gj;d.h=a;d.a=b[0];d.f=c[0];d.g=c[1];d.b=b[2];return d};Gj.prototype.Z=function(){return this.b};var Ij=function(a,b,c,d,e,f){this.id=a;this.sinkId=b;this.mediaSource=c;this.isLocal=d;this.description=e;this.iconUrl=f;this.allowStop=!0;this.customControllerPath=null;this.forDisplay=!0;this.offTheRecord=!1;this.Bc=d;this.isOffscreenPresentation=!1},Jj=function(a,b,c,d,e,f,g){return new Ij("urn:x-org.chromium:media:route:"+a+"/"+b+"-"+c+"/"+d,c,d,e,f,g)};var Kj=function(a){this.b=a;this.a=1E3*Math.floor(1E6*Math.random())},Lj=function(a){var b=a.a++;0==b&&(b=a.a++);return b};Kj.prototype.fa=function(){return"IdGenerator."+this.b};Kj.prototype.qa=function(){return[this.a]};Kj.prototype.va=function(){var a=oj(this);a&&(this.a=a)};window.navigator.userAgent.match(/Chrome\/([0-9]+)/);var Mj=function(a,b){this.type=a;this.entryPoint=b};p("castApp.frontEnd.ExtensionMessage",Mj);var Nj=function(a){return"urn:x-cast:com.google.cast."+a},Oj=Nj("tp.connection"),Pj=Nj("receiver"),Qj=Nj("remoting"),Rj=Nj("media"),Sj=Nj("webrtc"),Tj=Nj("broadcast"),Uj=Ua({Gq:Oj,Hq:Nj("tp.heartbeat"),Up:Pj,Yp:Qj,Io:Rj,Lo:Nj("media.universalRemote.optIn"),ar:Sj,Hm:Tj});var Vj=function(a){return"available"==a||"available_rescan"==a};var Wj=function(a,b,c,d,e){this.id=a;this.friendlyName=b;this.iconType=void 0===c?"generic":c;this.description=void 0===d?null:d;this.domain=void 0===e?null:e};var Xj=function(){var a=window.crypto.getRandomValues(new Uint8Array(16));return Db(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join("")},Yj=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(55296==(e&64512)&&d+1<a.length&&56320==(a.charCodeAt(d+1)&64512)?(e=65536+((e&1023)<<10)+(a.charCodeAt(++d)&1023),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b},Zj=function(a){for(var b=
[],c=0,d=0;c<a.length;){var e=a[c++];if(128>e)b[d++]=String.fromCharCode(e);else if(191<e&&224>e){var f=a[c++];b[d++]=String.fromCharCode((e&31)<<6|f&63)}else if(239<e&&365>e){var f=a[c++],g=a[c++],m=a[c++],e=((e&7)<<18|(f&63)<<12|(g&63)<<6|m&63)-65536;b[d++]=String.fromCharCode(55296+(e>>10));b[d++]=String.fromCharCode(56320+(e&1023))}else f=a[c++],g=a[c++],b[d++]=String.fromCharCode((e&15)<<12|(f&63)<<6|g&63)}return b.join("")};var ak=null,bk=null,ck=null,dk=kc||lc&&!Fj||hc||!Fj&&!ic&&"function"==typeof na.atob,fk=function(a,b){ek();b=b?ck:ak;for(var c=[],d=0;d<a.length;d+=3){var e=a[d],f=d+1<a.length,g=f?a[d+1]:0,m=d+2<a.length,q=m?a[d+2]:0,y=e>>2,e=(e&3)<<4|g>>4,g=(g&15)<<2|q>>6,q=q&63;m||(q=64,f||(g=64));c.push(b[y],b[e],b[g],b[q])}return c.join("")},hk=function(a){if(dk)return na.atob(a);var b="";gk(a,function(a){b+=String.fromCharCode(a)});return b},ik=function(a){var b=new Uint8Array(Math.ceil(3*a.length/4)),c=0;gk(a,
function(a){b[c++]=a});return b.subarray(0,c)},gk=function(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=bk[c];if(null!=e)return e;if(!db(c))throw Error("Unknown base64 encoding at char: "+c);}return b}ek();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),m=c(64);if(64===m&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=m&&b(g<<6&192|m))}},ek=function(){if(!ak){ak={};bk={};ck={};for(var a=0;65>a;a++)ak[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),
bk[ak[a]]=a,ck[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),62<=a&&(bk["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}};var jk=function(){this.b=-1};var kk=function(){this.b=64;this.a=[];this.j=[];this.m=[];this.h=[];this.h[0]=128;for(var a=1;a<this.b;++a)this.h[a]=0;this.g=this.f=0;this.reset()};r(kk,jk);kk.prototype.reset=function(){this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.a[4]=3285377520;this.g=this.f=0};
var lk=function(a,b,c){c||(c=0);var d=a.m;if(va(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.a[0];c=a.a[1];for(var g=a.a[2],m=a.a[3],q=a.a[4],y,e=0;80>e;e++)40>e?20>e?(f=m^c&(g^m),y=1518500249):(f=c^g^m,y=1859775393):60>e?(f=c&g|m&(c|g),y=2400959708):(f=c^g^m,y=3395469782),
f=(b<<5|b>>>27)+f+q+y+d[e]&4294967295,q=m,m=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.a[0]=a.a[0]+b&4294967295;a.a[1]=a.a[1]+c&4294967295;a.a[2]=a.a[2]+g&4294967295;a.a[3]=a.a[3]+m&4294967295;a.a[4]=a.a[4]+q&4294967295};
kk.prototype.update=function(a,b){if(null!=a){k(b)||(b=a.length);for(var c=b-this.b,d=0,e=this.j,f=this.f;d<b;){if(0==f)for(;d<=c;)lk(this,a,d),d+=this.b;if(va(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.b){lk(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.b){lk(this,e);f=0;break}}this.f=f;this.g+=b}};
kk.prototype.digest=function(){var a=[],b=8*this.g;56>this.f?this.update(this.h,56-this.f):this.update(this.h,this.b-(this.f-56));for(var c=this.b-1;56<=c;c--)this.j[c]=b&255,b/=256;lk(this,this.j);for(c=b=0;5>c;c++)for(var d=24;0<=d;d-=8)a[b]=this.a[c]>>d&255,++b;return a};var nk=function(){this.j=ob();this.b=new mk(null,null);this.a=new mk(null,null);this.g=[];this.h=this.f=0;rj(this)},ok=function(a,b){b=b.toLowerCase();var c=new kk;c.update(b);c.update(a.j);return"r"+fk(c.digest(),!0)},pk=function(){var a=nk.U();return a.b.model?a.b:a.a.model?a.a:new mk(null,null)};nk.prototype.fa=function(){return"SinkUtils"};
nk.prototype.qa=function(){return[{recentLaunchedDevice:this.b,recentDiscoveredDevice:this.a},{receiverIdToken:this.j,fixedIpList:this.g.join(","),castControlPort:this.f,lastCloudSinkCheckTimeMillis:this.h}]};
nk.prototype.va=function(){var a=oj(this);a&&(this.b=a.recentLaunchedDevice||new mk(null,null),this.a=a.recentDiscoveredDevice||new mk(null,null));if(a=pj(this))this.j=a.receiverIdToken||ob(),this.g=a.fixedIpList&&a.fixedIpList.split(",")||[],this.f=a.castControlPort||0,this.h=a.lastCloudSinkCheckTimeMillis||0};qa(nk);var mk=function(a,b){this.model=a;this.ip=b};var qk=function(a,b){this.hb=this.Gb=this.Sb=this.za=this.gb=null;this.ab=new Wj(ok(nk.U(),b),a);this.eb={};this.Sd={};this.ac=!1};qk.prototype.getId=function(){return this.ab.id};qk.prototype.update=function(a){if(this.getId()!=a.getId())return!1;var b=!1;this.ab.friendlyName!=a.ab.friendlyName&&(this.ab.friendlyName=a.ab.friendlyName,b=!0);this.Sb!=a.Sb&&(this.Sb=a.Sb,b=!0);this.Gb!=a.Gb&&(this.Gb=a.Gb,b=!0);this.gb!=a.gb&&(this.gb=a.gb,b=!0);this.za!=a.za&&(this.za=a.za,b=!0);return b};
qk.prototype.Da=function(){return this.gb};qk.prototype.ua=function(){return this.za};var rk=function(a,b){return a.eb[b]||"unknown"},sk=function(a){var b=new qk(a.ab.friendlyName,"");b.ab.id=a.ab.id;b.gb=a.gb;b.za=a.za;b.Sb=a.Sb;b.Gb=a.Gb;b.hb=a.hb;b.eb=a.eb;b.Sd=a.Sd;b.ac=a.ac;return b};var uk=function(a,b,c,d,e,f){a=ok(nk.U(),a);this.b=new Wj(a,b,tk(d));this.hb=c||null;this.a=d||null;this.gb=e||null;this.za=f||null;this.eb={};this.Ub=!1},vk=function(a){if(!a.hb||!a.Da())return null;var b=new uk(a.ab.id,a.ab.friendlyName,a.hb,void 0,a.Da(),nk.U().f||8009);b.b.id=a.ab.id;b.Ub=!0;return b};
uk.prototype.update=function(a,b,c,d){var e=!1;this.b.friendlyName!=a&&(this.b.friendlyName=a,e=!0);null!=b&&this.gb!=b&&(this.gb=b,e=!0);null!=c&&this.za!=c&&(this.za=c,e=!0);null!=d&&this.a!=d&&(this.a=d,e=!0);return e};var tk=function(a){return a&1?"cast":a&32?"cast_audio_group":"cast_audio"};uk.prototype.getId=function(){return this.b.id};
var wk=function(a){var b=new uk("",a.friendlyName,a.modelName,a.capabilities,a.ip,a.port);b.b.id=a.id;b.Ub=a.discoveredByDial;b.eb=a.appStatusMap;for(var c in b.eb)"unavailable"==b.eb[c]&&(b.eb[c]="unavailable_rescan");return b};uk.prototype.Da=function(){return this.gb};uk.prototype.ua=function(){return this.za};var xk=function(a,b){return a.eb[b]||"unknown"};var yk={Ao:0,ro:1},zk={Vq:0,nj:1,Vp:2},Ak={DIAL:0,Fo:1,Go:2,nn:3},Bk={mp:0,TIMEOUT:1,FAILED:2},Ck={sg:0,ym:1,dn:2,Kn:3,Xm:4,Uo:5,gn:6,Ip:7},Dk={Gi:0,SUCCESS:1},Ek=function(a){ai("MediaRouter.Cast.Session.Ended",a,zk)},Fk=function(a){ai("MediaRouter.Cast.Channel.ConnectResult",a,Dk)},Gk=function(a){ai("MediaRouter.Cast.Discovery.Type",a,Ak)},Hk=function(a){ai("MediaRouter.Cast.Session.Fail",a,Bk)};var Ik=function(a,b,c,d,e){for(var f=[],g=4;g<arguments.length;++g)f[g-4]=arguments[g];var m=this;this.g=a;this.m=b;this.j=c;this.b=d;this.h=f;this.a=!1;this.f=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return m.ck.apply(m,[].concat(la(b)))}};h=Ik.prototype;h.addListener=function(){this.a||(this.a=!0,this.b.addListener.apply(this.b,[].concat([this.f],la(this.h))))};h.removeListener=function(){this.a&&(this.b.removeListener(this.f),this.a=!1)};
h.Fe=function(a){for(var b=0;b<arguments.length;++b);return!0};h.ck=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];var d=this;ni(this.g);if(!this.Fe.apply(this,[].concat(la(b))))return!1;zi(this.j).then(function(a){return a.handleEvent.apply(a,[].concat([d.b],la(b)))});return this.We()};h.fa=function(){return"mr.EventListener."+this.m};h.qa=function(){return[this.a]};h.va=function(){oj(this)&&this.addListener()};h.We=function(){};var Jk={serviceType:"_googlecast._tcp.local"},Kk=null,Lk=function(){Kk||(Kk=new Ik(7,"CastMdnsEventListener","mr.cast.SinkDiscoveryService",chrome.mdns.onServiceList,Jk));return Kk},Mk=null,Nk=function(){Mk||(Mk=Hh()?new Ik(9,"CastNetworkListChangedEventListener","mr.cast.SinkDiscoveryService",chrome.networkingPrivate.onNetworkListChanged):new Ik(8,"CastNetworksChangedEventListener","mr.cast.SinkDiscoveryService",chrome.networkingPrivate.onNetworksChanged));return Mk};var Ok=function(a){return Promise.all(a.map(function(a){return a.then(function(a){return{ec:!0,value:a}},function(a){return{ec:!1,reason:a}})}))};var Pk=function(a,b){this.h=b;this.F=a;this.F.g=this.b.bind(this);this.a=new C;this.m=new C;this.f=new C;this.ia=null;this.v=this.B="";this.g=null;this.J=this.w=!1;this.H=[];this.l=v("mr.cast.SinkDiscoveryService");this.u=new Set;this.o={wc:0,Lc:0};this.j=this.A=0};ka(Pk,ui);Pk.prototype.init=function(){rj(this);this.w&&(Qk(this),Rk(this));Ei("mr.cast.SinkDiscoveryService",this)};var Qk=function(a){x(a.l,"Start listening to network changes");Nk().addListener()};
Pk.prototype.start=function(){var a=Date.now(),b=Lk();if(b.a){if(6E4>a-this.ia)return;x(this.l,"Forcing mdns discovery");chrome.mdns.forceDiscovery(pa);b=Lk();b.removeListener()}else x(this.l,"Adding mdns listener");b.addListener();this.ia=a};
Pk.prototype.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(a==chrome.mdns.onServiceList)this.K.apply(this,[].concat(la(c)));else if(a==chrome.networkingPrivate.onNetworksChanged||a==chrome.networkingPrivate.onNetworkListChanged)Rk(this);else throw Error("Unhandled event");};
var Sk=function(a,b){if(-1==b.serviceName.indexOf("._googlecast."))return null;var c={};b.serviceData.forEach(function(a){0==a.search(/[a-z]{2}=.+/)&&(c[a.substring(0,2)]=a.substring(3))});var d=c.id;if(!d)return w(a.l,"Missing ID"),null;ok(nk.U(),d);var e=Number(b.serviceHostPort.substring(b.serviceHostPort.indexOf(":")+1));if(isNaN(e)||0>e||65535<e)return w(a.l,"Missing or invalid port"),null;var f=c.fn;if(!f||!b.ipAddress)return w(a.l,"Missing friendly name or IP address"),null;a=Number(c.ca);
return new uk(d,f,c.md||"",isNaN(a)?0:a,b.ipAddress,e)};Pk.prototype.K=function(a){var b=this;x(this.l,"Registering "+a.length+" devices");0!=this.j&&(clearTimeout(this.j),this.j=0);a=Tk(this,a).map(function(a){return Uk(b,a,!0)});Ok(a).then(function(){b.o={wc:b.a.Y(),Lc:Vk(b)};Wk(b)})};
var Wk=function(a){0!=a.j||36E5>Date.now()-a.A||(a.j=setTimeout(function(){var b=a.o;bi("MediaRouter.Cast.Discovery.KnownDevicesCount",b.Lc);bi("MediaRouter.Cast.Discovery.ConnectedDevicesCount",b.wc);a.A=Date.now();a.j=0},5E3))};Pk.prototype.Rg=function(){return this.o};
var Vk=function(a){var b=a.u.size;Ne(a.a.Na(!1),function(c){a.u.has(c.getId())||b++});return b},Uk=function(a,b,c){if(a.f.Oa(b.getId()))return Promise.resolve();a.f.set(b.getId(),b);return Xk(a,b).then(function(d){d?(d=a.a.get(b.getId()),c&&(d?d.Ub&&Gk(3):Gk(1)),Yk(a,b)):(x(a.l,"Inaccessible sink: "+b.getId()),Zk(a,b.getId()));a.f.remove(b.getId())})},$k=function(a,b){return void 0!=a.H.find(function(a){return a.ipAddress==b.ipAddress})},Tk=function(a,b){var c=[];a.u.clear();b.forEach(function(b){if(!$k(a,
b)&&(b=Sk(a,b))){var d=b.getId();a.u.add(d);if(a.f.Oa(d)){var f=a.f.get(d);if(f.Da()==b.Da()&&f.ua()==b.ua()){x(a.l,"Sink has pending connection "+d);return}w(a.l,"Pending sink changed ip "+d);a.f.remove(d)}if(d=a.a.get(d)){if(b=d.update(b.b.friendlyName,b.Da(),b.ua(),b.a))d.Ub=!1;b&&al(a.h,d)}else c.push(b)}});return c},bl=function(a,b){var c=a.a.get(b.getId()),d=null,e=b.Da(),f=b.ua();null!=e&&null!=f&&(d=a.m.get(e+":"+f));if(c&&!d){var g=b.Da(),m=b.ua();g&&m&&a.m.remove(g+":"+m)}d&&!c&&a.a.remove(d.getId());
a.a.set(b.getId(),b);null!=e&&null!=f&&a.m.set(e+":"+f,b)},Yk=function(a,b){x(a.l,"Adding sink "+b.getId());bl(a,b);a.w||(a.w=!0,Qk(a));a=a.h;a.b.onSinkAvailabilityUpdated(a,1);al(a,b);cl(a.g,b);nk.U().a=new mk(b.hb,b.Da())},Zk=function(a,b){var c=a.a.get(b);if(c){x(a.l,"Removing sink "+b);a.a.remove(b);b=c.Da();var d=c.ua();null!=b&&null!=d&&a.m.remove(b+":"+d);a.h.J(c)}},dl=function(a){var b=a.a.P();a.a.clear();a.m.clear();b.forEach(a.h.J,a.h)},Xk=function(a,b){z(a.l,"Checking access to "+b.getId());
return el(a.F,b).then(function(a){if(b.Ub){var c=4;a.audioOnly||(c|=1);b.a=c;b.b.iconType=tk(b.a)}return!0},function(){return!1})},fl=function(a){x(a.l,"Pruning inactive sinks.");Ne(a.a.Na(!1),function(b){a.f.set(b.getId(),b);Xk(a,b).then(function(c){c||Zk(a,b.getId());a.f.remove(b.getId())})})};Pk.prototype.b=function(a){return this.a.get(a,null)};var gl=function(a,b){var c=[];Ne(a.a.Na(!1),function(a){Vj(xk(a,b))&&c.push(a)});return c};Pk.prototype.fa=function(){return"cast.SinkDiscoveryService"};
Pk.prototype.qa=function(){var a=this,b={};Ne(this.a.Na(!0),function(c){var d;d=a.a.get(c);d={id:d.getId(),ip:d.Da(),port:d.ua(),friendlyName:d.b.friendlyName,modelName:d.hb,capabilities:d.a,discoveredByDial:d.Ub,appStatusMap:d.eb};b[c]=d});return[new hl(b,this.v,this.o),new il(this.w,this.A)]};
Pk.prototype.va=function(){var a=oj(this);if(a&&3==a.version){this.v=a.networkIds;this.o=a.deviceCounts;a=a.sinkMap;this.J=0<Object.keys(a).length;for(var b in a){var c=wk(a[b]);this.b(c.getId())||bl(this,c)}fl(this)}if(b=pj(this))this.w=b.hasSavedSinks,this.A=b.lastSinkCountMetricRecordTime||0};
var jl=function(a,b){a.J=0<Object.keys(b).length;for(var c in b){var d=wk(b[c]);a.b(d.getId())||Uk(a,d,!1)}},Rk=function(a){x(a.l,"Fetching networks state");a.g&&zj(a.g);chrome.networkingPrivate.getNetworks({networkType:"All",visible:!0,configured:!0},function(b){for(var c=[],d=0;d<b.length;d++)"Connected"==b[d].ConnectionState&&c.push(b[d].GUID);kl(a,c.sort().join(","))})},kl=function(a,b){x(a.l,function(){return"Update current network "+ll(b)});b!=a.B&&(a.g&&(qj.delete(a.g.fa()),a.g=null),b?(a.v&&
b!=a.v?dl(a):fl(a),a.B=b,a.v=b,a.g=new ml(a,a.B)):a.B="")},ll=function(a){for(var b=0,c=0;c<a.length;c++)b+=a.charCodeAt(c);return b},hl=function(a,b,c){this.sinkMap=a;this.networkIds=b;this.deviceCounts=c;this.version=3},il=function(a,b){this.hasSavedSinks=a;this.lastSinkCountMetricRecordTime=b},ml=function(a,b){this.a=a;this.b=b;rj(this)};ml.prototype.fa=function(){return"cast.NetworkSink."+this.b};
ml.prototype.qa=function(){var a=this,b=null,c=this.a.qa();c&&(this.a.J||0<this.a.a.Y())&&(b=c[0]);x(this.a.l,function(){return"Saving sink data for network "+ll(a.b)});return[null,b]};ml.prototype.va=function(){var a=this;x(this.a.l,function(){return"Restoring sink data for network "+ll(a.b)});var b=pj(this);b&&3==b.version&&jl(this.a,b.sinkMap)};var nl={STOP_MEDIA:"STOP",MEDIA_SET_VOLUME:"SET_VOLUME",MEDIA_GET_STATUS:"GET_STATUS"};var ol=function(){this.type="GET_STATUS";this.requestId=0};var pl=function(a,b,c){this.type="APPLICATION_BROADCAST";this.requestId=0;this.appIds=a;this.namespace=b;this.message=c};var ql=function(a){this.type="LAUNCH";this.requestId=0;this.appId=a;this.language=null};var rl=function(a){this.type="STOP";this.requestId=0;this.sessionId=a||null};var sl=function(a,b){this.requestId=a;this.b=b;this.ni=null};sl.prototype.a=function(){};var tl=function(){this.a=new C},ul=function(a,b){a.a.set(b.requestId,b);b.ni=setTimeout(function(){a.a.remove(b.requestId);b.a()},b.b)},vl=function(a,b){var c=a.a.get(b);if(!c)return null;clearTimeout(c.ni);a.a.remove(b);return c};var wl=function(a,b){this.b=a;this.f=b;this.a=new tl;this.h=new Kj("cast.RequestIdGenerator")};wl.prototype.init=function(){rj(this.h)};var yl=function(a,b,c,d){var e=Lj(a.h);b.requestId=e;b=new Nc;c=new xl(e,b,l(c)&&0<c?c:6E5,d);ul(a.a,c);return c};
wl.prototype.sendRequest=function(a,b,c,d,e,f){var g=this;if(!Uj.hasOwnProperty(c))return Promise.reject(Error("Custom namespace is not supported"));var m=yl(this,a,k(d)?d:3E3,e),q=m.ra;zl(this.b,b,c,a,e||this.f,f).then(null,function(){vl(g.a,m.requestId);q.b(Al)});return q.a};wl.prototype.sendMessage=function(a,b,c,d,e,f){var g=this,m=yl(this,a,k(d)?d:3E3,e),q=m.ra;zl(this.b,b,c,a,e||this.f,f).then(function(){vl(g.a,m.requestId);q.resolve(!0)},function(){vl(g.a,m.requestId);q.b(Al)});return q.a};
var Bl=function(a,b,c){var d=new ql(b.appId);d.language=b.language?b.language:chrome.i18n.getUILanguage?chrome.i18n.getUILanguage():chrome.runtime.getManifest().default_locale;return a.sendRequest(d,c,Pj,b.requestSessionTimeout)},Cl=Error("Timeout"),Al=Error("Failed to send message"),xl=function(a,b,c,d){sl.call(this,a,c);this.ra=b;this.sourceId=d};ka(xl,sl);xl.prototype.a=function(){this.ra.b(Cl)};var Dl=function(a,b){this.type="cast_app";this.originId=window["castApp.eventPage.Message.OriginID"]||void 0;this.subtype=a;this.devices=b;this.logRecord=this.deviceJustSetUp=void 0};p("castApp.eventPage.Message",Dl);var El=function(a,b,c){this.ipAddress=a;this.appId=b;this.sessionId=c};Dl.DeviceData=El;Dl.DeviceJustSetUp=function(a,b,c,d){this.ipAddress=a;this.name=b;this.udn=c;this.modelName=d};Dl.DeviceCapabilities=function(){};
Dl.LogRecord=function(a,b,c,d){this.levelValue=a;this.msg=b;this.loggerName=c;this.time=d};var Gl=function(a,b){this.f=a;this.h=b;this.b=new C;this.a=new mf;this.g=0;this.w=new C("serviceCheck",this.pk.bind(this),"startDeviceMonitor",this.rk.bind(this),"releaseDeviceMonitor",this.nk.bind(this),"deviceJustSetUp",this.kk.bind(this),"logRecord",this.lk.bind(this));chrome.runtime.onMessage.addListener(this.m.bind(this));chrome.runtime.onMessageExternal.addListener(this.j.bind(this));Fl(this,"serviceReady")};Gl.prototype.l=v("castApp.eventPage.Service");
var Jl=function(a){if(Hl(a)){var b=new mf;Ne(a.f.a.Na(!1),function(a){var c=a.Da();b.add(c);this.b.Oa(c)||this.h.sendRequest(new ol,a,Pj)}.bind(a));var c=!1;a.b.Ea().forEach(function(a){b.contains(a)||(this.b.remove(a),c=!0)}.bind(a));c&&Il(a)}},Hl=function(a){if(0===a.a.Y())return!1;var b=Ea();3E4<b-a.g&&(a.g=b,chrome.tabs.query({url:["chrome://cast/*","chrome-extension://"+chrome.runtime.id+"/cast_setup/*"]},function(a){0===a.length?(x(this.l,"No tabs found. Clearing device monitor clients."),this.a.clear()):
x(this.l,function(){return"Tab check found active tabs: "+a.map(function(a){return a.id})})}.bind(a)));b=a.a.Y();x(a.l,"Monitor client count: "+b);return 0<b};Gl.prototype.m=function(a,b,c){if("object"!==typeof a||"cast_app"!==a.type)return!1;var d=this.w.get(a.subtype);if(!d)return!1;if(!a.originId)return tb("Missing origin ID in the incoming message."),!1;try{var e=d(a,b,c);e&&c(e)}catch(f){this.l.error("Error while handling request",f)}return!1};
var Fl=function(a,b,c){var d=new Dl(b,c);z(a.l,function(){return"Sending message: "+JSON.stringify(d)});chrome.runtime.sendMessage(d)};h=Gl.prototype;h.pk=function(){Fl(this,"serviceReady")};h.rk=function(a){this.a.contains(a.originId)?x(this.l,"Client: "+a.originId+"already registered, dispatching current device list."):(x(this.l,"Registering monitor client: "+a.originId),this.a.add(a.originId));Il(this);Kl(this)};h.nk=function(a){x(this.l,"Unregistering monitor client: "+a.originId);this.a.remove(a.originId)};
h.kk=function(a){a=a.deviceJustSetUp;var b=a.udn.replace(/-/g,"").toLowerCase(),c;a.capabilities&&(c=(a.capabilities.audioOutSupported?4:0)|(a.capabilities.videoOutSupported?1:0));c=new uk(b,a.name,a.modelName,c,a.ipAddress,nk.U().f||8009);Uk(this.f,c,!0)};h.lk=function(a){a=a.logRecord;Jc({level:Mc(a.levelValue),G:a.loggerName,time:a.time,message:a.msg})};
var Il=function(a){var b=a.b.P();Fl(a,"devices",b)},Kl=function(a){z(a.f.l,"Executing forceDiscovery.");chrome.mdns.forceDiscovery(pa);a.f.a.P().forEach(function(a){this.h.sendRequest(new ol,a,Pj)}.bind(a))};Gl.prototype.j=function(a,b,c){switch(a.type){case "handshake":c(new Mj("handshake"));break;case "launch":b=b.tab&&l(b.tab.id)?b.tab.id:null,null===b||"setup"!==a.entryPoint&&"offers"!==a.entryPoint&&"devices"!==a.entryPoint||chrome.tabs.update(b,{url:"chrome://cast#"+a.entryPoint})}};chrome.cast.Fb={CUSTOM_CONTROLLER_SCOPED:"custom_controller_scoped",TAB_AND_ORIGIN_SCOPED:"tab_and_origin_scoped",ORIGIN_SCOPED:"origin_scoped",PAGE_SCOPED:"page_scoped"};p("chrome.cast.AutoJoinPolicy",chrome.cast.Fb);chrome.cast.Qd={CREATE_SESSION:"create_session",CAST_THIS_TAB:"cast_this_tab"};p("chrome.cast.DefaultActionPolicy",chrome.cast.Qd);chrome.cast.Rb={VIDEO_OUT:"video_out",AUDIO_OUT:"audio_out",VIDEO_IN:"video_in",AUDIO_IN:"audio_in",MULTIZONE_GROUP:"multizone_group"};
p("chrome.cast.Capability",chrome.cast.Rb);chrome.cast.Hb={CANCEL:"cancel",TIMEOUT:"timeout",API_NOT_INITIALIZED:"api_not_initialized",INVALID_PARAMETER:"invalid_parameter",EXTENSION_NOT_COMPATIBLE:"extension_not_compatible",EXTENSION_MISSING:"extension_missing",RECEIVER_UNAVAILABLE:"receiver_unavailable",SESSION_ERROR:"session_error",CHANNEL_ERROR:"channel_error",LOAD_MEDIA_FAILED:"load_media_failed"};p("chrome.cast.ErrorCode",chrome.cast.Hb);chrome.cast.pj={AVAILABLE:"available",UNAVAILABLE:"unavailable"};
p("chrome.cast.ReceiverAvailability",chrome.cast.pj);chrome.cast.wj={CHROME:"chrome",IOS:"ios",ANDROID:"android"};p("chrome.cast.SenderPlatform",chrome.cast.wj);chrome.cast.Rd={CAST:"cast",DIAL:"dial",HANGOUT:"hangout",CUSTOM:"custom"};p("chrome.cast.ReceiverType",chrome.cast.Rd);chrome.cast.Ci={RUNNING:"running",STOPPED:"stopped",ERROR:"error"};p("chrome.cast.DialAppState",chrome.cast.Ci);chrome.cast.ed={CAST:"cast",STOP:"stop"};p("chrome.cast.ReceiverAction",chrome.cast.ed);
chrome.cast.pg={CONNECTED:"connected",DISCONNECTED:"disconnected",STOPPED:"stopped"};p("chrome.cast.SessionStatus",chrome.cast.pg);chrome.cast.Lj={ATTENUATION:"attenuation",FIXED:"fixed",MASTER:"master"};p("chrome.cast.VolumeControlType",chrome.cast.Lj);chrome.cast.VERSION=[1,2];p("chrome.cast.VERSION",chrome.cast.VERSION);chrome.cast.cm=!0;p("chrome.cast.usingPresentationApi",chrome.cast.cm);chrome.cast.Error=function(a,b,c){this.code=a;this.description=b||null;this.details=c||null};p("chrome.cast.Error",chrome.cast.Error);chrome.cast.vj=function(a){this.platform=a;this.packageId=this.url=null};p("chrome.cast.SenderApplication",chrome.cast.vj);chrome.cast.Image=function(a){this.url=a;this.width=this.height=null};p("chrome.cast.Image",chrome.cast.Image);
chrome.cast.Volume=function(a,b){this.level=k(a)?a:null;this.muted=k(b)?b:null};p("chrome.cast.Volume",chrome.cast.Volume);chrome.cast.vi=function(a,b,c,d,e){this.sessionRequest=a;this.sessionListener=b;this.receiverListener=c;this.autoJoinPolicy=d||chrome.cast.Fb.TAB_AND_ORIGIN_SCOPED;this.defaultActionPolicy=e||chrome.cast.Qd.CREATE_SESSION;this.customDialLaunchCallback=null;this.invisibleSender=!1;this.additionalSessionRequests=[]};p("chrome.cast.ApiConfig",chrome.cast.vi);chrome.cast.Ei=function(a,b){this.appName=a;this.launchParameter=b||null};p("chrome.cast.DialRequest",chrome.cast.Ei);
chrome.cast.eg=function(a,b,c){this.receiver=a;this.appState=b;this.extraData=c||null};p("chrome.cast.DialLaunchData",chrome.cast.eg);chrome.cast.Di=function(a,b){this.doLaunch=a;this.launchParameter=b||null};p("chrome.cast.DialLaunchResponse",chrome.cast.Di);chrome.cast.og=function(a,b,c){this.appId=a;this.capabilities=ta(b)?b:[chrome.cast.Rb.VIDEO_OUT,chrome.cast.Rb.AUDIO_OUT];this.requestSessionTimeout=c||chrome.cast.timeout.requestSession;this.dialRequest=this.language=null};
p("chrome.cast.SessionRequest",chrome.cast.og);
chrome.cast.Le=function(a,b,c,d){this.label=a;a=b;lb.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(fb,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(gb,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(hb,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ib,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(jb,"&#39;")),-1!=a.indexOf("\x00")&&(a=a.replace(kb,"&#0;")));this.friendlyName=a;this.capabilities=c||[];this.volume=d||null;this.receiverType=chrome.cast.Rd.CAST;this.displayStatus=this.isActiveInput=null};
p("chrome.cast.Receiver",chrome.cast.Le);chrome.cast.qj=function(a,b){this.statusText=a;this.appImages=b;this.showStop=null};p("chrome.cast.ReceiverDisplayStatus",chrome.cast.qj);chrome.cast.rg=function(){this.requestSession=6E4;this.sendCustomMessage=this.setReceiverVolume=this.stopSession=this.leaveSession=3E3};p("chrome.cast.Timeout",chrome.cast.rg);chrome.cast.timeout=new chrome.cast.rg;p("chrome.cast.timeout",chrome.cast.timeout);chrome.cast.Yf="auto-join";chrome.cast.mg="cast-session_";chrome.cast.media.dd={PAUSE:"pause",SEEK:"seek",STREAM_VOLUME:"stream_volume",STREAM_MUTE:"stream_mute"};p("chrome.cast.media.MediaCommand",chrome.cast.media.dd);chrome.cast.media.rb={GENERIC:0,MOVIE:1,TV_SHOW:2,MUSIC_TRACK:3,PHOTO:4};p("chrome.cast.media.MetadataType",chrome.cast.media.rb);chrome.cast.media.Ke={IDLE:"IDLE",PLAYING:"PLAYING",PAUSED:"PAUSED",BUFFERING:"BUFFERING"};p("chrome.cast.media.PlayerState",chrome.cast.media.Ke);
chrome.cast.media.Me={OFF:"REPEAT_OFF",ALL:"REPEAT_ALL",SINGLE:"REPEAT_SINGLE",ALL_AND_SHUFFLE:"REPEAT_ALL_AND_SHUFFLE"};p("chrome.cast.media.RepeatMode",chrome.cast.media.Me);chrome.cast.media.rj={PLAYBACK_START:"PLAYBACK_START",PLAYBACK_PAUSE:"PLAYBACK_PAUSE"};p("chrome.cast.media.ResumeState",chrome.cast.media.rj);chrome.cast.media.qg={BUFFERED:"BUFFERED",LIVE:"LIVE",OTHER:"OTHER"};p("chrome.cast.media.StreamType",chrome.cast.media.qg);
chrome.cast.media.Ni={CANCELLED:"CANCELLED",INTERRUPTED:"INTERRUPTED",FINISHED:"FINISHED",ERROR:"ERROR"};p("chrome.cast.media.IdleReason",chrome.cast.media.Ni);chrome.cast.media.Ij={TEXT:"TEXT",AUDIO:"AUDIO",VIDEO:"VIDEO"};p("chrome.cast.media.TrackType",chrome.cast.media.Ij);chrome.cast.media.Fj={SUBTITLES:"SUBTITLES",CAPTIONS:"CAPTIONS",DESCRIPTIONS:"DESCRIPTIONS",CHAPTERS:"CHAPTERS",METADATA:"METADATA"};p("chrome.cast.media.TextTrackType",chrome.cast.media.Fj);
chrome.cast.media.Bj={NONE:"NONE",OUTLINE:"OUTLINE",DROP_SHADOW:"DROP_SHADOW",RAISED:"RAISED",DEPRESSED:"DEPRESSED"};p("chrome.cast.media.TextTrackEdgeType",chrome.cast.media.Bj);chrome.cast.media.Gj={NONE:"NONE",NORMAL:"NORMAL",ROUNDED_CORNERS:"ROUNDED_CORNERS"};p("chrome.cast.media.TextTrackWindowType",chrome.cast.media.Gj);
chrome.cast.media.Cj={SANS_SERIF:"SANS_SERIF",MONOSPACED_SANS_SERIF:"MONOSPACED_SANS_SERIF",SERIF:"SERIF",MONOSPACED_SERIF:"MONOSPACED_SERIF",CASUAL:"CASUAL",CURSIVE:"CURSIVE",SMALL_CAPITALS:"SMALL_CAPITALS"};p("chrome.cast.media.TextTrackFontGenericFamily",chrome.cast.media.Cj);chrome.cast.media.Dj={NORMAL:"NORMAL",BOLD:"BOLD",BOLD_ITALIC:"BOLD_ITALIC",ITALIC:"ITALIC"};p("chrome.cast.media.TextTrackFontStyle",chrome.cast.media.Dj);chrome.cast.media.Ji=function(){this.customData=null};p("chrome.cast.media.GetStatusRequest",chrome.cast.media.Ji);chrome.cast.media.cj=function(){this.customData=null};p("chrome.cast.media.PauseRequest",chrome.cast.media.cj);chrome.cast.media.ej=function(){this.customData=null};p("chrome.cast.media.PlayRequest",chrome.cast.media.ej);chrome.cast.media.uj=function(){this.customData=this.resumeState=this.currentTime=null};p("chrome.cast.media.SeekRequest",chrome.cast.media.uj);
chrome.cast.media.xj=function(){this.customData=null};p("chrome.cast.media.StopRequest",chrome.cast.media.xj);chrome.cast.media.Mj=function(a){this.volume=a;this.customData=null};p("chrome.cast.media.VolumeRequest",chrome.cast.media.Mj);chrome.cast.media.Si=function(a){this.type="LOAD";this.requestId=0;this.sessionId=null;this.media=a;this.activeTrackIds=null;this.autoplay=!0;this.customData=this.currentTime=null};p("chrome.cast.media.LoadRequest",chrome.cast.media.Si);
chrome.cast.media.Tp=function(a){this.type="PRECACHE";this.requestId=0;this.data=a};chrome.cast.media.Fi=function(a,b){this.requestId=0;this.activeTrackIds=a||null;this.textTrackStyle=b||null};p("chrome.cast.media.EditTracksInfoRequest",chrome.cast.media.Fi);chrome.cast.media.Ii=function(){this.metadataType=this.type=chrome.cast.media.rb.GENERIC;this.releaseDate=this.releaseYear=this.images=this.subtitle=this.title=null};p("chrome.cast.media.GenericMediaMetadata",chrome.cast.media.Ii);
chrome.cast.media.Vi=function(){this.metadataType=this.type=chrome.cast.media.rb.MOVIE;this.releaseDate=this.releaseYear=this.images=this.subtitle=this.studio=this.title=null};p("chrome.cast.media.MovieMediaMetadata",chrome.cast.media.Vi);chrome.cast.media.Jj=function(){this.metadataType=this.type=chrome.cast.media.rb.TV_SHOW;this.originalAirdate=this.releaseYear=this.images=this.episode=this.episodeNumber=this.season=this.seasonNumber=this.episodeTitle=this.title=this.seriesTitle=null};
p("chrome.cast.media.TvShowMediaMetadata",chrome.cast.media.Jj);chrome.cast.media.Wi=function(){this.metadataType=this.type=chrome.cast.media.rb.MUSIC_TRACK;this.releaseDate=this.releaseYear=this.images=this.discNumber=this.trackNumber=this.artistName=this.songName=this.composer=this.artist=this.albumArtist=this.title=this.albumName=null};p("chrome.cast.media.MusicTrackMediaMetadata",chrome.cast.media.Wi);
chrome.cast.media.dj=function(){this.metadataType=this.type=chrome.cast.media.rb.PHOTO;this.creationDateTime=this.height=this.width=this.longitude=this.latitude=this.images=this.location=this.artist=this.title=null};p("chrome.cast.media.PhotoMediaMetadata",chrome.cast.media.dj);chrome.cast.media.Ui=function(a,b){this.contentId=a;this.streamType=chrome.cast.media.qg.BUFFERED;this.contentType=b;this.customData=this.textTrackStyle=this.tracks=this.duration=this.metadata=null};
p("chrome.cast.media.MediaInfo",chrome.cast.media.Ui);chrome.cast.media.gj=function(a){this.itemId=null;this.media=a;this.autoplay=!0;this.startTime=0;this.playbackDuration=null;this.preloadTime=0;this.customData=this.activeTrackIds=null};p("chrome.cast.media.QueueItem",chrome.cast.media.gj);chrome.cast.media.Ai="CC1AD845";p("chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID",chrome.cast.media.Ai);chrome.cast.media.timeout={};chrome.cast.media.timeout.load=0;p("chrome.cast.media.timeout.load",chrome.cast.media.timeout.load);
chrome.cast.media.timeout.xa=0;p("chrome.cast.media.timeout.getStatus",chrome.cast.media.timeout.xa);chrome.cast.media.timeout.play=0;p("chrome.cast.media.timeout.play",chrome.cast.media.timeout.play);chrome.cast.media.timeout.pause=0;p("chrome.cast.media.timeout.pause",chrome.cast.media.timeout.pause);chrome.cast.media.timeout.seek=0;p("chrome.cast.media.timeout.seek",chrome.cast.media.timeout.seek);chrome.cast.media.timeout.stop=0;p("chrome.cast.media.timeout.stop",chrome.cast.media.timeout.stop);
chrome.cast.media.timeout.Xc=0;p("chrome.cast.media.timeout.setVolume",chrome.cast.media.timeout.Xc);chrome.cast.media.timeout.Ye=0;p("chrome.cast.media.timeout.editTracksInfo",chrome.cast.media.timeout.Ye);chrome.cast.media.timeout.ll=0;p("chrome.cast.media.timeout.queue",chrome.cast.media.timeout.ll);chrome.cast.media.Hj=function(a,b){this.trackId=a;this.trackContentType=this.trackContentId=null;this.type=b;this.customData=this.subtype=this.language=this.name=null};p("chrome.cast.media.Track",chrome.cast.media.Hj);
chrome.cast.media.Ej=function(){this.customData=this.fontStyle=this.fontGenericFamily=this.fontFamily=this.fontScale=this.windowRoundedCornerRadius=this.windowColor=this.windowType=this.edgeColor=this.edgeType=this.backgroundColor=this.foregroundColor=null};p("chrome.cast.media.TextTrackStyle",chrome.cast.media.Ej);chrome.cast.media.ij=function(a){this.type="QUEUE_LOAD";this.sessionId=this.requestId=null;this.items=a;this.startIndex=0;this.repeatMode=chrome.cast.media.Me.OFF;this.customData=null};
p("chrome.cast.media.QueueLoadRequest",chrome.cast.media.ij);chrome.cast.media.fj=function(a){this.type="QUEUE_INSERT";this.sessionId=this.requestId=null;this.items=a;this.customData=this.insertBefore=null};p("chrome.cast.media.QueueInsertItemsRequest",chrome.cast.media.fj);chrome.cast.media.mj=function(a){this.type="QUEUE_UPDATE";this.sessionId=this.requestId=null;this.items=a;this.customData=null};p("chrome.cast.media.QueueUpdateItemsRequest",chrome.cast.media.mj);
chrome.cast.media.hj=function(){this.type="QUEUE_UPDATE";this.customData=this.jump=this.currentItemId=this.sessionId=this.requestId=null};p("chrome.cast.media.QueueJumpRequest",chrome.cast.media.hj);chrome.cast.media.lj=function(){this.type="QUEUE_UPDATE";this.customData=this.repeatMode=this.sessionId=this.requestId=null};p("chrome.cast.media.QueueSetPropertiesRequest",chrome.cast.media.lj);
chrome.cast.media.jj=function(a){this.type="QUEUE_REMOVE";this.sessionId=this.requestId=null;this.itemIds=a;this.customData=null};p("chrome.cast.media.QueueRemoveItemsRequest",chrome.cast.media.jj);chrome.cast.media.kj=function(a){this.type="QUEUE_REORDER";this.sessionId=this.requestId=null;this.itemIds=a;this.customData=this.insertBefore=null};p("chrome.cast.media.QueueReorderItemsRequest",chrome.cast.media.kj);chrome.cast.media.I=function(a,b){this.sessionId=a;this.mediaSessionId=b;this.media=null;this.playbackRate=1;this.playerState=chrome.cast.media.Ke.IDLE;this.currentTime=0;this.supportedMediaCommands=[];this.volume=new chrome.cast.Volume;this.items=this.preloadedItemId=this.loadingItemId=this.currentItemId=this.customData=this.activeTrackIds=this.idleReason=null;this.repeatMode=chrome.cast.media.Me.OFF};p("chrome.cast.media.Media",chrome.cast.media.I);chrome.cast.media.I.prototype.xa=function(){};
chrome.cast.media.I.prototype.getStatus=chrome.cast.media.I.prototype.xa;chrome.cast.media.I.prototype.play=function(){};chrome.cast.media.I.prototype.play=chrome.cast.media.I.prototype.play;chrome.cast.media.I.prototype.el=function(){};chrome.cast.media.I.prototype.playWithContext=chrome.cast.media.I.prototype.el;chrome.cast.media.I.prototype.pause=function(){};chrome.cast.media.I.prototype.pause=chrome.cast.media.I.prototype.pause;chrome.cast.media.I.prototype.dl=function(){};
chrome.cast.media.I.prototype.pauseWithContext=chrome.cast.media.I.prototype.dl;chrome.cast.media.I.prototype.seek=function(){};chrome.cast.media.I.prototype.seek=chrome.cast.media.I.prototype.seek;chrome.cast.media.I.prototype.stop=function(){};chrome.cast.media.I.prototype.stop=chrome.cast.media.I.prototype.stop;chrome.cast.media.I.prototype.Xc=function(){};chrome.cast.media.I.prototype.setVolume=chrome.cast.media.I.prototype.Xc;chrome.cast.media.I.prototype.Ye=function(){};
chrome.cast.media.I.prototype.editTracksInfo=chrome.cast.media.I.prototype.Ye;chrome.cast.media.I.prototype.nl=function(){};chrome.cast.media.I.prototype.queueInsertItems=chrome.cast.media.I.prototype.nl;chrome.cast.media.I.prototype.ml=function(){};chrome.cast.media.I.prototype.queueAppendItem=chrome.cast.media.I.prototype.ml;chrome.cast.media.I.prototype.xl=function(){};chrome.cast.media.I.prototype.queueUpdateItems=chrome.cast.media.I.prototype.xl;chrome.cast.media.I.prototype.sl=function(){};
chrome.cast.media.I.prototype.queuePrev=chrome.cast.media.I.prototype.sl;chrome.cast.media.I.prototype.rl=function(){};chrome.cast.media.I.prototype.queueNext=chrome.cast.media.I.prototype.rl;chrome.cast.media.I.prototype.ol=function(a){Ll(this,a)};chrome.cast.media.I.prototype.queueJumpToItem=chrome.cast.media.I.prototype.ol;chrome.cast.media.I.prototype.wl=function(){};chrome.cast.media.I.prototype.queueSetRepeatMode=chrome.cast.media.I.prototype.wl;chrome.cast.media.I.prototype.ul=function(){};
chrome.cast.media.I.prototype.queueRemoveItems=chrome.cast.media.I.prototype.ul;chrome.cast.media.I.prototype.tl=function(a){Ll(this,a)};chrome.cast.media.I.prototype.queueRemoveItem=chrome.cast.media.I.prototype.tl;chrome.cast.media.I.prototype.vl=function(){};chrome.cast.media.I.prototype.queueReorderItems=chrome.cast.media.I.prototype.vl;chrome.cast.media.I.prototype.ql=function(a,b,c,d){a=Ll(this,a);0>a||(0>b?d&&d(new chrome.cast.Error(chrome.cast.Hb.INVALID_PARAMETER)):a==b&&c&&c())};
chrome.cast.media.I.prototype.queueMoveItemToNewIndex=chrome.cast.media.I.prototype.ql;chrome.cast.media.I.prototype.Yl=function(a){return-1<this.supportedMediaCommands.indexOf(a)};chrome.cast.media.I.prototype.supportsCommand=chrome.cast.media.I.prototype.Yl;chrome.cast.media.I.prototype.ek=function(){return this.currentTime};chrome.cast.media.I.prototype.getEstimatedTime=chrome.cast.media.I.prototype.ek;chrome.cast.media.I.prototype.Pe=function(){};
chrome.cast.media.I.prototype.addUpdateListener=chrome.cast.media.I.prototype.Pe;chrome.cast.media.I.prototype.Qe=function(){};chrome.cast.media.I.prototype.addUpdateListenerWithContext=chrome.cast.media.I.prototype.Qe;chrome.cast.media.I.prototype.Kf=function(){};chrome.cast.media.I.prototype.removeUpdateListener=chrome.cast.media.I.prototype.Kf;chrome.cast.media.I.prototype.Lf=function(){};chrome.cast.media.I.prototype.removeUpdateListenerWithContext=chrome.cast.media.I.prototype.Lf;
var Ll=function(a,b){return Hb(a.items,function(a){return a.itemId==b})};var Ml=function(a,b,c){this.sessionId=a;this.namespaceName=b;this.message=c};var Nl=function(a){this.a=a;this.l=v("mr.cast.ReceiverStatusQuerier")},Ol=function(a,b){return fg(new dg(n(a.b,a,b),3500,5),2).start().then(null,function(c){x(a.l,"Failed to get receiver status from "+b.getId());throw c;})};Nl.prototype.b=function(a){x(this.l,"Query receiver status: "+a.getId());return this.a.sendRequest(new ol,a,Pj)};var Pl=function(a,b){this.type="SET_VOLUME";this.requestId=0;this.volume=a;this.expectedVolume=b||null};chrome.cast.L=function(a,b,c,d,e){this.sessionId=a;this.appId=b;this.displayName=c;this.statusText=null;this.appImages=d;this.receiver=e;this.senderApps=[];this.namespaces=[];this.media=[];this.status=chrome.cast.pg.CONNECTED;this.transportId=""};p("chrome.cast.Session",chrome.cast.L);chrome.cast.L.prototype.Tl=function(a,b,c){this.fi(null,a,b,c)};chrome.cast.L.prototype.setReceiverVolumeLevel=chrome.cast.L.prototype.Tl;
chrome.cast.L.prototype.fi=function(a,b,c,d){b=new Pl(new chrome.cast.Volume(b,null),this.receiver.volume);a.setReceiverVolume(this.sessionId,b,c,d)};chrome.cast.L.prototype.setReceiverVolumeLevelWithContext=chrome.cast.L.prototype.fi;chrome.cast.L.prototype.Sl=function(a,b,c){this.ei(0,a,b,c)};chrome.cast.L.prototype.setReceiverMuted=chrome.cast.L.prototype.Sl;
chrome.cast.L.prototype.ei=function(a,b,c,d){a=new Pl(new chrome.cast.Volume(null,b),this.receiver.volume);null.setReceiverVolume(this.sessionId,a,c,d)};chrome.cast.L.prototype.setReceiverMutedWithContext=chrome.cast.L.prototype.ei;chrome.cast.L.prototype.leave=function(a,b){null.leaveSession(this.sessionId,a,b)};chrome.cast.L.prototype.leave=chrome.cast.L.prototype.leave;chrome.cast.L.prototype.stop=function(){};chrome.cast.L.prototype.stop=chrome.cast.L.prototype.stop;
chrome.cast.L.prototype.Vl=function(){};chrome.cast.L.prototype.stopWithContext=chrome.cast.L.prototype.Vl;chrome.cast.L.prototype.sendMessage=function(){};chrome.cast.L.prototype.sendMessage=chrome.cast.L.prototype.sendMessage;chrome.cast.L.prototype.Nl=function(){};chrome.cast.L.prototype.sendMessageWithContext=chrome.cast.L.prototype.Nl;chrome.cast.L.prototype.Pe=function(){};chrome.cast.L.prototype.addUpdateListener=chrome.cast.L.prototype.Pe;chrome.cast.L.prototype.Qe=function(){};
chrome.cast.L.prototype.addUpdateListenerWithContext=chrome.cast.L.prototype.Qe;chrome.cast.L.prototype.Kf=function(){};chrome.cast.L.prototype.removeUpdateListener=chrome.cast.L.prototype.Kf;chrome.cast.L.prototype.Lf=function(){};chrome.cast.L.prototype.removeUpdateListenerWithContext=chrome.cast.L.prototype.Lf;chrome.cast.L.prototype.Pj=function(){};chrome.cast.L.prototype.addMessageListener=chrome.cast.L.prototype.Pj;chrome.cast.L.prototype.Qj=function(){};
chrome.cast.L.prototype.addMessageListenerWithContext=chrome.cast.L.prototype.Qj;chrome.cast.L.prototype.Nj=function(){};chrome.cast.L.prototype.addMediaListener=chrome.cast.L.prototype.Nj;chrome.cast.L.prototype.Oj=function(){};chrome.cast.L.prototype.addMediaListenerWithContext=chrome.cast.L.prototype.Oj;chrome.cast.L.prototype.El=function(){};chrome.cast.L.prototype.removeMediaListener=chrome.cast.L.prototype.El;chrome.cast.L.prototype.Fl=function(){};
chrome.cast.L.prototype.removeMediaListenerWithContext=chrome.cast.L.prototype.Fl;chrome.cast.L.prototype.Gl=function(){};chrome.cast.L.prototype.removeMessageListener=chrome.cast.L.prototype.Gl;chrome.cast.L.prototype.Hl=function(){};chrome.cast.L.prototype.removeMessageListenerWithContext=chrome.cast.L.prototype.Hl;chrome.cast.L.prototype.wk=function(a){a.sessionId=this.sessionId};chrome.cast.L.prototype.loadMedia=chrome.cast.L.prototype.wk;chrome.cast.L.prototype.pl=function(a){a.sessionId=this.sessionId};
chrome.cast.L.prototype.queueLoad=chrome.cast.L.prototype.pl;var Sl=function(a,b){if(!b.applications||1!=b.applications.length)return null;var c=b.applications[0];a=Ql(a);a=new chrome.cast.L(c.sessionId,c.appId,c.displayName,c.appImages,a);a.senderApps=c.senderApps;a.namespaces=c.namespaces||[];a.transportId=c.transportId;a.statusText=c.statusText;if(!a.sessionId||!(a.namespaces&&0!=a.namespaces.length||Rl(a)))return null;a.receiver.volume=b.volume;"boolean"==typeof b.isActiveInput&&(a.receiver.isActiveInput=b.isActiveInput);return a},Tl=function(a){var b=
[];if(!a)return b;a&1&&b.push(chrome.cast.Rb.VIDEO_OUT);a&2&&b.push(chrome.cast.Rb.VIDEO_IN);a&4&&b.push(chrome.cast.Rb.AUDIO_OUT);a&8&&b.push(chrome.cast.Rb.AUDIO_IN);a&32&&b.push(chrome.cast.Rb.MULTIZONE_GROUP);return b},Ql=function(a){return new chrome.cast.Le(a.getId(),a.b.friendlyName,Tl(a.a))},Ul=function(a,b){if(a.statusText!=b.statusText)return!0;var c=a.namespaces||[],d=b.namespaces||[];if(c.length!=d.length)return!0;for(var e={index:0};e.index<c.length;e={index:e.index},e.index++)if(!d.some(function(a){return function(b){return b.name==
c[a.index].name}}(e)))return!0;return a.receiver.volume.level!==b.receiver.volume.level||a.receiver.volume.muted!==b.receiver.volume.muted?!0:!1},Vl=function(a){ta(a)?a.forEach(Vl):ya(a)&&Object.keys(a).forEach(function(b){null===a[b]?delete a[b]:(ya(a[b])||ta(a[b]))&&Vl(a[b])})},Wl=function(a){return a.namespaces.some(function(a){return a.name==Rj})},Xl=["MultizoneLeader","MultizoneFollower"],Rl=function(a){return null!==a&&"MultizoneLeader"==a.appId},Yl=function(a){return"E8C28D3C"==a||"00000000-0000-0000-0000-000000000000"==
a};var Zl=function(a){this.b=a;this.l=v("mr.cast.SessionLauncher")},$l=function(a,b,c){ai("MediaRouter.Cast.Session.Type",0,yk);return Bl(a.b,b,c).then(a.a.bind(a,c),function(a){a&&Cl==a?Hk(1):Hk(0);throw a;})};Zl.prototype.a=function(a,b){z(this.l,"Got launch result from "+a.getId());if("LAUNCH_ERROR"==b.type)throw Hk(2),Error(b.reason);a=Sl(a,b.status);x(this.l,"Launched session: "+a.sessionId);return a};var am=function(a,b,c){this.type=a;this.message=b;this.sequenceNumber=k(c)?c:-1;this.timeoutMillis=0;this.clientId=""};var bm=function(a,b){this.h=a;this.a=b;this.f=[];this.b=new tl},dm=function(a,b){return(a=cm(a.a,b))?a.routeId:null};bm.prototype.listen=function(a,b){this.f[a]=b};var fm=function(a,b,c,d){z(em,"Sending to "+c);z(em,JSON.stringify(d));d.clientId=c;a=a.h;a.b.Kb(a,b,d)},gm=function(a,b,c){var d=cm(a.a,b);d&&d.a?fm(a,d.routeId,b,c):a.connect(b).then(function(d){d?(d=dm(a,b))?fm(a,d,b,c):w(em,"No route for "+b):w(em,"No connected client "+b)},null)};
bm.prototype.connect=function(a){var b=cm(this.a,a);if(null!=b&&b.a)return Promise.resolve(!0);b=dm(this,a);if(!b)return w(em,"No route for client "+a),Promise.resolve(!1);if(a=this.b.a.get(b,null))return a.ra.a;a=new Nc;ul(this.b,new hm(b,a));return a.a};var em=v("mr.cast.ApiMessenger"),hm=function(a,b){sl.call(this,a,3E4);this.ra=b};ka(hm,sl);hm.prototype.a=function(){this.ra.resolve(!1)};var im=function(a,b){this.mb=this.g=this.b="";this.za=null;this.f=this.a="";this.h=!1;var c;a instanceof im?(this.h=k(b)?b:a.h,jm(this,a.b),this.g=a.g,km(this,a.mb),lm(this,a.ua()),mm(this,a.a),nm(this,a.j.clone()),om(this,a.f)):a&&(c=String(a).match(Pc))?(this.h=!!b,jm(this,c[1]||"",!0),this.g=pm(c[2]||""),km(this,c[3]||"",!0),lm(this,c[4]),mm(this,c[5]||"",!0),nm(this,c[6]||"",!0),om(this,c[7]||"",!0)):(this.h=!!b,this.j=new qm(null,0,this.h))};
im.prototype.toString=function(){var a=[],b=this.b;b&&a.push(rm(b,sm,!0),":");var c=this.mb;if(c||"file"==b)a.push("//"),(b=this.g)&&a.push(rm(b,sm,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.ua(),null!=c&&a.push(":",String(c));if(c=this.a)this.mb&&"/"!=c.charAt(0)&&a.push("/"),a.push(rm(c,"/"==c.charAt(0)?tm:um,!0));(c=this.j.toString())&&a.push("?",c);(c=this.f)&&a.push("#",rm(c,vm));return a.join("")};
im.prototype.resolve=function(a){var b=this.clone(),c=!!a.b;c?jm(b,a.b):c=!!a.g;c?b.g=a.g:c=!!a.mb;c?km(b,a.mb):c=null!=a.za;var d=a.a;if(c)lm(b,a.ua());else if(c=!!a.a){if("/"!=d.charAt(0))if(this.mb&&!this.a)d="/"+d;else{var e=b.a.lastIndexOf("/");-1!=e&&(d=b.a.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){for(var d=ab(e,"/"),e=e.split("/"),f=[],g=0;g<e.length;){var m=e[g++];"."==m?d&&g==e.length&&f.push(""):".."==m?((1<f.length||1==f.length&&""!=
f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(m),d=!0)}d=f.join("/")}else d=e}c?mm(b,d):c=""!==a.j.toString();c?nm(b,a.j.clone()):c=!!a.f;c&&om(b,a.f);return b};im.prototype.clone=function(){return new im(this)};var jm=function(a,b,c){a.b=c?pm(b,!0):b;a.b&&(a.b=a.b.replace(/:$/,""))},km=function(a,b,c){a.mb=c?pm(b,!0):b};im.prototype.ua=function(){return this.za};
var lm=function(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.za=b}else a.za=null},mm=function(a,b,c){a.a=c?pm(b,!0):b},nm=function(a,b,c){b instanceof qm?(a.j=b,wm(a.j,a.h)):(c||(b=rm(b,xm)),a.j=new qm(b,0,a.h))},om=function(a,b,c){a.f=c?pm(b):b},pm=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""},rm=function(a,b,c){return va(a)?(a=encodeURI(a).replace(b,ym),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},ym=function(a){a=
a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},sm=/[#\/\?@]/g,um=/[\#\?:]/g,tm=/[\#\?]/g,xm=/[\#\?@]/g,vm=/#/g,qm=function(a,b,c){this.b=this.a=null;this.f=a||null;this.h=!!c},zm=function(a){a.a||(a.a=new C,a.b=0,a.f&&Qc(a.f,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))},Bm=function(a){var b=Ee(a);if("undefined"==typeof b)throw Error("Keys are undefined");var c=new qm(null,0,void 0);a=De(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];ta(f)?Am(c,e,f):c.add(e,
f)}return c};h=qm.prototype;h.Y=function(){zm(this);return this.b};h.add=function(a,b){zm(this);this.f=null;a=Cm(this,a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.b+=1;return this};h.remove=function(a){zm(this);a=Cm(this,a);return this.a.Oa(a)?(this.f=null,this.b-=this.a.get(a).length,this.a.remove(a)):!1};h.clear=function(){this.a=this.f=null;this.b=0};h.Ra=function(){zm(this);return 0==this.b};h.Oa=function(a){zm(this);a=Cm(this,a);return this.a.Oa(a)};
h.Ac=function(a){var b=this.P();return Kb(b,a)};h.Ea=function(){zm(this);for(var a=this.a.P(),b=this.a.Ea(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};h.P=function(a){zm(this);var b=[];if(va(a))this.Oa(a)&&(b=Ub(b,this.a.get(Cm(this,a))));else{a=this.a.P();for(var c=0;c<a.length;c++)b=Ub(b,a[c])}return b};h.set=function(a,b){zm(this);this.f=null;a=Cm(this,a);this.Oa(a)&&(this.b-=this.a.get(a).length);this.a.set(a,[b]);this.b+=1;return this};
h.get=function(a,b){a=a?this.P(a):[];return 0<a.length?String(a[0]):b};var Am=function(a,b,c){a.remove(b);0<c.length&&(a.f=null,a.a.set(Cm(a,b),u(c)),a.b+=c.length)};qm.prototype.toString=function(){if(this.f)return this.f;if(!this.a)return"";for(var a=[],b=this.a.Ea(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.P(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.f=a.join("&")};
qm.prototype.clone=function(){var a=new qm;a.f=this.f;this.a&&(a.a=this.a.clone(),a.b=this.b);return a};var Cm=function(a,b){b=String(b);a.h&&(b=b.toLowerCase());return b},wm=function(a,b){b&&!a.h&&(zm(a),a.f=null,a.a.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(this.remove(b),Am(this,c,a))},a));a.h=b};qm.prototype.extend=function(a){for(var b=0;b<arguments.length;b++)Ge(arguments[b],function(a,b){this.add(b,a)},this)};var Dm=function(a,b,c,d,e,f,g,m,q,y){this.g=a;this.a=b||null;this.b=c||null;this.f=d||null;this.h=k(e)?e:null;this.v=f||null;this.o=g||null;this.w=m||!1;this.m=q||null;this.j=y||null},Em=function(a,b){return(a=a.match(b+"=([^/]*)"))?a[1]:null},Gm=function(a){a=a.match(/__castAppId__=([^/]*)/g);return null==a?[]:Cb(Db(a,function(a){a=Em(a,"__castAppId__");if(!a)return null;a=a.match(Fm);if(!a||0==a.length)return null;var b=[];3==a.length&&a[2]&&(b=a[2].split(","));return{appId:a[1],capabilities:b}}),
function(a){return null!=a})},Hm=function(a){return Em(a,"__castClientId__")},Im=function(a){return Db(a.g,function(a){return a.appId})},Jm=function(a){return a.b?a.b:chrome.cast.Fb.TAB_AND_ORIGIN_SCOPED};
Dm.prototype.toString=function(){var a=new im;jm(a,"https");km(a,"google.com");mm(a,"/cast");var b=[];t(this.g,function(a){var c="__castAppId__="+a.appId;a.capabilities&&0<a.capabilities.length&&(c=c+"("+a.capabilities.join(","),c+=")");b.push(c)});this.a&&b.push("__castClientId__="+this.a);this.b&&b.push("__castAutoJoinPolicy__="+this.b);this.f&&b.push("__castDefaultActionPolicy__="+this.f);null!=this.h&&b.push("__castLaunchTimeout__="+this.h);this.v&&b.push("__dialAppName__="+this.v);this.o&&b.push("__dialPostData__="+
this.o);this.w&&b.push("__castInvisibleSender__=true");this.m&&(b.push("__castBroadcastNamespace__="+this.m),b.push("__castBroadcastId__="+Math.random()));this.j&&b.push("__castBroadcastMessage__="+encodeURIComponent(JSON.stringify(this.j)));om(a,b.join("/"));return a.toString()};
var Lm=function(a,b){a=Im(a);var c=Km(b);return Fb(a,function(a){return Kb(c,a)})},Mm=function(a){a=new im(a);if("https"!=a.b||"google.com"!=a.mb||"/cast"!=a.a)return null;var b=a.f;a=Gm(b);if(!a||0==a.length)return null;var c=Hm(b),d=Em(b,"__castAutoJoinPolicy__"),e=Em(b,"__castDefaultActionPolicy__"),f;f=Em(b,"__castLaunchTimeout__");null==f?f=null:(f=Number(f),f=!isNaN(f)&&0<=f?f:null);var g=Em(b,"__dialAppName__"),m=Em(b,"__dialPostData__"),q=Em(b,"__castInvisibleSender__"),q=null===q?null:"true"==
q,y=Em(b,"__castBroadcastNamespace__"),b=(b=Em(b,"__castBroadcastMessage__"))?JSON.parse(decodeURIComponent(b)):null;return new Dm(a,c,d,e,f,g,m,q,y,b)},Km=function(a){return(a=Mm(a))?Im(a):null},Nm=function(a){return(a=Mm(a))?a.a:null},Fm=/(^\w+)(?:\(([\w,\ ]*)\))?$/;var Om=function(a,b,c,d,e,f){this.f=a;this.m=b;this.g=c;this.a=d;this.j=e;this.h=f;this.b=new bm(f,c);this.u=new Nl(this.f);this.A=new Zl(this.f)};Om.prototype.init=function(){this.g.init();this.b.listen("v2_message",this.o.bind(this));this.b.listen("app_message",this.w.bind(this));this.b.listen("leave_session",this.v.bind(this))};
var Rm=function(a,b,c,d){Pm(a.a,b).slice().forEach(function(b){b!=d&&Qm(a,b,c)})},Qm=function(a,b,c){c.clientId=b;gm(a.b,b,c)},Sm=function(a,b,c,d){c={receiver:Ql(c),action:d};Qm(a,b,new am("receiver_action",c))};
Om.prototype.o=function(a){var b=a.message,c=b.sessionId;if(c){var d=Tm(this.a,c);if(d)if(c=Um(this.a,c))if(c=this.m.b(c))switch(b.type){case "STOP":Vm(this,a,c);break;case "LOAD":case "PAUSE":case "PLAY":case "SEEK":case "STOP_MEDIA":case "MEDIA_SET_VOLUME":case "MEDIA_GET_STATUS":case "EDIT_TRACKS_INFO":case "QUEUE_LOAD":case "QUEUE_INSERT":case "QUEUE_UPDATE":case "QUEUE_REMOVE":case "QUEUE_REORDER":case "PRECACHE":Wm(this,a,c,d);break;case "SET_VOLUME":Xm(this,a,c);break;default:w(Ym,"Unknown request")}else Zm(this,
a,chrome.cast.Hb.INVALID_PARAMETER,"No receiver");else Zm(this,a,chrome.cast.Hb.INVALID_PARAMETER,"No sink ID");else Zm(this,a,chrome.cast.Hb.INVALID_PARAMETER,"Unknown session ID")}else Zm(this,a,chrome.cast.Hb.INVALID_PARAMETER,"No session ID")};
var Zm=function(a,b,c,d){c=new chrome.cast.Error(c,d);$m(a,b,c)},$m=function(a,b,c){gm(a.b,b.clientId,new am("error",c,b.sequenceNumber))},Vm=function(a,b,c){var d=b.message;$h("MediaRouter.Cast.Session.End");var e=d.sessionId,f=an(a.a,e);f&&(f.h=!0);f=function(){bn(a,e,b)};a.f.sendRequest(d,c,Pj,b.timeoutMillis,b.clientId).then(f,f)},Wm=function(a,b,c,d){var e=b.message,f=e.type;f in nl&&(e.type=nl[f]);a.f.sendRequest(e,c,Rj,b.timeoutMillis,b.clientId,d.transportId).then(function(c){var e=d.sessionId;
c.sessionId=e;cn(a.a,e,dn(c.status,e));gm(a.b,b.clientId,new am("v2_message",c,b.sequenceNumber))},function(c){$m(a,b,c)})},Xm=function(a,b,c){var d=b.message;delete d.sessionId;a.f.sendRequest(d,c,Pj,b.timeoutMillis,b.clientId).then(function(){gm(a.b,b.clientId,new am("v2_message",null,b.sequenceNumber))},function(c){$m(a,b,c)})};
Om.prototype.w=function(a){var b=this,c=a.message,d=c.sessionId;if(d){var e=Um(this.a,d);e?(e=this.m.b(e))?(d=Tm(this.a,d),Ib(d.namespaces,function(a){return a.name==c.namespaceName})?zl(this.j,e,c.namespaceName,c.message,a.clientId,d.transportId).then(function(){gm(b.b,a.clientId,new am("app_message",null,a.sequenceNumber))},function(){Zm(b,a,chrome.cast.Hb.CHANNEL_ERROR,"Channel to receiver not available")}):Zm(this,a,chrome.cast.Hb.INVALID_PARAMETER,"Invalid namespace")):w(Ym,"No receiver from sinkId"):
w(Ym,"No sinkId from sessionId")}else w(Ym,"No sessionId")};
Om.prototype.v=function(a){var b=this;x(Ym,"Leave session");var c=an(this.a,a.message);if(c){var d=a.clientId,e=cm(this.g,d);if(e){var f=[],g=[],m=e.tabId,q=e.origin,y=e.autoJoinPolicy;c.b.forEach(function(a){var c=cm(b.g,a);y==chrome.cast.Fb.TAB_AND_ORIGIN_SCOPED&&m==c.tabId&&q==c.origin||y==chrome.cast.Fb.ORIGIN_SCOPED&&q==c.origin?(c.b=!0,f.push(a)):g.push(a)});gm(this.b,d,new am("leave_session",null,a.sequenceNumber));f.forEach(function(a){(a=cm(b.g,a))&&en(b.h,a.routeId,!0,!0)});c.b=g}else w(Ym,
"No client record")}else w(Ym,"No session")};
var fn=function(a,b,c){Wl(b)&&a.f.sendRequest(new ol,c,Rj,void 0,void 0,b.transportId).catch(pa)},cl=function(a,b,c){var d=b.getId();x(Ym,"Query status for "+d);Ol(a.u,b).then(function(e){gn(a,d,e);c&&(e=hn(a.a,d))&&fn(a,e,b)},pa)},jn=function(a,b){if("*"==b.destinationId)return!0;b=b.destinationId;if(b==a.j.j||null!=cm(a.g,b))return!0;x(Ym,"Invalid destination "+b);return!1},on=function(a,b,c){z(Ym,function(){return"Cast message: "+JSON.stringify(c)});if(jn(a,c))if(c.namespace_==Qj||c.namespace_==
Sj)(b=kn(a.a,b))&&b.a.forEach(function(b){var d=a.h,e=d.f.get(b);e&&e.Bc&&d.b.qe(d,b,c)});else{var d=JSON.parse(c.data),e=ln(a,d),e=e?e.sourceId:void 0;switch(d.type){case "RECEIVER_STATUS":gn(a,b,d);break;case "MEDIA_STATUS":mn(a,b,c,e)}}else nn(a.j,b,c.destinationId,c.sourceId,!1)},ln=function(a,b){a=vl(a.f.a,b.requestId);if(!a)return null;var c=a.ra;switch(b.type){case "LAUNCH_ERROR":case "INVALID_REQUEST":case "LOAD_CANCELLED":case "LOAD_FAILED":case "INVALID_PLAYER_STATE":delete b.requestId;
b=new chrome.cast.Error(chrome.cast.Hb.SESSION_ERROR,b.reason||b.type,b);c.b(b);break;default:c.resolve(b)}return a},pn=function(a,b,c){z(Ym,function(){return"App message: "+JSON.stringify(c)});if(b=hn(a.a,b)){var d;"*"==c.destinationId?d=Pm(a.a,b.sessionId):d=[c.destinationId];var e=new Ml(b.sessionId,c.namespace_,c.data);d.forEach(function(b){gm(a.b,b,new am("app_message",e))})}else w(Ym,"No session for incoming app message")},dn=function(a,b){a.forEach(function(a){a.sessionId=b;var c=a.supportedMediaCommands,
e=[];c&1&&e.push(chrome.cast.media.dd.PAUSE);c&2&&e.push(chrome.cast.media.dd.SEEK);c&4&&e.push(chrome.cast.media.dd.STREAM_VOLUME);c&8&&e.push(chrome.cast.media.dd.STREAM_MUTE);a.supportedMediaCommands=e});return a},qn=function(a,b){if(b=hn(a.a,b)){b=b.sessionId;var c=an(a.a,b);c&&c.h||bn(a,b)}},bn=function(a,b,c){c&&Qm(a,c.clientId,c);(c=an(a.a,b))&&c.a.slice().forEach(function(b){en(a.h,b,!0)});rn(a.a,b)},gn=function(a,b,c){z(Ym,"Receiver status for "+b);var d=c.status;if(d)if(c=a.m.b(b)){var d=
Sl(c,d),e=kn(a.a,b);e?d?d.sessionId==e.session.sessionId?(b=e.session,Ul(b,d)&&(z(Ym,"Updating session "+d.sessionId),b.statusText=d.statusText,b.namespaces=d.namespaces,b.receiver.volume=d.receiver.volume,sn(a.h,e),Rm(a,b.sessionId,new am("update_session",b)))):(qn(a,b),Ek(1),tn(a.h,null,c,null,d)):(qn(a,b),Ek(1)):d&&tn(a.h,null,c,null,d)}else $h("MediaRouter.Cast.Error.Sink.Missing.From.Discovery.Service"),w(Ym,"Got message from receiver "+b+", but sink is no longer available.")},mn=function(a,
b,c,d){if(b=hn(a.a,b))if(c=JSON.parse(c.data))b=b.sessionId,c.sessionId=b,cn(a.a,b,dn(c.status,b)),Rm(a,c.sessionId,new am("v2_message",c),d)},un=function(a,b){var c=Tl(b.a);return(b=Ib(a.g,function(a){return Gb(a.capabilities,function(a){return Kb(c,a)})}))?b.appId:Im(a)[0]},vn=function(a,b,c){var d=Mm(b);if(!d)return Promise.reject(Error("Invalid source "+b));b=un(d,c);var e=new Rh("MediaRouter.Cast.Session.Launch");return $l(a.A,new chrome.cast.og(b,void 0,null==d.h?chrome.cast.timeout.requestSession:
d.h),c).then(function(a){e.a("Success");return a},function(a){e.a("Failure");throw a;})},Ym=v("mr.cast.ApiHandler");var wn=v("mr.RuntimeErrorUtils"),xn=function(){chrome.runtime.lastError&&z(wn,chrome.runtime.lastError.message||"unknown runtime error")};var yn=function(){this.b=new C;this.f=new C;this.a=new C},Dn=function(a,b,c){c=void 0===c?!1:c;var d=b.getId(),e=b.Da()+":"+b.ua(),f=a.b.get(d);if(f){if(a.a.get(d)==e)return z(zn,"Using pending creation to "+d),f;x(zn,"Device "+d+" IP changed from "+a.a.get(b.getId())+" to "+e);An(a,b)}b=Bn(a,b,c?15E3:1E4).then(function(b){Cn(a,d);Fk(1);return b},function(b){e==a.a.get(d)&&Cn(a,d);Fk(0);return Promise.reject(b)});a.b.set(d,b);a.a.set(d,e);return b},An=function(a,b){b=b.getId();z(zn,"Aborting connection to device "+
b);var c=a.f.get(b);c&&c.abort();Cn(a,b)},Cn=function(a,b){a.b.remove(b);a.f.remove(b);a.a.remove(b)},Bn=function(a,b,c){var d=new dg(function(){return En(b,c)},1E3,3);a.f.set(b.getId(),d);return fg(d,1.5).start().then(null,function(a){x(zn,"Failed to create channel to "+b.getId());return Promise.reject(a)})},En=function(a,b){var c=Fn++;x(zn,"Connecting to (id "+c+") "+a.getId());var d=new Rh("MediaRouter.Cast.Mdns.Channel.Open");return Gn(a,b).then(function(a){x(zn,function(){return"Channel opened (id "+
c+"): "+JSON.stringify(a)});d.a("Success");return a},function(a){x(zn,"Channel did not open (id "+c+").");d.a("Failure");return Promise.reject(a)})},Gn=function(a,b){var c={ipAddress:a.Da(),port:a.ua(),auth:"ssl_verified",timeout:1E4,livenessTimeout:b,pingInterval:5E3,capabilities:0};x(zn,function(){return"Opening channel to "+JSON.stringify(c)});var d=new Nc;chrome.cast.channel.open(c,function(a){xn();"open"==a.readyState?d.resolve(a):(chrome.cast.channel.close(a,function(){chrome.runtime.lastError||
z(zn,"Channel close success")}),d.b(Error(a.errorState)))});return d.a},zn=v("mr.cast.ChannelFactory"),Fn=0;var Hn=function(a,b,c,d){return{namespace_:a,data:va(b)?b:JSON.stringify(b),sourceId:c,destinationId:d}};var In=function(a){this.type="CLOSE";this.reasonCode=a};var Jn=function(a){return(a=a.exec(ub))?a[1]:""},Kn=function(){if(Aj)return Jn(/Firefox\/([0-9.]+)/);if(ic||jc||hc)return Bc;if(Ej)return fc()||xb("iPad")||xb("iPod")?Jn(/CriOS\/([0-9.]+)/):Jn(/Chrome\/([0-9.]+)/);if(Fj&&!(fc()||xb("iPad")||xb("iPod")))return Jn(/Version\/([0-9.]+)/);if(Bj||Cj){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(ub);if(a)return a[1]+"."+a[2]}else if(Dj)return(a=Jn(/Android\s+([0-9.]+)/))?a:Jn(/Version\/([0-9.]+)/);return""}();var Mn=function(a){this.type="CONNECT";this.origin={};this.userAgent=ub;var b=this.userAgent.indexOf("(")+1,b=this.userAgent.substr(b,this.userAgent.indexOf(")",b)-1-b+1);this.senderInfo={sdkType:2,version:chrome.runtime.getManifest().version,browserVersion:Kn,platform:Ln(),systemVersion:b,connectionType:1};this.connType=a?0:2},Ln=function(){switch(Jh()){case "ChromeOS":return 5;case "Windows":return 3;case "Mac":return 4;case "Linux":return 6}return 0};var Nn=function(){this.a=new C};Nn.prototype.init=function(){rj(this)};var On=function(a,b,c,d,e){if(!a.a.Oa([b.channelId,c,d].join("#"))){var f=Hn(Oj,new Mn(e),c,d);chrome.cast.channel.send(b,f,xn);a.a.set([b.channelId,c,d].join("#"),e)}},Pn=function(a,b){a.a.Ea().forEach(function(c){c.split("#")[0]==b.channelId.toString()&&a.a.remove(c)})},Qn=function(a,b,c){a.a.forEach(function(d,e){var f=e.split("#");f[0]==b.channelId.toString()&&(On(a,c,f[1],f[2],d),a.a.remove(e))})};Nn.prototype.fa=function(){return"cast.VirtualConnectionManager"};
Nn.prototype.qa=function(){var a=Ue(this.a);return[new Rn(a)]};Nn.prototype.va=function(){var a=oj(this);if(a)for(var b in a.a)this.a.set(b,a.a[b])};qa(Nn);var Rn=function(a){this.a=a};var Sn=function(a,b){this.h=b;this.j=a;this.b=new C;this.a=new C;this.f=Nn.U();this.m=new yn;this.g=null};Sn.prototype.init=function(){chrome.cast.channel.onMessage.addListener(this.v.bind(this));chrome.cast.channel.onError.addListener(this.w.bind(this));this.f.init();rj(this)};
var zl=function(a,b,c,d,e,f){var g=e||a.j,m=f||"receiver-0";return el(a,b).then(function(b){return Tn(a,b,c,d,g,m)})},Un=function(a,b,c,d,e){el(a,b).then(function(b){return On(a.f,b,c,d,e)})},nn=function(a,b,c,d,e){if(b=a.b.get(b))a=a.f,a.a.Oa([b.channelId,c,d].join("#"))&&(a.a.remove([b.channelId,c,d].join("#")),c=Hn(Oj,new In(e?5:0),c,d),chrome.cast.channel.send(b,c,xn))};
Sn.prototype.v=function(a,b){ni(2);var c=this.a.get(a.channelId);if(c){var d=this.g(c);if(d){if(Uj.hasOwnProperty(b.namespace_)){c=JSON.parse(b.data);if("CLOSE"==c.type){this.f.a.remove([a.channelId,b.destinationId,b.sourceId].join("#"));return}x(Vn,"Got message "+(c.type||c.responseType)+" from "+d.getId())}else x(Vn,"Got message in "+b.namespace_+" from "+d.getId());a=this.h;c=a.B;if(Hl(c)&&Uj.hasOwnProperty(b.namespace_)){var e=d.Da();if(e){var f=JSON.parse(b.data);if("RECEIVER_STATUS"===f.type){var g=
f.status&&f.status.applications&&f.status.applications[0],m=f=null;g&&(g.appId&&(f=g.appId),g.sessionId&&(m=g.sessionId));g=c.b.get(e);c.b.set(e,new El(e,f,m));g&&g.appId===f||Il(c)}}}a=a.g;d=d.getId();Uj.hasOwnProperty(b.namespace_)?on(a,d,b):pn(a,d,b)}else w(Vn,"Receiver "+c+" not found.")}else w(Vn,"This message is from unknown receiver.")};
var Wn=function(a,b){chrome.cast.channel.close(b,function(){chrome.runtime.lastError||z(Vn,"Channel close success")});var c=a.a.get(b.channelId);c&&(a.a.remove(b.channelId),a.b.remove(c))};Sn.prototype.w=function(a,b){ni(1);w(Vn,function(){return"Channel error: "+JSON.stringify(a)+(b?", "+JSON.stringify(b):"")});b&&Xn(b);Yn(this,a)};
var Xn=function(a){var b;switch(a.errorState){case "unknown":b=0;break;case "authentication_error":b=1;break;case "connect_error":b=2;break;case "connect_timeout":b=6;break;case "ping_timeout":b=7;break;default:return}if(-8192<=a.nssErrorCode&&-7192>a.nssErrorCode||2==a.challengeReplyErrorType||8==a.challengeReplyErrorType||9==a.challengeReplyErrorType||11==a.challengeReplyErrorType||-200>=a.netReturnValue&&-300<a.netReturnValue||30==a.eventType||31==a.eventType||32==a.eventType)b=3;if(26==a.eventType||
-201==a.netReturnValue||-8181==a.nssErrorCode||-8162==a.nssErrorCode||-8161==a.nssErrorCode)b=4;-138==a.netReturnValue&&(b=5);if(-8182==a.nssErrorCode||10==a.eventType||12==a.eventType)b=1;w(Vn,"Channel error code: "+b);ai("MediaRouter.Cast.Channel.Error",b,Ck)},Yn=function(a,b){var c=a.a.get(b.channelId);Wn(a,b);if(c){var d=a.g(c);d&&el(a,d,!0).then(function(c){x(Vn,"Re-connected to receiver: "+d.getId());Qn(a.f,b,c);cl(a.h.g,d,!0)},function(){x(Vn,"Failed to re-connect to receiver: "+d.getId());
Pn(a.f,b);var c=a.h.a,f=d.getId();x(c.l,"Channel error for sink "+f);Zk(c,f);Ek(2)})}},el=function(a,b,c){c=void 0===c?!1:c;var d=b.getId(),e=a.b.get(d);return e&&"open"==e.readyState?Promise.resolve(e):Dn(a.m,b,c).then(function(b){if(a.a.Oa(b.channelId))return b;a.b.get(d)&&(w(Vn,"Duplicate channel to a receiver "+d),Wn(a,a.b.get(d)));x(Vn,"Connected to: "+d);a.b.set(d,b);a.a.set(b.channelId,d);return b},null)},Tn=function(a,b,c,d,e,f){On(a.f,b,e,f,0==f.indexOf("receiver-0"));Vl(d);var g=Hn(c,d,
e,f);x(Vn,"Channel is sending message");z(Vn,function(){return"....message was: "+JSON.stringify(g)});return new Promise(function(c,d){xn();chrome.cast.channel.send(b,g,function(b){b.errorState?(d(Error("Failed to send message")),Yn(a,b)):c(!0)})})};Sn.prototype.fa=function(){return"cast.ChannelService"};Sn.prototype.qa=function(){return[new Zn(Ue(this.b),Ue(this.a))]};Sn.prototype.va=function(){var a=oj(this);a&&(Qe(this.b,a.b),Qe(this.a,a.a))};
var Vn=v("mr.cast.ChannelService"),Zn=function(a,b){this.b=a;this.a=b};var $n=function(){this.requestId=0;this.type="GET_APP_AVAILABILITY";this.appId=[]};var ao=function(a,b){this.h=a;this.b=b;this.f=new mf;this.a=new C};ao.prototype.init=function(){rj(this)};var bo=function(a,b){var c=a.a.get(b);c&&(c.If--,0<c.If||(Ne(a.b.a.Na(!1),function(a){switch(xk(a,b)){case "available":a.eb[b]="available_rescan";break;case "unavailable":a.eb[b]="unavailable_rescan"}}),a.a.remove(b)))};h=ao.prototype;
h.oh=function(a){var b=this;Ne(this.a.Na(!0),function(c){var d;a:{switch(xk(a,c)){case "unknown":case "available_rescan":case "unavailable_rescan":d=!0;break a}d=!1}if(d){var e=a.getId()+":"+c;b.f.contains(e)||(b.f.add(e),d=function(){b.f.remove(e)},fg(new dg(b.Zj.bind(b,a,c),5500,3),2).start().then(b.oi.bind(b,a,c),function(){b.l.error("Failed to get app availability response for "+a.getId()+", appId "+c+" after 3 attempts.");b.oi(a,c,"unknown")}).then(d,d))}})};
h.oi=function(a,b,c){c!=xk(a,b)&&(x(this.l,b+" on "+a.getId()+" is "+c),a.eb[b]=c,al(this.b.h,a))};
h.Zj=function(a,b){var c=this,d=new $n;d.appId=[b];var e=new Rh("MediaRouter.Cast.App.Availability");return this.h.sendRequest(d,a,Pj,5E3).then(function(a){e.a("Success");z(c.l,function(){return"App availability response "+JSON.stringify(a)});for(var b in a.availability){if("APP_AVAILABLE"==a.availability[b])return"available";if("APP_UNAVAILABLE"==a.availability[b])return"unavailable"}return"unknown"},function(d){e.a("Failure");c.l.error("checkAppAvailability_ failed for "+a.getId()+", appId "+b);
throw d;})};h.fa=function(){return"cast.AppDiscoveryService"};h.qa=function(){return[new co(Ue(this.a))]};h.va=function(){var a=oj(this);a&&Qe(this.a,a.a)};h.l=v("mr.cast.AppDiscoveryService");var co=function(a){this.a=a};var eo=function(a,b,c){var d;d=Error.call(this);this.message=d.message;"stack"in d&&(this.stack=d.stack);this.name="RouteRequestError";this.message=b||"";if(c)this.stack=c;else if(Error.captureStackTrace)Error.captureStackTrace(this,eo);else if(b=Error().stack)this.stack=b;this.errorCode=a};ka(eo,Error);var fo=function(a,b){this.sinks=a;this.origins=b||null},go=new fo([]);var ho=function(){return Promise.reject(Error("Not implemented"))};var io=function(a,b,c,d){return Jj(c,"cast",b.getId(),a,d,"",null)};var jo=function(a,b,c,d,e,f){this.routeId=a;this.clientId=b;this.appIds=c;this.autoJoinPolicy=d;this.origin=e;this.tabId=f;this.b=this.a=!1},ko=function(){this.a=[]};ko.prototype.init=function(){rj(this)};ko.prototype.Y=function(){return this.a.length};var cm=function(a,b){return Ib(a.a,function(a){return a.clientId==b})},lo=function(a,b){return Ib(a.a,function(a){return a.routeId==b})},mo=function(a,b){a.a=Cb(a.a,function(a){return a.clientId!=b})};ko.prototype.fa=function(){return"cast.ClientRecords"};
ko.prototype.qa=function(){return[new no(this.a)]};ko.prototype.va=function(){var a=oj(this);a&&(this.a=a.a)};var no=function(a){this.a=a};var oo=function(a){this.a=a},po=function(){var a=[];nk.U().g.forEach(function(b){var c="Receiver-"+b.replace(/\./g,"_"),d=nk.U().f||8009;a.push({serviceName:c+"._googlecast._tcp.local",serviceHostPort:c+":"+d,ipAddress:b,serviceData:["id=mdns:"+c,"ve=02","ca=5","st=1","fn="+c,"md=Chromecast"]})});return a};oo.prototype.init=function(){var a=po(),b=this.a;b.K(a);b.H=a};var qo=chrome.i18n.getMessage("4528089202128275824");chrome.i18n.getMessage("2810417817914017289");chrome.i18n.getMessage("3413021810593924462");chrome.i18n.getMessage("7603034707785674700");chrome.i18n.getMessage("8009014317872238527");chrome.i18n.getMessage("8636962961150071298");chrome.i18n.getMessage("1802762746589457177");var ro=function(a,b){this.b=[];this.a=[];this.sinkId=a;this.session=b;this.g=this.f=null;this.offTheRecord=this.h=!1},so=function(){this.l=v("mr.cast.SessionRecords");this.a=[]};so.prototype.init=function(){rj(this)};
var rn=function(a,b){x(a.l,"Removing session "+b);a.a=Cb(a.a,function(a){return a.session.sessionId!=b})},Pm=function(a,b){return(a=an(a,b))?a.b:[]},hn=function(a,b){return(a=kn(a,b))?a.session:null},to=function(a,b){return Ib(a.a,function(a){return Kb(a.b,b)})},uo=function(a,b){return Ib(a.a,function(a){return Kb(a.a,b)})},vo=function(a,b){return Ib(a.a,function(a){return null!=Ib(a.a,function(a){return Hj(a).a==b})})},kn=function(a,b){return Ib(a.a,function(a){return a.sinkId==b||a.f==b})},an=function(a,
b){return Ib(a.a,function(a){return a.session.sessionId==b})},Um=function(a,b){return(a=an(a,b))?a.sinkId:null},Tm=function(a,b){return(a=an(a,b))?a.session:null},cn=function(a,b,c){var d=Tm(a,b);d&&(a=Cb(c,function(a){return a.playerState!=chrome.cast.media.Ke.IDLE}),a.forEach(function(a){if(!a.media){var b=Ib(d.media,function(b){return b.mediaSessionId==a.mediaSessionId});b&&(a.media=b.media)}}),d.media=a)};so.prototype.fa=function(){return"cast.SessionRecords"};so.prototype.qa=function(){return[new wo(this.a)]};
so.prototype.va=function(){var a=oj(this);if(a)for(var b=0;b<a.a.length;b++){var c=a.a[b],d=new ro(c.sinkId,c.session);d.b=c.b;d.a=c.a;d.h=c.h;d.g=c.g;d.f=c.f;this.a.push(d)}};var wo=function(a){this.a=a};var xo=function(a){this.v="sender-"+ob();this.f=new C;this.m=null;rj(this);this.b=a;this.j=new ko;this.h=new so;this.w=new Sn(this.v,this);this.a=new Pk(this.w,this);this.F=new oo(this.a);this.u=new wl(this.w,this.v);this.A=new ao(this.u,this.a);this.g=new Om(this.u,this.a,this.j,this.h,this.w,this);this.B=new Gl(this.a,this.u);this.H=this.a.start.bind(this.a);this.o=new Map};h=xo.prototype;h.getName=function(){return"cast"};
h.Ga=function(){this.u.init();this.h.init();this.g.init();this.w.init();this.a.init();this.F.init();this.A.init();this.b.Hf(this.H)};h.hc=function(){var a=this.f.P(),b=[].concat(la(this.o.values())).map(function(a){return a.Jf.Jb()});return a.concat(b)};h.ld=function(a){var b=this;if(null!=yo(a))return new fo([]);var c=new mf;zo(a).forEach(function(a){gl(b.a,a).map(function(a){return a.b}).forEach(function(a){c.add(a)})});return new fo(c.P(),-1!=a.indexOf("0F5096E8")?si:null)};
h.startObservingMediaSinks=function(a){var b=this,c=yo(a);c?(x(this.l,"Received broadcast request "+a),Ne(this.a.a.Na(!1),function(a){b.u.sendMessage(c,a,Tj).catch(function(a){b.l.error("Broadcast failed "+a.message)})})):(zo(a).forEach(function(a){var c=b.A,d=c.a.get(a);d?d.If++:c.a.set(a,{If:1});x(c.l,"Scanning sinks for app availability");Ne(c.b.a.Na(!1),c.oh,c)}),this.b.lf()&&this.a.start())};h.stopObservingMediaSinks=function(a){var b=this;null!=yo(a)||zo(a).forEach(function(a){bo(b.A,a)})};
h.startObservingMediaRoutes=function(){};h.stopObservingMediaRoutes=function(){};h.vd=function(a){return(a=this.a.b(a))?a.b:null};
var Ao=function(a,b,c){a.l.error("Error launching.",c);en(a,b.id,!1,!0,"error");c=new zh(qo,"warning","dismiss");c.routeId=b.id;a.b.Pc().send(c)},Fo=function(a,b,c,d,e,f,g,m){nk.U().b=new mk(c.hb,c.Da());var q=io(b,c,d,!0);q.forDisplay=!1;q.offTheRecord=e;a.f.set(q.id,q);a.b.kc(a,q);Bo(a);(e=Mm(b))&&e.a&&Co(a,e,q.id,g,m);qi(b)||ri(b)?(q.pb={tabId:m,sessionId:"",Pf:c.Da()||"",ji:c.hb||""},ri(b)&&(q.isOffscreenPresentation=!0),a.b.mf(a,q,d,function(e){return Fh(Do(a,b,c,d,f,g,m,e))}).a.then(function(){Eo(a,
q)},function(b){Ao(a,q,b)})):Do(a,b,c,d,f,g,m,q).then(null,function(b){Ao(a,q,b)});return Promise.resolve(q)},Do=function(a,b,c,d,e,f,g,m){return vn(a.g,Go(b,c,e),c).then(function(e){tn(a,b,c,d,e,f,g,m);return m})};
xo.prototype.createRoute=function(a,b,c,d,e,f,g){var m=this,q=this.a.b(b);if(!q)return Eh(Error("No sink with ID "+b));var y=Hm(a);if(y){setTimeout(function(){Sm(m.g,y,q,chrome.cast.ed.CAST)},0);var D=function(){return Fo(m,a,q,c,d,e,f,g)},V=cm(this.j,y);if(V)return Fh(this.terminateRoute(V.routeId).then(D,D));if(f&&g&&(b=Ho(this,a,f,g,d,e,b)))return b}return Fh(Fo(this,a,q,c,d,e,f,g))};
var en=function(a,b,c,d,e){d=void 0===d?!1:d;e=void 0===e?"closed":e;x(a.l,"Remove route "+b);var f=lo(a.j,b);if(f){c=c||f.b;var g=f.clientId;x(a.l,"Remove client "+g);for(var m=a.h,q=0;q<m.a.length;q++)Rb(m.a[q].b,g);mo(a.j,g)}if(g=uo(a.h,b))Rb(g.a,b),Io(a,g.a);if(m=a.f.get(b))if(m.Bc&&g&&(nn(a.w,m.sinkId,f?f.clientId:a.v,g.session.transportId,c),m.forDisplay&&f&&(a.m={zc:f,ai:g})),a.f.remove(b),a.b.Qc(a,m),Bo(a),d)a.b.onPresentationConnectionClosed(b,e,"Remove route");else a.b.onPresentationConnectionStateChanged(b,
"terminated")},sn=function(a,b){b.a.forEach(function(c){if(c=a.f.get(c)){var d=b.session;c.pb&&c.forDisplay?Eo(a,c):(c.description=d.statusText||d.displayName,a.b.Wb(a,c))}})},Jo=function(a,b){Fb(b,function(b){b=a.f.get(b,null);if(!b||!b.mediaSource)return!1;var c=Mm(b.mediaSource),c=c?c.w:!1;return b.isLocal&&!c})&&t(b,function(b){if(b=a.f.get(b,null))b.isLocal=!0})},Io=function(a,b){var c=[],d=[],e=null;b.forEach(function(b){if(b=a.f.get(b)){b.forDisplay=!1;var f=Mm(b.mediaSource);f&&Ib(Im(f),Yl)||
(b.Bc?(f=f?Jm(f):null,e||f==chrome.cast.Fb.CUSTOM_CONTROLLER_SCOPED||(c.push(b),e=b.sinkId)):e&&e!=b.sinkId?c.push(b):d.push(b))}});t(0<c.length?c:d,function(a){a.forDisplay=!0})},Co=function(a,b,c,d,e){var f=b.a;if(f&&!cm(a.j,f)){x(a.l,"Add client "+f);var g=Im(b);a.j.a.push(new jo(c,f,g,Jm(b),d||null,k(e)?e:null))}},Eo=function(a,b){if(a=uo(a.h,b.id))a=a.session,a.statusText=b.description||a.statusText},tn=function(a,b,c,d,e,f,g,m){var q=kn(a.h,c.getId());if(!q){var y=a.h,q=c.getId();x(y.l,"Adding new session: "+
q+", "+e.sessionId);var D=an(y,e.sessionId);D?(Rl(e)?(D.g=e,D.f=q):Rl(D.session)&&(D.g=D.session,D.f=D.sinkId,D.session=e,D.sinkId=q),q=D):(q=new ro(q,e),y.a.push(q))}var V=null!=b;if(!V&&Yl(e.appId))return null;null==b?(D=new Dm([{appId:e.appId,capabilities:e.capabilities}]),b=D.toString()):D=Mm(b);if(y=m){if(!a.f.get(y.id))return w(a.l,"Route "+y.id+" not added"),y}else y=io(b,c,d||e.sessionId,V),a.f.set(y.id,y);d=y.id;x(a.l,"Add route "+d);b=null;D&&(b=D.a,Co(a,D,d,f,g));Kb(q.a,d)||q.a.push(d);
y.Bc&&Un(a.w,c,b||a.v,e.transportId,!(D&&D.w));q.offTheRecord=y.offTheRecord;f=q.a;Jo(a,f);Io(a,f);f=y;g=e.sessionId;d=e.appId;("0F5096E8"==d||"85CDB22F"==d)&&g&&f.pb&&(f.pb.sessionId=g);!Wl(e)||null!==e&&Kb(Xl,e.appId)||(f.customControllerPath="cast_route_details.html?"+["sessionId="+g,"appId="+d].join("&"));f.description=e.statusText||e.displayName;m?a.b.Wb(a,y):a.b.kc(a,y);Bo(a);if(m=b)Kb(q.b,b)?m=!1:(q.b.push(b),m=!0);m&&(a=a.g,gm(a.b,b,new am("new_session",e)),fn(a,e,c));return y};
xo.prototype.terminateRoute=function(a){var b=this,c=this.f.get(a);if(!c)return Promise.reject(new eo(3,"Route in Cast provider not found for routeId  "+a));var d=uo(this.h,a);if(!d)return en(this,a,!0),Promise.resolve();var e=d.session.sessionId,f=this.a.b(c.sinkId);if(!f)return bn(this.g,e),Promise.resolve();(a=lo(this.j,a))&&Sm(this.g,a.clientId,f,chrome.cast.ed.STOP);Ek(0);return new Promise(function(a){var c=function(){qn(b.g,f.getId());a()};b.u.sendRequest(new rl(e),f,Pj).then(c,c)})};
var Ko=function(a,b){var c=null;Oe(a.f.Na(!1),function(d){if(!d.Bc)return!1;var e=a.a.b(d.sinkId);if(!e||!Lm(b,Go(d.mediaSource,e)))return!1;c=d;return!0});if(!c||!c.mediaSource)return null;var d=Nm(c.mediaSource);if(!d)return null;var e=cm(a.j,d);return e?(d=to(a.h,d))?{zc:e,ai:d}:null:null},Ho=function(a,b,c,d,e,f,g){var m=null;Oe(a.f.Na(!1),function(a){var b=a.pb;return b&&null!=b.tabId&&b.tabId==d&&oi(a.mediaSource)?(m=a,!0):!1});if(!m)return null;var q=function(){return a.createRoute(b,g||m.sinkId,
"",e,f,c,null==d?void 0:d)};return Fh(a.terminateRoute(m.id).then(q,q))};h=xo.prototype;h.connectRouteByRouteId=function(a,b,c,d,e){if(!Mm(a))return Eh(Error("Unsupported presentation URL"));b=Hj(b);b=an(this.h,b.a);if(!b)return Eh(Error("No matching route"));var f=this.a.b(b.sinkId);return f?(a=tn(this,a,f,c,b.session,d,e))?Dh(a):Eh(Error("Failed to create route")):Eh(Error("No sink"))};
h.joinRoute=function(a,b,c,d,e,f){var g=Mm(a);if(!g)return Eh(Error("Unsupported presentation URL"));var m;if(b==chrome.cast.Yf){a:{m=Ko(this,g);if(!m){if(!this.m||this.m.zc.origin!=e||this.m.zc.tabId!=f){m=null;break a}m=this.m}switch(Jm(g)){case chrome.cast.Fb.PAGE_SCOPED:m=null;break a;case chrome.cast.Fb.ORIGIN_SCOPED:if(e!=m.zc.origin){m=null;break a}break;case chrome.cast.Fb.TAB_AND_ORIGIN_SCOPED:if(e!=m.zc.origin||f!=m.zc.tabId){m=null;break a}}m=an(this.h,m.ai.session.sessionId)}if(!m&&(g.f?
g.f:chrome.cast.Qd.CREATE_SESSION)!=chrome.cast.Qd.CAST_THIS_TAB&&(d=Ho(this,a,e,f,c,d)))return d}else m=Lo(this,b);if(!m)return Eh(Error("No matching route"));if(m.offTheRecord!=c)return Eh(Error("Off the record mismatch"));d=this.a.b(m.sinkId);if(!d)return Eh(Error("No sink"));a=tn(this,a,d,b,m.session,e,f);a.offTheRecord=c;return Dh(a)};h.detachRoute=function(a){en(this,a,!1,!0)};
h.Fc=function(a){var b=new Vi,c=this.a.b(a);if(!c)return null;c=c.a;c&1||(b.shouldCaptureVideo=!1);c&4||(b.shouldCaptureAudio=!1);b.shouldCaptureAudio&&!b.shouldCaptureVideo&&(b.minLatencyMillis=b.maxLatencyMillis,b.animatedLatencyMillis=b.maxLatencyMillis);b.senderSideLetterboxing=!0;Wi(b);Object.freeze(b);x(this.l,function(){return"Settings for "+a+": "+Ui(b)});return b.shouldCaptureAudio||b.shouldCaptureVideo?b:null};h.Ec=function(){return"cast_streaming"};
h.sendRouteMessage=function(a,b,c){var d=this,e=this.o.get(a);if(e)return"string"!==typeof b?Promise.reject("String-typed message required"):e.Jf.fl(b);if(!c)return new Promise(function(a,c){"string"!==typeof b&&c(Error("Cannot send non-string messages via ApiHandler."));c=d.g.b;z(em,"Received: "+b);var e=JSON.parse(b),f=e.clientId;"client_connect"==e.type?(z(em,"App "+f),(e=cm(c.a,f))?(e.a=!0,(c=vl(c.b,e.routeId))&&c.ra.resolve(!0)):w(em,"Client not found "+f)):dm(c,f)?(c=c.f[e.type])&&c(e):w(em,
"No route for "+f);a()});var f=uo(this.h,a);if(!f)return Promise.reject(Error("Not managing the route "+a));var g=this.a.b(f.sinkId);if(!g)return Promise.reject(Error("Sink no longer accessible"));var m=(a=lo(this.j,a))?a.clientId:this.v;return new Promise(function(a){zl(d.w,g,c.namespace,b,m,f.session.transportId).then(a,a)})};h.sendRouteBinaryMessage=function(a,b){var c=this.o.get(a);return c?c.Jf.Ml(b):Promise.reject(Error("Route "+a+" does not support sending binary data."))};
h.gd=function(a,b){var c=this.a.b(b);if(!c)return!1;a=Go(a,c);return(a=Km(a))&&0!=a.length?Fb(a,function(a){return Vj(xk(c,a))}):!1};h.xc=function(a,b,c){var d=zo(a);return d&&0!=d.length?b==chrome.cast.Yf?!0:c&&c.mediaSource?(a=Km(c.mediaSource),Fb(a,function(a){return Kb(d,a)})):void 0==b||Lo(this,b)?!0:!1:!1};
var Go=function(a,b,c){return qi(a)||ri(a)?(a={appId:0==(b.a&1)?"85CDB22F":"0F5096E8",capabilities:Tl(b.a)},(new Dm([a],void 0,void 0,void 0,c)).toString()):a},zo=function(a){var b=[];if(qi(a)||ri(a)){var c=Jh();pi(a)&&"ChromeOS"!=c&&"Windows"!=c||b.push("85CDB22F");b.push("0F5096E8")}else(a=Km(a))&&(b=Ub(b,a));return b},yo=function(a){var b=Mm(a);if(!b)return null;a=zo(a);var c=b.m||"",b=b.j;return c&&b?new pl(a,c,JSON.stringify(b)):null},Lo=function(a,b){return 0==b.indexOf(chrome.cast.mg)?an(a.h,
b.substr(chrome.cast.mg.length)):vo(a.h,b)};xo.prototype.J=function(a){if(0==this.a.a.Y())this.b.onSinkAvailabilityUpdated(this,0);var b=this.g;a=a.getId();(a=kn(b.a,a))&&a.session&&bn(b,a.session.sessionId);Jl(this.B);this.b.Cb()};var al=function(a,b){a.A.oh(b);Jl(a.B);a.b.Cb()};h=xo.prototype;h.fa=function(){return"cast.Provider"};h.qa=function(){return[new Mo(this.v,Ue(this.f),this.m)]};h.va=function(){var a=oj(this);a&&(this.v=a.f,Qe(this.f,a.b),this.m=a.a)};h.searchSinks=function(){return ho()};
h.createMediaRouteController=function(){return ho()};h.setMediaRouteStatusObserver=function(){};var Bo=function(a){a.b.Tc(a.fa(),a.hc().some(function(a){return a.isLocal}))},Po=function(a){var b=No(),c=a.Jb();if(b.o.has(c.id))throw Error("Cannot re-register for same route ID: "+c.id);x(b.l,"Registering remoter with route: "+c.id);a=new Oo(a);b.o.set(c.id,a);b.b.kc(b,c);Bo(b);a.a=function(a){return b.b.Kb(b,c.id,a)};return a};xo.prototype.l=v("mr.CastProvider");
var Oo=function(a){this.Jf=a;this.a=null},Qo=function(a,b){a.a&&a.a(b)},Mo=function(a,b,c){this.f=a;this.b=b;this.a=c};var Ro=function(a,b){this.routeId=a;this.message=b},So=function(a){return"string"!=typeof a.message};var To=function(a){this.o=a;this.h=this.g=null},Uo=function(a){if(null==a.h)if(null==a.g||Date.now()-a.g>=a.o)a.j();else{var b=Math.max(a.g+a.o-Date.now(),5);a.h=setTimeout(a.j.bind(a),b)}};To.prototype.j=function(){null!=this.h&&(clearTimeout(this.h),this.h=null);this.v();this.g=Date.now()};To.prototype.v=function(){};var Vo=function(a,b){To.call(this,20);this.a=new Map;this.b=new Set;this.w=null;this.m=this.f=0;this.u=!1;this.B=a;this.A=b;this.l=v("mr.RouteMessageSender")};ka(Vo,To);Vo.prototype.init=function(a){this.w=a;rj(this)};Vo.prototype.stopListeningForRouteMessages=function(a){this.b.delete(a)};
Vo.prototype.send=function(a,b){var c=this.a.get(a);c||(c=[],this.a.set(a,c));b=new Ro(a,b);c.push(b);50<c.length&&1==c.length%50&&w(this.l,function(){return"Message queue length is excessively large ("+c.length+") for route "+a});this.f+=So(b)?0:b.message.length;So(b)&&this.m++;Wo(this);this.b.has(a)&&Uo(this)};
var Xo=function(a,b){if(0!=b.length){b=ja(b);for(var c=b.next();!c.done;c=b.next())c=c.value,a.f-=So(c)?0:c.message.length,So(c)&&a.m--}},Wo=function(a){var b=0<a.m||a.f>a.A;b!=a.u&&(a.u=b,a.B.Tc(a.fa(),b))};Vo.prototype.v=function(){if(this.w){for(var a=ja(this.b),b=a.next();!b.done;b=a.next()){var b=b.value,c=this.a.get(b);c&&0!=c.length&&(this.w(b,c),Xo(this,c),this.a.set(b,[]))}Wo(this)}else this.l.error("sendMessagesCallback not set. Messages not delivered.")};Vo.prototype.fa=function(){return"mr.RouteMessageSender"};
Vo.prototype.qa=function(){var a=[].concat(la(this.a.entries())).map(function(a){return[a[0],a[1].map(function(a){return a.message})]});return[new Yo(a,Array.from(this.b),this.f)]};Vo.prototype.va=function(){var a=oj(this);if(a){this.a=new Map;for(var b={},c=ja(a.b),d=c.next();!d.done;b={routeId:b.routeId},d=c.next())d=d.value,b.routeId=d[0],d=d[1].map(function(a){return function(b){return new Ro(a.routeId,b)}}(b)),this.a.set(b.routeId,d);this.b=new Set(a.a);this.f=a.f}};
var Yo=function(a,b,c){this.b=a;this.a=b;this.f=c};var Zo=function(a,b,c){dd.call(this);this.g=null!=c?n(a,c):a;this.f=b;this.b=n(this.jk,this);this.a=[]};r(Zo,dd);h=Zo.prototype;h.Hc=!1;h.td=0;h.gc=null;h.ff=function(a){this.a=arguments;this.gc||this.td?this.Hc=!0:$o(this)};h.stop=function(){this.gc&&(Ae(this.gc),this.gc=null,this.Hc=!1,this.a=[])};h.pause=function(){this.td++};h.resume=function(){this.td--;this.td||!this.Hc||this.gc||(this.Hc=!1,$o(this))};h.T=function(){Zo.S.T.call(this);this.stop()};
h.jk=function(){this.gc=null;this.Hc&&!this.td&&(this.Hc=!1,$o(this))};var $o=function(a){a.gc=ze(a.b,a.f);a.g.apply(null,a.a)};var ap=function(a,b){this.input=a;this.domain=b};var bp=function(a){this.a=a;this.l=v("mr.ExternalMessageHandler")};
bp.prototype.onMessage=function(a,b,c){var d=this;x(this.l,"Received a message from "+b.id+" type: "+a.type);var e=chrome.runtime.id;"start"==a.type?(a=a.message,this.a.searchSinks("pseudo:cloud","urn:x-org.chromium.media:source:desktop",new ap(a.meetingName,a.domain)).then(function(a){var f="PresentationId"+b.id+cp++;d.a.createRoute("urn:x-org.chromium.media:source:desktop",a,f).then(function(a){c(new gg(e,"route",a.id))}).catch(function(a){c(new gg(e,"error",a))})},function(){c(new gg(e,"error",
Error("Failed to find sink.")))})):"stop"==a.type?this.a.terminateRoute(a.message.routeId).then(function(){c(new gg(e,"stopped"))}):(c(new gg(e,"error",Error("Unhandled message type"))),this.l.error("Unhandled message type "+a.type))};var cp=0;var dp=function(a){if(0>=a)throw Error("invalid buffer size");this.a=[];this.b=[];this.f=a},ep=function(a,b){if(a.Y()>=a.f){if(a.Ra())throw Error("Empty queue");0==a.a.length&&(a.a=a.b,a.a.reverse(),a.b=[]);a.a.pop()}a.b.push(b)};dp.prototype.Y=function(){return this.a.length+this.b.length};dp.prototype.Ra=function(){return 0==this.Y()};dp.prototype.P=function(){var a=this.a.slice();a.reverse();a.push.apply(a,[].concat(la(this.b)));return a};dp.prototype.clear=function(){this.a=[];this.b=[]};var fp=function(){this.a=new dp(1E3);this.b=Date.now()};fp.prototype.init=function(){Hc=1;var a=v("browser"),b=window.onerror;window.onerror=function(c,e,f,g,m){b&&b(c,e,f,g,m);a.error("Error: "+c+" ("+e+" @ Line: "+f+")",m)};Ic.push(this.h.bind(this));var c=window.localStorage["debug.logs"];c&&(Hc=Lc(c.toUpperCase()));window.localStorage["debug.console"]&&Ic.push(this.f.bind(this))};fp.prototype.h=function(a){ep(this.a,gp(this,a,!1));a=a.Ib;a instanceof Error&&a.stack&&ep(this.a,a.stack)};
fp.prototype.f=function(a){var b=[gp(this,a,!0)];a.Ib&&b.push(a.Ib);switch(a.level){case 3:console.error.apply(console,[].concat(la(b)));break;case 2:console.warn.apply(console,[].concat(la(b)));break;case 1:console.log.apply(console,[].concat(la(b)));break;default:console.debug.apply(console,[].concat(la(b)))}};
var gp=function(a,b,c){var d=["["];if(c)d.push(("       "+((Date.now()-a.b)/1E3).toFixed(3)).slice(-7));else{a=new Date(b.time);var e=function(a){return 10>a?"0"+a:a};d.push(a.getFullYear().toString(),"-",e(a.getMonth()+1),"-",e(a.getDate())," ",e(a.getHours()),":",e(a.getMinutes()),":",e(a.getSeconds()),".",e(Math.floor(a.getMilliseconds()/10)))}d.push("][",Kc[b.level],"][",b.G,"] ",b.message);if(!c&&null!=b.Ib)if(d.push("\n"),b.Ib instanceof Error)d.push(b.Ib.message);else try{d.push(JSON.stringify(b.Ib))}catch(f){d.push(b.Ib.toString())}d.push("\n");
return d.join("")},hp=function(){var a=fp.U();return 0==a.a.Y()?"NA":a.a.P().join("")},ip=function(){var a=fp.U();rj(a)};fp.prototype.fa=function(){return"LogManager"};fp.prototype.qa=function(){return[this.a.P()]};fp.prototype.va=function(){var a=this.a.P();this.a.clear();for(var b=ja(oj(this)||[]),c=b.next();!c.done;c=b.next())ep(this.a,c.value);a=ja(a);for(c=a.next();!c.done;c=a.next())ep(this.a,c.value)};qa(fp);var jp=function(a){this.a=a;this.l=v("mr.InternalMessageHandler")};
jp.prototype.onMessage=function(a,b,c){var d=this;if("retrieve_log_data"!=a.type)c(new gg(chrome.runtime.id,"error",Error("Unhandled message type")));else{var e={logs:hp(),device:pk()};b=[];var f=lg(e.device.ip).then(function(a){a&&(e.device.version=a)});b.push(f);var g=this.a.o;g&&(a=kp(this,g,a.source).then(function(a){a&&(e.castStreamingLogs=a)},function(){d.l.error("Log upload failed for service: "+g)}),b.push(a));b.push(lp(this,e,"mr.cast.SinkDiscoveryService","castDeviceCounts"));b.push(lp(this,
e,"mr.dial.SinkDiscoveryService","dialDeviceCounts"));Ok(b).then(function(){c(e)})}};var lp=function(a,b,c,d){return zi(c).then(function(a){a=a.Rg();b[d]=a.Lc+"."+a.wc},function(){a.l.error("Failed to get device counts for "+d+".")})},kp=function(a,b,c){return mp(a.a,b).then(function(a){return a.nf(c)})};var np=function(){this.a=null;this.l=v("mr.IssueSenderImpl")};np.prototype.init=function(a){this.a=a};np.prototype.send=function(a){if(this.a)if(this.a.onIssue)this.a.onIssue(a);else this.l.error("MediaRouterService.onIssue not defined.");else this.l.error("MediaRouterService is not set.")};var op=function(a,b){A.call(this,"internal_message");this.routeId=a;this.message=b};ka(op,A);var pp=function(a,b,c){this.a=a;this.h=b;this.f=c;this.onMessage=function(){};c.listen("internal_message",this.b,!1,this)};pp.prototype.sendMessage=function(a,b){return this.h(this.a,a,b)};pp.prototype.b=function(a){if(a.routeId==this.a)this.onMessage(a.message)};pp.prototype.pa=function(){this.onMessage=function(){};this.f.v("internal_message",this.b,!1,this)};
var qp=new pp("",function(){return Promise.resolve()},new B),rp=function(a){this.a=a},sp=function(a){var b=yh,c=b.a.af(a);return c?new pp(a,c.sendRouteMessage.bind(c),b.a.df()):qp};var tp=function(){this.l=v("mr.ProviderManager");this.b=[];this.a=new Map;this.m=new Map;this.h=new Set;this.j=new Set;this.u=new Map;this.f=this.o=null;this.w=!1;this.N=new B;this.X=new Zo(this.Pl,500,this);this.ea=new Zo(this.aa,500,this);this.g=new Vo(this,524288);this.F=0;this.K=new np;this.v=new Map;this.J=-1==window.navigator.userAgent.indexOf("Windows");this.B=[];this.A=[];this.ia=new jp(this);this.H=new bp(this);this.onBeforeInvokeHandler=this.Fk;this.createRoute=this.createRoute;this.joinRoute=
this.joinRoute;this.connectRouteByRouteId=this.connectRouteByRouteId;this.terminateRoute=this.terminateRoute;this.startObservingMediaSinks=this.startObservingMediaSinks;this.stopObservingMediaSinks=this.stopObservingMediaSinks;this.sendRouteMessage=this.sendRouteMessage;this.sendRouteBinaryMessage=this.sendRouteBinaryMessage;this.startListeningForRouteMessages=this.startListeningForRouteMessages;this.stopListeningForRouteMessages=this.stopListeningForRouteMessages;this.startObservingMediaRoutes=this.startObservingMediaRoutes;
this.stopObservingMediaRoutes=this.stopObservingMediaRoutes;this.detachRoute=this.detachRoute;this.enableMdnsDiscovery=this.enableMdnsDiscovery;this.searchSinks=this.searchSinks;this.updateMediaSinks=this.updateMediaSinks;this.createMediaRouteController=this.createMediaRouteController;this.setMediaRouteStatusObserver=this.setMediaRouteStatusObserver};ka(tp,ui);
tp.prototype.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(a==chrome.runtime.onMessage)this.ia.onMessage.apply(this.ia,[].concat(la(c)));else if(a==chrome.runtime.onMessageExternal)this.H.onMessage.apply(this.H,[].concat(la(c)));else throw Error("Unhandled event");};var mp=function(a,b){b=a.u.get(b);return zi(b).then(function(b){b.Ga(a);return b})};
tp.prototype.Ga=function(a,b){this.u.set("webrtc","mr.mirror.webrtc.WebRtcService");this.u.set("cast_streaming","mr.mirror.cast.Service");this.u.set("hangouts","mr.mirror.hangouts.HangoutsService");this.u.set("meetings","mr.mirror.hangouts.MeetingsService");var c=new rp(this);yh||(yh=c);this.f=a;this.K.init(a);this.g.init(this.f.onRouteMessagesReceived.bind(this.f));b.forEach(this.ba,this);rj(this);Ei("mr.ProviderManager",this)};
tp.prototype.ba=function(a){if(up(this,a.getName()))w(this.l,"Provider "+a.getName()+" already registered.");else try{a.Ga(),this.b.push(a),this.v.set(a.getName(),0)}catch(b){w(this.l,"Provider "+a.getName()+" failed to initialize.",b)}};
var wp=function(a,b,c){return new Promise(function(d,e){var f=null;a.F++;vp(a);f=window.setTimeout(function(){f=null;b.cancel(new eo(2,"timeout after "+c+" ms."))},c);b.a.then(function(b){a.F--;vp(a);null!=f&&window.clearTimeout(f);d(b)},function(b){a.F--;vp(a);null!=f&&window.clearTimeout(f);e(b instanceof eo?b:b instanceof Error?new eo(0,b.message,b.stack):new eo(0))})})};h=tp.prototype;h.Fk=function(){ni(0)};
h.createRoute=function(a,b,c,d,e,f,g){var m=this,q=xp(this,a,b);if(!q)return Promise.reject(new eo(7,"No provider supports createRoute with source: "+a+" and sink: "+b));f=f&&0<f?f:6E4;a=q.createRoute(a,b,c,g||!1,f,d,e);return wp(this,a,f).then(function(a){return a},function(a){m.l.error("Error creating route.",a);throw a;})};
h.connectRouteByRouteId=function(a,b,c,d,e,f){var g=this.a.get(b);if(!g)return Promise.reject(new eo(7,"No provider supports join "+b));a=g.connectRouteByRouteId(a,b,c,d,e);return wp(this,a,f&&0<f?f:3E4)};h.joinRoute=function(a,b,c,d,e,f){var g=yp(this,a,b);if(!g)return Promise.reject(new eo(7,"No provider supports join "+b));e=e&&0<e?e:3E4;a=g.joinRoute(a,b,f||!1,e,c,d);return wp(this,a,e)};
h.terminateRoute=function(a){var b=this.a.get(a);return b?zp(this,a).then(function(){return b.terminateRoute(a)}):Promise.reject(new eo(3,"Route not found for routeId "+a))};h.startObservingMediaSinks=function(a){this.h.has(a)||(this.h.add(a),this.b.forEach(function(b){b.startObservingMediaSinks(a)}));Ap(this,a)};h.stopObservingMediaSinks=function(a){this.h.delete(a)?Bp(this,a):x(this.l,"No existing query "+a)};
var Bp=function(a,b){a.b.forEach(function(a){a.stopObservingMediaSinks(b)})},Ap=function(a,b){if("urn:x-org.chromium.media:source:tab:-1"==b)w(a.l,"No sinks for sourceUrn: "+b);else{var c=new Map,d=[];a.b.forEach(function(e){var f=e.ld(b);0<f.sinks.length&&(d=f.origins);f.sinks.forEach(function(b){c.has(b.id)?w(a.l,"Detected duplicate sink "+b.id+" from provider: "+e.getName()):c.set(b.id,b)})});Cp(a,b,Array.from(c.values()),d||[])}},Cp=function(a,b,c,d){x(a.l,"Sending "+c.length+" sinks to MR for "+
b);a.f.onSinksReceived(b,c,d)};h=tp.prototype;h.sendRouteMessage=function(a,b,c){var d=this.a.get(a);d?(a=d.sendRouteMessage(a,b,c),a=wp(this,Fh(a),3E4)):a=Promise.reject(Error("Invalid route ID "+a));return a};h.sendRouteBinaryMessage=function(a,b){var c=this.a.get(a);c?(a=c.sendRouteBinaryMessage(a,b),a=wp(this,Fh(a),3E4)):a=Promise.reject(Error("Invalid route ID "+a));return a};h.startListeningForRouteMessages=function(a){var b=this.g;b.b.has(a)||(b.b.add(a),(a=b.a.get(a))&&0<a.length&&Uo(b))};
h.stopListeningForRouteMessages=function(a){this.g.stopListeningForRouteMessages(a)};h.detachRoute=function(a){var b=this.a.get(a);b?b.detachRoute(a):x(this.l,"Route "+a+" does not exist.")};h.enableMdnsDiscovery=function(){this.J=!0;this.B.forEach(function(a){a()});this.B.length=0};var xp=function(a,b,c){return a.b.find(function(a){return a.gd(b,c)})||null},yp=function(a,b,c){return a.b.find(function(a){return a.xc(b,c)})||null};
tp.prototype.aa=function(){var a=this;this.h.forEach(function(b){Ap(a,b)})};var vp=function(a){a.f.setKeepAlive(0<a.F||0<a.A.length)};h=tp.prototype;h.startObservingMediaRoutes=function(a){this.j.has(a)||(this.w=!0,this.j.add(a),this.b.forEach(function(b){b.startObservingMediaRoutes(a)}));this.X.ff()};h.stopObservingMediaRoutes=function(a){this.j.delete(a)?(0==this.j.size&&(this.w=!1),this.b.forEach(function(b){b.stopObservingMediaRoutes(a)})):x(this.l,"No existing route query "+a)};
h.Pl=function(){var a=this;if(this.w){var b=[];this.b.forEach(function(a){b=b.concat(a.hc())});this.j.forEach(function(c){var d=[];a.b.forEach(function(a){a.hc().forEach(function(b){!b.Bc&&a.xc(c,void 0,b)&&d.push(b.id)})});a.f.onRoutesUpdated(b,c,d)})}};h.fa=function(){return"ProviderManager"};
h.qa=function(){return[new Dp(this.b.map(function(a){return a.getName()}),Array.from(this.h),Array.from(this.j),this.w,Array.from(this.a,function(a){var b=ja(a);a=b.next().value;b=b.next().value;return[a,b.getName()]}),Array.from(this.v),this.J,this.o)]};
h.va=function(){var a=oj(this);if(a){this.h=new Set(a.m);this.j=new Set(a.h);this.w=a.g;for(var b=ja(a.f),c=b.next();!c.done;c=b.next()){var d=ja(c.value),c=d.next().value,d=d.next().value,d=up(this,d);this.a.set(c,d)}this.v=new Map(a.j);this.o=a.a||null;a.b&&this.enableMdnsDiscovery()}};h.af=function(a){return this.a.get(a)};h.kc=function(a,b){this.a.set(b.id,a);this.Wb(a,b)};
h.Qc=function(a,b){zp(this,b.id);this.a.delete(b.id);var c=this.g,d=b.id;c.b.delete(d);var e=c.a.get(d);e&&(c.a.delete(d),Xo(c,e),Wo(c));this.Wb(a,b)};h.Wb=function(){this.w&&this.X.ff()};h.vh=function(a){var b=this.a.get(a.id);b&&this.Wb(b,a)};h.Kb=function(a,b,c){this.a.has(b)?("string"===typeof c||c instanceof Uint8Array||(c=JSON.stringify(c)),this.g.send(b,c)):w(this.l,"Got route message for closed route "+b)};
h.onPresentationConnectionStateChanged=function(a,b){"terminated"==b&&this.g.j();this.f.onPresentationConnectionStateChanged(a,b)};h.onPresentationConnectionClosed=function(a,b,c){this.g.j();this.f.onPresentationConnectionClosed(a,b,c)};h.qf=function(a){this.m.delete(a);var b=this.a.get(a);b&&b.terminateRoute(a)};h.qe=function(a,b,c){this.N.dispatchEvent(new op(b,c))};h.Cb=function(){this.ea.ff()};
h.onSinkAvailabilityUpdated=function(a,b){var c=this;if(this.v.get(a.getName())!=b){var d=Ep(this);this.v.set(a.getName(),b);a=Ep(this);d!=a&&(this.f.onSinkAvailabilityUpdated(a),0==a&&(this.h.forEach(function(a){Bp(c,a)}),this.h.clear()))}};var Ep=function(a){return Array.from(a.v.values()).reduce(function(a,c){return Math.max(a,c)},0)};tp.prototype.df=function(){return this.N};tp.prototype.Pc=function(){return this.K};
var zp=function(a,b){return a.m.has(b)?mp(a,a.m.get(b)).then(function(c){a.m.delete(b);return Ii(c)}):Promise.resolve(!1)};h=tp.prototype;h.mf=function(a,b,c,d){var e=this,f=a.Ec(b.sinkId);x(this.l,"Starting mirroring using service: "+f);this.m.set(b.id,f);return Gh(mp(this,f),function(g){e.o=f;return Ch(Mi(g,b,b.mediaSource,a.Fc(b.sinkId),c,d),function(a){if(a instanceof di&&3==a.reason)throw new eo(8);throw a;})})};
h.lh=function(a,b,c,d,e,f){var g=this,m=this.m.get(b.id);return m?Gh(mp(this,m),function(q){g.o=m;var y=a.Fc(b.sinkId);x(q.G,"Update mirroring on route "+b.id);return q.h?Fh(Hi(c,e).then(q.B.bind(q,b,c,y,d,f))):Eh(Error("Not initialized"))}):Eh(Error("Route "+b.id+" is not mirroring"))};h.Hf=function(a){this.J?a():-1==this.B.indexOf(a)&&this.B.push(a)};h.lf=function(){return this.J};h.Tc=function(a,b){var c=this.A.indexOf(a),d=0<=c;b&&!d?this.A.push(a):!b&&d&&this.A.splice(c,1);vp(this)};
var up=function(a,b){return a.b.find(function(a){return a.getName()==b})||null};tp.prototype.searchSinks=function(a,b,c){var d=a.startsWith("pseudo:")?a.substring(7):null;return(d=d?up(this,d):null)?d.searchSinks(b,c).then(function(a){return a.id}):Promise.reject(Error("No provider supports "+a))};tp.prototype.updateMediaSinks=function(a){this.h.has(a)||Ap(this,a)};
tp.prototype.createMediaRouteController=function(a,b){var c=this.a.get(a);return c?c.createMediaRouteController(a,b):(a="createMediaRouteController: Provider not found for "+a,this.l.error(a),Promise.reject(Error(a)))};tp.prototype.setMediaRouteStatusObserver=function(a,b){var c=this.a.get(a);c?c.setMediaRouteStatusObserver(a,b):this.l.error("setMediaRouteStatusObserver: Provider not found for "+a)};var Dp=function(a,b,c,d,e,f,g,m){this.m=b;this.h=c;this.g=d;this.f=e;this.j=f;this.b=g;this.a=m};var Fp=function(a,b){this.a=a;this.b=b},Gp=new Fp("https://www.googleapis.com/clouddevices/v1","AIzaSyAOZM8ZYeov685QMjXT3sC7XNizfrTEKjA"),Hp=new Fp("https://www.googleapis.com/calendar/v3",""),Ip=new Fp("https://www.googleapis.com/hangouts/v1",""),Jp=new Fp("https://networktraversal.googleapis.com/v1alpha","AIzaSyAOZM8ZYeov685QMjXT3sC7XNizfrTEKjA");var Kp=function(a){this.email=a;this.imageUrl=null},Lp=function(a){this.type=a},Mp=function(a,b,c){this.type="__cloud_webrtc_session_message__";this.sessionDescription=a;this.user=null!=b?b:null;this.flungUrl=null!=c?c:null};ka(Mp,Lp);
var Np=function(a,b,c){this.name=a;this.parameters=b;this.minimalRole=null!=c?c:"user"},Op={_settings:{type:"string"},_presentationRequest:{type:"string"},_optMediaConstraints:{type:"string"},_webrtcMessage:{type:"string"},_user:{type:"string"}},Pp=new Np("_knockingStartWebrtcSession",Op,"viewer"),Qp=new Np("_startWebrtcSession",Op),Rp=new Np("_stopSession",{},"viewer");var Sp=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d=a,c=ja(c),e=c.next();!e.done;e=c.next()){if(void 0==d||"object"!=typeof d)return;d=d[e.value]}return d};var Tp=function(a,b){this.a=a;this.b=b},Up=function(a){return new Tp((a.a>>>1|(a.b&1)<<31)>>>0,a.b>>>1>>>0)},Vp=function(a){return new Tp(a.a<<1>>>0,(a.b<<1|a.a>>>31)>>>0)};Tp.prototype.add=function(a){return new Tp((this.a+a.a&4294967295)>>>0>>>0,((this.b+a.b&4294967295)>>>0)+(4294967296<=this.a+a.a?1:0)>>>0)};var Wp=function(a){var b=a&65535,c=a>>>16;a=10*b+65536*(0*b&65535)+65536*(10*c&65535);for(b=0*c+(0*b>>>16)+(10*c>>>16);4294967296<=a;)a-=4294967296,b+=1;return new Tp(a>>>0,b>>>0)};
Tp.prototype.toString=function(){for(var a="",b=this;0!=b.a||0!=b.b;){var c;c=new Tp(0,0);for(var b=new Tp(b.a,b.b),d=new Tp(10,0),e=new Tp(1,0);!(d.b&2147483648);)d=Vp(d),e=Vp(e);for(;0!=e.a||0!=e.b;)0>=(d.b<b.b||d.b==b.b&&d.a<b.a?-1:d.b==b.b&&d.a==b.a?0:1)&&(c=c.add(e),b=new Tp((b.a-d.a&4294967295)>>>0>>>0,((b.b-d.b&4294967295)>>>0)-(0>b.a-d.a?1:0)>>>0)),d=Up(d),e=Up(e);c=[c,b];b=c[0];a=c[1].a+a}""==a&&(a="0");return a};Tp.prototype.clone=function(){return new Tp(this.a,this.b)};var Xp=function(a,b){this.data=a;this.ad=b};Xp.prototype.toString=function(){return"[op. result, version: "+this.ad+", resource count: "+this.data.length+"]"};var Yp=function(a,b){this.b=a;this.a=b};var Zp={Kj:0,zi:1,TIMEOUT:2,ERROR:3,zo:4,Nm:5,sg:6,Fn:7,an:8,wi:9,en:10,aq:11,Fq:12,Jp:13,rm:14,Dn:15,ho:16,Sq:17,vm:18,eo:19,oq:20,To:21,bn:22,An:23,lp:24,sq:25,qq:26,Yi:27,ko:28,Pq:29,Zp:30,Yo:31,Km:32,Dm:33,Qq:34,Fp:35,Zq:36,Tq:37,Zn:38,Yn:39,ao:40,Wq:41,Kp:42,vn:43,Bn:44,Uq:45,Am:46,bp:47,Dp:48,Zo:49,Ep:50,xp:51,zp:52,yp:53,Bp:54,Ap:55,tq:56,En:57,br:58,Co:59,so:60,Bm:61,um:62,Ym:63,wo:64,Sn:65,Qn:66,mo:67,Tn:68,Cm:69,In:70,Im:71,ap:72,kn:73,pq:74,Lm:102,Sp:104};var $p={Zf:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},xi:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},aq=$p,aq=$p;var bq={AED:[2,"dh","\u062f.\u0625.","DH"],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[32,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[50,"kr.","kr."],DOP:[2,"RD$","RD$"],EGP:[2,"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[34,
"Ft","Ft"],IDR:[0,"Rp","Rp"],ILS:[34,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],MNT:[0,"\u20ae","MN\u20ae"],MVR:[2,"Rf","MVR"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","PHP"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u20bd",
"RUB"],SAR:[2,"Rial","Rial"],SEK:[50,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u0433\u0440\u043d.","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[48,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};var cq={bg:".",He:",",kg:"%",Ne:"0",bj:"+",Ti:"-",fg:"E",lg:"\u2030",Ie:"\u221e",Xi:"NaN",ag:"#,##0.###",sj:"#E0",aj:"#,##0%",yi:"\u00a4#,##0.00",Bi:"USD"},dq=cq,dq=cq;var eq=function(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"},fq=eq,fq=eq;var gq=function(a,b){if(void 0===b){b=a+"";var c=b.indexOf(".");b=Math.min(-1==c?0:b.length-c-1,3)}return 1==(a|0)&&0==b?"one":"other"},hq=gq,hq=gq;var iq=function(a,b){this.width=a;this.height=b};h=iq.prototype;h.clone=function(){return new iq(this.width,this.height)};h.toString=function(){return"("+this.width+" x "+this.height+")"};h.Sj=function(){return this.width*this.height};h.Ra=function(){return!this.Sj()};h.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};h.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
h.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};var jq=function(a){this.b=0;this.f=a||100;this.a=[]};h=jq.prototype;h.add=function(a){var b=this.a[this.b];this.a[this.b]=a;this.b=(this.b+1)%this.f;return b};h.get=function(a){a=kq(this,a);return this.a[a]};h.set=function(a,b){a=kq(this,a);this.a[a]=b};h.Y=function(){return this.a.length};h.Ra=function(){return 0==this.a.length};h.clear=function(){this.b=this.a.length=0};h.P=function(){for(var a=this.Y(),b=this.Y(),c=[],a=this.Y()-a;a<b;a++)c.push(this.get(a));return c};
h.Ea=function(){for(var a=[],b=this.Y(),c=0;c<b;c++)a[c]=c;return a};h.Oa=function(a){return a<this.Y()};h.Ac=function(a){for(var b=this.Y(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var kq=function(a,b){if(b>=a.a.length)throw Error("Out of bounds exception");return a.a.length<a.f?b:(a.b+Number(b))%a.f};var lq=function(a){this.a=a};lq.prototype.ef=Zc;var mq=function(a){for(var b="",c=0,d=!1,e=null,f=0;f<a.length;f++){var g=a[f];if(d)"\\"==e?g=null:'"'==g&&(d=!1);else if('"'==g)d=!0;else if(","==e&&","==g|"]"==g||"["==e&&","==g)b=b+a.substring(c,f)+"null",c=f;e=g}b+=a.substring(c);return JSON.parse(b)};var nq=function(a,b,c){var d=this;this.a=a;this.b={};Ha(b,function(a,b){return d.b[b.toLowerCase()]=a});this.Qb=c};nq.prototype.xb=function(){return Sa(this.b)};var oq={ACCEPTED:0,ln:1,TIMEOUT:2},pq={SUCCESS:0,Gi:1},qq={Kj:0,nj:1,cr:2,Xn:3,Wn:4,Qo:5,TIMEOUT:6,Op:7},rq={Un:0,zq:1},sq={wp:0,Eo:1,USER:2,Pn:3},tq=function(a){ai("MediaRouter.Cloud.Knock.Result",a,oq)},uq=function(a){ai("MediaRouter.Cloud.Session.Start",a,pq)},vq=function(a){ai("MediaRouter.Cloud.Session.Type",a,rq)},wq=function(a){ai("MediaRouter.Cloud.Device.UserRole",a,sq)};var xq=function(a){this.a=a;this.id=a.id;this.l=v("mr.cloud.devices.CloudDevice")};xq.prototype.isAvailable=function(){if(this.getState().appStatus){var a="online"==this.a.connectionStatus,b="available"==this.getState().appStatus,c=yq(this,864E5);z(this.l,"Device id: "+this.id+", availability: GCM connected "+a+", app Available: "+b+", checked in: "+c);return a&&b&&c}a=yq(this,9E5);x(this.l,"Availability for legacy receiver app: "+a);return a};
var yq=function(a,b){a=a.a.lastUpdateTimeMs?Number(a.a.lastUpdateTimeMs):null;return!!(a&&a>Date.now()-b)};xq.prototype.b=function(){return this.getState().settings.receiverName};xq.prototype.getId=function(){return this.id};xq.prototype.getState=function(){return this.a.state._cloudCast};var zq=function(a,b,c,d,e,f){c=void 0===c?null:c;a||null==c&&(c="default");this.hh=a;this.ya=b;this.mb=c;this.Mc=void 0===d?null:d;this.wb=void 0===e?null:e;this.rc=void 0===f?null:f};zq.prototype.b=function(){var a="";this.wb?a=this.wb:this.Mc&&(a=this.Mc);return a};zq.prototype.vb=function(){return this.hh};zq.prototype.getId=function(){return this.ya};zq.prototype.merge=function(a){!this.rc&&a.rc&&(this.rc=a.rc);!this.wb&&a.wb&&(this.wb=a.wb);this.wb&&a.wb&&this.rc&&(this.wb=a.wb)};var Aq=function(a,b,c){this.state=a;this.type=null!=b?b:null;this.a=null!=c?c:null},Bq=function(a){this.a=a},Eq=function(a,b,c,d){return Cq(a,Pp,b,c,d,35E3).then(function(b){return Dq(a,b)})},Gq=function(a,b,c,d){return Cq(a,Qp,b,c,d,23E3).then(function(a){var b=a.state;return"done"==b?(a=Fq(a),new Aq(b,a.type,new Mp(a.sessionDescription))):new Aq(b)})},Cq=function(a,b,c,d,e,f){var g={_webrtcMessage:JSON.stringify(d.presentationUrl?new Mp(d.description,null,d.presentationUrl):new Mp(d.description))};
d.settings&&(g._settings=Ui(d.settings));d.mediaConstraints&&(g._optMediaConstraints=JSON.stringify(d.mediaConstraints));e&&(g._user=JSON.stringify(e));return Hq(a,c,b,g,f)},Dq=function(a,b){var c=b.state;switch(c){case "done":return Promise.resolve(Iq(b));case "queued":case "inProgress":return Jq(a,b).then(function(b){return Dq(a,b)});default:return Promise.resolve(new Aq(c))}},Jq=function(a,b){return new Promise(function(c){var d=setInterval(function(){Kq(a,b.id).then(function(a){"queued"!=a.state&&
"inProgress"!=a.state&&(clearInterval(d),c(a))})},2E3)})},Iq=function(a){a=Fq(a);return"__cloud_webrtc_session_message__"==a.type?new Aq("done","knocking_cloud_webrtc_session_message",new Mp(a.sessionDescription)):new Aq("done",a.type)},Hq=function(a,b,c,d,e){b={deviceId:b,name:"_cloudCast."+c.name,parameters:d,expirationTimeoutMs:e||1E4};c={};e&&(c.responseAwaitMs=Math.min(e+5E3,25E3));e=Lq(Gp.a,["commands"],c);return Mq(a.a,e,"POST",b)},Fq=function(a){return a.results&&a.results.results?JSON.parse(a.results.results):
null},Kq=function(a,b){b=Lq(Gp.a,["commands",b]);return Mq(a.a,b,"GET")};Bq.$inject=["gapiService"];var Nq=function(a,b,c){if(c)for(var d=0;d<c.length;d++);this.f=a;this.a=b||null;this.b=c||[]};Nq.prototype.toString=function(){return this.f};var Oq=function(a){this.a=a};r(Oq,lq);var Pq=function(a,b,c){nq.call(this,a,b,c)};ka(Pq,nq);var Qq=function(a,b,c,d){this.h=a;this.g=b;this.b=this.f=a;this.j=c||0;this.m=d||2};Qq.prototype.a=0;Qq.prototype.reset=function(){this.b=this.f=this.h;this.a=0};var Rq=function(a){a.b=Math.min(a.g,a.b*a.m);a.f=Math.min(a.g,a.b+(a.j?Math.round(a.j*(Math.random()-.5)*2*a.b):0));a.a++};var Sq=function(a){this.j=a;this.b=this.f=this.a=null;this.g=this.h=!1;this.l=v("mr.cloud.devices.CloudDevicesService");rj(this)};Sq.prototype.getDevice=function(a){a=Lq(Gp.a,["devices",a]);return Mq(this.j,a,"GET").then(function(a){return new xq(a)})};
var Tq=function(a,b){var c=Lq(Gp.a,["devices"],b);return Mq(a.j,c,"GET").then(function(c){var d=(c.devices||[]).filter(function(a){return null!=a.commandDefs&&null!=a.commandDefs._cloudCast}).map(function(a){return new xq(a)});if(c=c.nextPageToken){var f=Sa(b);f.token=c;return Tq(a,f).then(function(a){return d.concat(a)})}return d})};Sq.prototype.fa=function(){return"CloudDevicesService"};Sq.prototype.qa=function(){return[new Uq(this.a,this.b,this.f)]};
Sq.prototype.va=function(){var a=oj(this);a&&(this.a=a.vk,this.b=a.gcmRegistrationId,this.f=a.uk)};
var Vq=function(a){return new Promise(function(b,c){a.h?c(Error("Registering...")):(a.h=!0,a.b&&a.f&&a.f+864E5>=Date.now()?(a.h=!1,b(a.b)):chrome.gcm.register(["919648714761"],function(d){a.h=!1;d?(z(a.l,"Got GCM ID: "+d),a.b=d,a.f=Date.now(),a.a=null,b(d)):(w(a.l,"Error: "+chrome.runtime.lastError.message),a.b=null,a.f=null,a.a=null,c(Error(chrome.runtime.lastError.message)))}))})},Wq=function(a,b){if(a.g)Promise.resolve();else if(a.g=!0,b&&(!a.a||a.a+864E5<Date.now())){b={filters:["myDevices"],
gcmRegistrationId:b,gcmSenderId:"919648714761",expirationTimeMs:864E5};var c=Lq(Gp.a,["subscriptions","subscribe"],{});Mq(a.j,c,"POST",b).then(function(){z(a.l,"Subscribed on: "+Date.now());a.a=Date.now();a.g=!1;return Promise.resolve()},function(b){a.g=!1;throw b;})}else Promise.resolve()},Uq=function(a,b,c){this.vk=a;this.gcmRegistrationId=b;this.uk=c};var Zq=function(){this.b=!1;this.a=null;this.f=!1;this.l=v("mr.cloud.identity.IdentityService");rj(this);Xq(this);Yq(this)},$q=function(a){return a.a?a.a.substr(a.a.indexOf("@")+1):""};Zq.prototype.getAuthToken=function(){return chrome.identity?new Promise(function(a,b){chrome.identity.getAuthToken({interactive:!1},function(c){chrome.runtime.lastError?b(Error("Unable to get user auth token: "+chrome.runtime.lastError.message)):null==c?b(Error("User is not logged in (no token found)")):a(c)})}):Promise.reject(Error("chrome.identity permission required for auth."))};
var ar=function(a){return new Promise(function(b){chrome.identity.removeCachedAuthToken({token:a},function(){b()})})},Yq=function(a){a.getAuthToken().then(function(b){chrome.identity.getProfileUserInfo(function(c){a.b=!!c.email||!!c.id;a.a=c.email||null;b&&!a.b&&(a.f=!0)})},function(b){z(a.l,"Unable to set sign in and email.",b)})},Xq=function(a){chrome.identity.onSignInChanged.addListener(function(b,c){ni(6);a.b=c;x(a.l,"Signed in change: "+a.b);a.b?Yq(a):(a.a=null,a.f=!1)})},br=function(a){return a.getAuthToken().then(function(b){var c=
window.gapi;if(!c)return a.l.error("gapi not loaded."),!1;x(a.l,"Setting gapi auth token");c.auth.setToken({access_token:b});return!0})};Zq.prototype.fa=function(){return"IdentityService"};Zq.prototype.qa=function(){return[null,{signedIn:this.b,userEmail:this.a,kioskAuth:this.f}]};Zq.prototype.va=function(){var a=pj(this);a&&(a.signedIn&&(this.b=a.signedIn),a.userEmail&&(this.a=a.userEmail),a.kioskAuth&&(this.f=a.kioskAuth))};var cr="cloudview.test@gmail.com castouts.qa.nohangouts@gmail.com castouts.qa@gmail.com castouts-qa.com castouts-test.com google.com youtube.com nest.com waze.com netflix.com twitter.com yahoo.com salesforce.com whirlpool.com nytimes.com kohls.com squareup.com ivci.com".split(" ");var dr=function(){var a=this;this.l=v("mr.cloud.settings.SettingsService");this.a=null;chrome.settingsPrivate.onPrefsChanged.addListener(function(b){ni(13);if(a.a){b=ja(b);for(var c=b.next();!c.done;c=b.next())if(c=c.value,"media_router.cloudservices.enabled"==c.key){a.a.call(null,c.value);break}}})},er=function(a,b){a.a=b},fr=function(a){var b=a.l;chrome.storage.sync.set({"mr.cloud.cloudEnabled":!0},function(){chrome.runtime.lastError&&w(b,"Error setting cloud setting: "+JSON.stringify(chrome.runtime.lastError))})},
hr=function(a){return gr().catch(function(){return gr().catch(function(b){w(a.l,"Error retrieving cloud on setting.",b);return!1})})},gr=function(){return ir("mr.cloud.cloudEnabled").then(function(a){return!!a["mr.cloud.cloudEnabled"]})},ir=function(a){return new Promise(function(b,c){chrome.storage.sync.get(a,function(a){chrome.runtime.lastError?c(chrome.runtime.lastError):b(a)})})},kr=function(a){return jr().catch(function(){return jr().catch(function(b){w(a.l,"Error retrieving cloud enabled setting.",
b);return!1})})},jr=function(){return lr().then(function(a){return!!a.value})},lr=function(){return new Promise(function(a,b){chrome.settingsPrivate.getPref("media_router.cloudservices.enabled",function(c){chrome.runtime.lastError?b(chrome.runtime.lastError):a(c)})})},nr=function(a){var b=a.l;chrome.storage.sync.set({"mr.cloud.notifiedHangouts":!0},function(){chrome.runtime.lastError&&w(b,"Error setting notified Hangout privacy.",chrome.runtime.lastError)})},pr=function(a){return or().catch(function(){return or().catch(function(b){w(a.l,
"Error retrieving hangouts notified setting.",b);return!1})})},or=function(){return ir("mr.cloud.notifiedHangouts").then(function(a){return!!a["mr.cloud.notifiedHangouts"]})};var qr=function(){},rr=function(a,b){a.S||r(a,qr);b.Tb=a;do b=b.S&&b.S.constructor;while(b&&!b.Tb);if(b&&b.Tb!==a.S.constructor)throw Error("delegate base must derive from superclass delegate base");},sr=function(a,b,c){if(!a.S){for(var d in a.prototype)if(a.prototype.hasOwnProperty(d))throw Error("delegate registered after defining methods. you should extend your delegate base explicitly immediately after defining your delegate class");r(a,b)}c=c||0;a.Ig=c;if(b.ib){b=b.ib;d=0;for(var e=b.length-
1;d<=e;){var f=d+e>>1;c>b[f].Ig?e=f-1:d=f+1}d<b.length&&b[d].Ig==c&&++d;b.splice(d,0,a)}else b.ib=[a]},vr=function(a){var b=a.Tb,c=function(a){c.S.constructor.call(this,a);var b=this.ib.length;this.a=[];for(var d=0;d<b;++d)this.ib[d].gr||(this.a[d]=new this.ib[d](a))};r(c,b);for(var d=[];a;){if(b=a.Tb){b.ib&&Wb(d,b.ib);var e=b.prototype,f;for(f in e)if(e.hasOwnProperty(f)&&wa(e[f])&&e[f]!==b){var g=!!e[f].fr,m=tr(f,e,d,g);(g=ur(f,e,m,g))&&(c.prototype[f]=g)}}a=a.S&&a.S.constructor}c.prototype.ib=
d;return c},tr=function(a,b,c,d){for(var e=[],f=0;f<c.length&&(c[f].prototype[a]===b[a]||(e.push(f),!d));++f);return e},ur=function(a,b,c,d){var e;c.length?d?e=function(b){var d=this.a[c[0]];return d?d[a].apply(this.a[c[0]],arguments):this.ib[c[0]].prototype[a].apply(this,arguments)}:b[a].Wj?e=function(b){var d;a:{d=Array.prototype.slice.call(arguments,0);for(var e=0;e<c.length;++e){var f=this.a[c[e]];if(f=f?f[a].apply(f,d):this.ib[c[e]].prototype[a].apply(this,d)){d=f;break a}}d=!1}return d}:b[a].Eg?
e=function(b){var d;a:{d=Array.prototype.slice.call(arguments,0);for(var e=0;e<c.length;++e){var f=this.a[c[e]],f=f?f[a].apply(f,d):this.ib[c[e]].prototype[a].apply(this,d);if(null!=f){d=f;break a}}d=void 0}return d}:b[a].ph?e=function(b){for(var d=Array.prototype.slice.call(arguments,0),e=0;e<c.length;++e){var f=this.a[c[e]];f?f[a].apply(f,d):this.ib[c[e]].prototype[a].apply(this,d)}}:e=function(b){for(var d=Array.prototype.slice.call(arguments,0),e=[],f=0;f<c.length;++f){var y=this.a[c[f]];e.push(y?
y[a].apply(y,d):this.ib[c[f]].prototype[a].apply(this,d))}return e}:d||b[a].Wj||b[a].Eg||b[a].ph?e=null:e=wr;return e},wr=function(){return[]};qr.prototype.Ze=function(a){if(this.a)for(var b=0;b<this.a.length;++b)if(this.a[b]instanceof a)return this.a[b];return null};var xr=function(){var a=function(){};a.Eg=!0;return a};var yr=function(a,b,c,d,e,f,g,m,q,y,D){this.a=a;this.w=u(b);this.v=u(c);this.J=u(d);this.m=Ub(b,d);this.F=Ub(c,e);this.b=f;this.o=u(g);this.u=u(m);this.A=u(q);this.j=Ub(g,q);this.B=Ub(m,y);this.g=D||$c};yr.prototype.f=function(a){var b;if(a instanceof this.a)b=this.w;else if(a instanceof this.b)b=this.o;else return tb("Passed in object did not match resource or identifier type"),[];return Db(b,function(b){return b.call(a)})};
var zr=function(a,b){if(b instanceof a.a)a=a.J;else if(b instanceof a.b)a=a.A;else return tb("Passed in object did not match resource or identifier type"),[];return Db(a,function(a){return a.call(b)})};yr.prototype.h=function(a){var b;if(a instanceof this.a)b=this.m;else if(a instanceof this.b)b=this.j;else return tb("Passed in object did not match resource or identifier type"),[];return Db(b,function(b){return b.call(a)})};
yr.prototype.lb=function(a,b){var c=this.F;a.length!=c.length&&(b?a=Ub(a,b):c=this.v);var d=new this.a;t(a,function(a,b){c[b].call(d,a)},this);return d};
var Ar=function(a,b){var c=a.B;b.length!=c.length&&(c=a.u);var d=new a.b;t(b,function(a,b){c[b].call(d,a)},a);return d},Br=function(a,b){if(b instanceof a.a)a=a.m;else if(b instanceof a.b)a=a.j;else return tb("Passed in object did not match resource or identifier type"),!1;return!Fb(a,function(a){return null==a.call(b)})},Dr=function(a,b,c){b=Cr(a,b,a.h);a=Cr(a,c,a.h);return dc(b,a)},Cr=function(a,b,c){return b instanceof Array?b:c.call(a,b)};var Er=function(a,b,c){this.a=a;this.b=b;this.f=c};var Fr=new Nq("FwiOSb");var Gr=function(){this.b=[];this.a=[]},Hr=function(a){Lb(a.b)&&(a.b=a.a,a.b.reverse(),a.a=[]);return a.b.pop()};h=Gr.prototype;h.Y=function(){return this.b.length+this.a.length};h.Ra=function(){return Lb(this.b)&&Lb(this.a)};h.clear=function(){this.b=[];this.a=[]};h.contains=function(a){return Kb(this.b,a)||Kb(this.a,a)};h.remove=function(a){var b;b=this.b;var c=Ab(b,a);0<=c?(Qb(b,c),b=!0):b=!1;return b||Rb(this.a,a)};
h.P=function(){for(var a=[],b=this.b.length-1;0<=b;--b)a.push(this.b[b]);for(var c=this.a.length,b=0;b<c;++b)a.push(this.a[b]);return a};var Ir=function(){Ik.call(this,5,"cloud.GcmEventListener","mr.cloud.discovery.CloudSinkDiscoveryService",chrome.gcm.onMessage);this.l=v("mr.CloudGcmEventListener")};ka(Ir,Ik);Ir.prototype.Fe=function(a){a=Sp(a,"data","notification");if(!a)return this.l.error("Notification json not found"),!1;try{var b=JSON.parse(a);return!!b&&Array.isArray(b.events)&&0<b.events.length}catch(c){return this.l.error("Invalid json: "+a),!1}};var Kr=function(){Jr||(Jr=new Ir);return Jr},Jr=null;var Mr=function(a){if(!a.ma){var b;for(b=a.constructor;b&&!b.Tb;)b=b.S&&b.S.constructor;b.Tb.Jg||(b.Tb.Jg=vr(b));b=new b.Tb.Jg(a);a.ma=b;a.Ze||(a.Ze=Lr)}},Lr=function(a){return this.ma.Ze(a)};var Nr=function(a,b,c,d){this.status=a;this.f=b;this.a=c;this.response=d};Nr.prototype.toString=function(){var a="["+this.status+"/"+this.f;null!=this.a&&(a+="/"+this.a);null!=this.response&&(a+=": ",a=ua(this.response)?a+Ie(this.response,this.b,this).join("; "):a+this.b(this.response));return a+"]"};
Nr.prototype.b=function(a){if(null!=a.error){var b=a.error;a=b.message+" "+b.code;b=b.data||b.errors;null!=b&&(b=Ie(b,function(a){var b=a.domain+" - "+a.reason;null!=a.debugInfo&&(b+=" = "+rb(a.debugInfo,"\n",4).slice(0,3).join(" - "));return b}),Fe(b)||(a+=": "+b.join(", ")));return a}return"Unknown"};var Qr=function(a,b,c){this.u=b||dq.Bi;this.N=c||0;this.B=40;this.b=1;this.H=0;this.j=3;this.J=this.f=0;this.K=!1;this.A=this.w="";this.h="-";this.v="";this.a=1;this.m=!1;this.g=[];this.F=this.ia=!1;this.o=0;if("number"==typeof a)switch(a){case 1:Or(this,dq.ag);break;case 2:Or(this,dq.sj);break;case 3:Or(this,dq.aj);break;case 4:a=dq.yi;b=["0"];c=bq[this.u][0]&7;if(0<c){b.push(".");for(var d=0;d<c;d++)b.push("0")}a=a.replace(/0.00/g,b.join(""));Or(this,a);break;case 5:Pr(this,1);break;case 6:Pr(this,
2);break;default:throw Error("Unsupported pattern type.");}else Or(this,a)},Or=function(a,b){b.replace(/ /g,"\u00a0");var c=[0];a.w=Rr(a,b,c);for(var d=c[0],e=-1,f=0,g=0,m=0,q=-1,y=b.length,D=!0;c[0]<y&&D;c[0]++)switch(b.charAt(c[0])){case "#":0<g?m++:f++;0<=q&&0>e&&q++;break;case "0":if(0<m)throw Error('Unexpected "0" in pattern "'+b+'"');g++;0<=q&&0>e&&q++;break;case ",":0<q&&a.g.push(q);q=0;break;case ".":if(0<=e)throw Error('Multiple decimal separators in pattern "'+b+'"');e=f+g+m;break;case "E":if(a.F)throw Error('Multiple exponential symbols in pattern "'+
b+'"');a.F=!0;a.J=0;c[0]+1<y&&"+"==b.charAt(c[0]+1)&&(c[0]++,a.K=!0);for(;c[0]+1<y&&"0"==b.charAt(c[0]+1);)c[0]++,a.J++;if(1>f+g||1>a.J)throw Error('Malformed exponential pattern "'+b+'"');D=!1;break;default:c[0]--,D=!1}0==g&&0<f&&0<=e&&(g=e,0==g&&g++,m=f-g,f=g-1,g=1);if(0>e&&0<m||0<=e&&(e<f||e>f+g)||0==q)throw Error('Malformed pattern "'+b+'"');m=f+g+m;a.j=0<=e?m-e:0;0<=e&&(a.f=f+g-e,0>a.f&&(a.f=0));a.b=(0<=e?e:m)-f;a.F&&(a.B=f+a.b,0==a.j&&0==a.b&&(a.b=1));a.g.push(Math.max(0,q));a.ia=0==e||e==m;
d=c[0]-d;a.A=Rr(a,b,c);c[0]<b.length&&";"==b.charAt(c[0])?(c[0]++,1!=a.a&&(a.m=!0),a.h=Rr(a,b,c),c[0]+=d,a.v=Rr(a,b,c)):(a.h+=a.w,a.v+=a.A)},Pr=function(a,b){a.o=b;Or(a,dq.ag);a.f=0;a.j=2;if(0<a.f)throw Error("Can't combine significant digits and minimum fraction digits");a.H=2};
Qr.prototype.parse=function(a,b){b=b||[0];if(0!=this.o)throw Error("Parsing of compact numbers is unimplemented");var c;a=a.replace(/ /g,"\u00a0");var d=a.indexOf(this.w,b[0])==b[0],e=a.indexOf(this.h,b[0])==b[0];d&&e&&(this.w.length>this.h.length?e=!1:this.w.length<this.h.length&&(d=!1));d?b[0]+=this.w.length:e&&(b[0]+=this.h.length);if(a.indexOf(dq.Ie,b[0])==b[0])b[0]+=dq.Ie.length,c=Infinity;else{c=a;var f=!1,g=!1,m=!1,q=1,y=dq.bg,D=dq.He,V=dq.fg;if(0!=this.o)throw Error("Parsing of compact style numbers is not implemented");
for(var fa="";b[0]<c.length;b[0]++){var xa=c.charAt(b[0]),rd=Sr(xa);if(0<=rd&&9>=rd)fa+=rd,m=!0;else if(xa==y.charAt(0)){if(f||g)break;fa+=".";f=!0}else if(xa==D.charAt(0)&&("\u00a0"!=D.charAt(0)||b[0]+1<c.length&&0<=Sr(c.charAt(b[0]+1)))){if(f||g)break}else if(xa==V.charAt(0)){if(g)break;fa+="E";g=!0}else if("+"==xa||"-"==xa)fa+=xa;else if(1==this.a&&xa==dq.kg.charAt(0)){if(1!=q)break;q=100;if(m){b[0]++;break}}else if(1==this.a&&xa==dq.lg.charAt(0)){if(1!=q)break;q=1E3;if(m){b[0]++;break}}else break}1!=
this.a&&(q=this.a);c=parseFloat(fa)/q}if(d){if(a.indexOf(this.A,b[0])!=b[0])return NaN;b[0]+=this.A.length}else if(e){if(a.indexOf(this.v,b[0])!=b[0])return NaN;b[0]+=this.v.length}return e?-c:c};
Qr.prototype.format=function(a){if(isNaN(a))return dq.Xi;var b=[],c;c=a;if(0==this.o)c=Tr;else{c=Math.abs(c);var d=Ur(this,1>=c?0:Vr(c)).Xe;c=Ur(this,d+Vr(Wr(this,c/Math.pow(10,d)).gh))}a/=Math.pow(10,c.Xe);b.push(c.prefix);d=0>a||0==a&&0>1/a;b.push(d?this.h:this.w);if(isFinite(a))if(a=a*(d?-1:1)*this.a,this.F){var e=a;if(0==e)Xr(this,e,this.b,b),Yr(this,0,b);else{a=Math.floor(Math.log(e)/Math.log(10)+2E-15);var f=Math.pow(10,a);isFinite(f)&&0!==f?e/=f:(f=Math.pow(10,Math.floor(a/2)),e=e/f/f,1==a%
2&&(e=0<a?e/10:10*e));f=this.b;if(1<this.B&&this.B>this.b){for(;0!=a%this.B;)e*=10,a--;f=1}else 1>this.b?(a++,e/=10):(a-=this.b-1,e*=Math.pow(10,this.b-1));Xr(this,e,f,b);Yr(this,a,b)}}else Xr(this,a,this.b,b);else b.push(dq.Ie);b.push(d?this.v:this.A);b.push(c.li);return b.join("")};
var Wr=function(a,b){var c=Math.pow(10,a.j),d;if(0>=a.H)d=Math.round(b*c);else{d=b*c;var e=a.j;d&&(a=a.H-Vr(d)-1,a<-e?(e=Math.pow(10,e),d=Math.round(d/e)*e):(e=Math.pow(10,a),d=Math.round(d*e)/e));d=Math.round(d)}isFinite(d)?(b=Math.floor(d/c),c=Math.floor(d-b*c)):c=0;return{gh:b,dk:c}},Xr=function(a,b,c,d){if(a.f>a.j)throw Error("Min value must be less than max value");d||(d=[]);b=Wr(a,b);var e=Math.pow(10,a.j),f=b.gh,g=b.dk,m=0<a.f||0<g||!1;b=a.f;m&&(b=a.f);for(var q="",y=f;1E20<y;)q="0"+q,y=Math.round(y/
10);var q=y+q,D=dq.bg,y=dq.Ne.charCodeAt(0),V=q.length,fa=0;if(0<f||0<c){for(f=V;f<c;f++)d.push(String.fromCharCode(y));if(2<=a.g.length)for(c=1;c<a.g.length;c++)fa+=a.g[c];c=V-fa;if(0<c)for(var f=a.g,fa=V=0,xa,rd=dq.He,ag=q.length,He=0;He<ag;He++){if(d.push(String.fromCharCode(y+1*Number(q.charAt(He)))),1<ag-He)if(xa=f[fa],He<c){var MP=c-He;(1===xa||0<xa&&1===MP%xa)&&d.push(rd)}else fa<f.length&&(He===c?fa+=1:xa===He-c-V+1&&(d.push(rd),V+=xa,fa+=1))}else{c=q;q=a.g;f=dq.He;xa=c.length;rd=[];for(V=
q.length-1;0<=V&&0<xa;V--){fa=q[V];for(ag=0;ag<fa&&0<=xa-ag-1;ag++)rd.push(String.fromCharCode(y+1*Number(c.charAt(xa-ag-1))));xa-=fa;0<xa&&rd.push(f)}d.push.apply(d,rd.reverse())}}else m||d.push(String.fromCharCode(y));(a.ia||m)&&d.push(D);a=""+(g+e);for(e=a.length;"0"==a.charAt(e-1)&&e>b+1;)e--;for(f=1;f<e;f++)d.push(String.fromCharCode(y+1*Number(a.charAt(f))))},Yr=function(a,b,c){c.push(dq.fg);0>b?(b=-b,c.push(dq.Ti)):a.K&&c.push(dq.bj);b=""+b;for(var d=dq.Ne,e=b.length;e<a.J;e++)c.push(d);c.push(b)},
Sr=function(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=dq.Ne.charCodeAt(0);return b<=a&&a<b+10?a-b:-1},Rr=function(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case ";":return d;case "\u00a4":if(c[0]+1<f&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.u;else switch(a.N){case 0:d+=bq[a.u][1];break;case 2:var g=a.u,m=bq[g],d=d+(g==m[1]?g:g+" "+
m[1]);break;case 1:d+=bq[a.u][2]}break;case "%":if(!a.m&&1!=a.a)throw Error("Too many percent/permill");if(a.m&&100!=a.a)throw Error("Inconsistent use of percent/permill characters");a.a=100;a.m=!1;d+=dq.kg;break;case "\u2030":if(!a.m&&1!=a.a)throw Error("Too many percent/permill");if(a.m&&1E3!=a.a)throw Error("Inconsistent use of percent/permill characters");a.a=1E3;a.m=!1;d+=dq.lg;break;default:d+=g}}return d},Tr={prefix:"",li:"",Xe:0},Ur=function(a,b){a=1==a.o?aq.Zf:aq.xi;null==a&&(a=aq.Zf);if(3>
b)return Tr;b=Math.min(14,b);var c=a[Math.pow(10,b)];for(--b;!c&&3<=b;)c=a[Math.pow(10,b)],b--;if(!c)return Tr;a=c.other;return a&&"0"!=a?(a=/([^0]*)(0+)(.*)/.exec(a))?{prefix:a[1],li:a[3],Xe:b+1-(a[2].length-1)}:Tr:Tr},Vr=function(a){if(!isFinite(a))return 0<a?a:0;for(var b=0;1<=(a/=10);)b++;return b};var Zr=new Nq("pVbxBc"),$r=new Nq("n73qwf");var bs=function(){this.A=new as;this.j=new Qq(1E3,36E4);this.h=6E4;this.m=!1;this.u=[]};h=bs.prototype;h.toString=function(){return"<# "+this.a+" to "+(this.g||"")+" for "+this.w+">"};h.Wc=function(a){this.ia=a;return this};h.gi=function(a){this.g=a;return this};h.Sh=function(a){this.w=a;return this};h.di=function(a){this.H=a;return this};h.hi=function(a){this.o=a;return this};h.qd=function(){return null!=this.F?this.F:{}};h.Mf=function(a){this.B=a;return this};h.Nf=function(a){this.b=a;return this};
h.ii=function(a){this.f=a;return this};h.je=function(){return this.A};h.Ul=function(a){this.v=a;return this};h.Rl=function(a){this.h=a;return this};var cs=function(a){var b=a.j.f,b=Math.round(.5*b)+Math.floor(Math.random()*b);Rq(a.j);return Math.min(b+0,36E4)};bs.prototype.cancel=function(){this.m=!0;this.Nf("c")};var as=function(){};as.prototype.bi=function(a){this.a=a;return this};as.prototype.ci=function(a){this.b=a;return this};as.prototype.callback=function(a){this.a(a)};var ds=!kc&&!ic||ic&&9<=Number(Dc)||kc&&Cc("1.9.1");ic&&Cc("9");var hs=function(a){this.h=a;this.b=this.a=this.g=null;a=dq;var b=aq;if(es!==a||fs!==b)es=a,fs=b,gs=new Qr(1);this.j=gs},es=null,fs=null,gs=null,is=/'([{}#].*?)'/g,js=/''/g;hs.prototype.format=function(a){if(this.h){this.g=[];var b=ks(this,this.h);this.b=ls(this,b);this.h=null}if(this.b&&0!=this.b.length)for(this.a=u(this.g),b=[],ms(this,this.b,a,!1,b),a=b.join("");0<this.a.length;)a=a.replace(this.f(this.a),this.a.pop());else a="";return a};
var ms=function(a,b,c,d,e){for(var f=0;f<b.length;f++)switch(b[f].type){case 4:e.push(b[f].value);break;case 3:var g=b[f].value,m=a,q=e,y=c[g];k(y)?(m.a.push(y),q.push(m.f(m.a))):q.push("Undefined parameter - "+g);break;case 2:g=b[f].value;m=e;q=g.Vd;k(c[q])?(q=g[c[q]],k(q)||(q=g.other),ms(a,q,c,d,m)):m.push("Undefined parameter - "+q);break;case 0:g=b[f].value;ns(a,g,c,hq,d,e);break;case 1:g=b[f].value;ns(a,g,c,fq,d,e);break;default:tb("Unrecognized block type: "+b[f].type)}},ns=function(a,b,c,d,
e,f){var g=b.Vd,m=b.zg,q=+c[g];isNaN(q)?f.push("Undefined or invalid parameter - "+g):(m=q-m,g=b[c[g]],k(g)||(d=a.j.X?d(m,a.j.X()):d(m),g=b[d],k(g)||(g=b.other)),b=[],ms(a,g,c,e,b),c=b.join(""),e?f.push(c):(a=a.j.format(m),f.push(c.replace(/#/g,a))))},ks=function(a,b){var c=a.g,d=n(a.f,a);b=b.replace(js,function(){c.push("'");return d(c)});return b=b.replace(is,function(a,b){c.push(b);return d(c)})},os=function(a){var b=0,c=[],d=[],e=/[{}]/g;e.lastIndex=0;for(var f;f=e.exec(a);){var g=f.index;"}"==
f[0]?(c.pop(),0==c.length&&(f={type:1},f.value=a.substring(b,g),d.push(f),b=g+1)):(0==c.length&&(b=a.substring(b,g),""!=b&&d.push({type:0,value:b}),b=g+1),c.push("{"))}b=a.substring(b);""!=b&&d.push({type:0,value:b});return d},ps=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,qs=/^\s*(\w+)\s*,\s*selectordinal\s*,/,rs=/^\s*(\w+)\s*,\s*select\s*,/,ls=function(a,b){var c=[];b=os(b);for(var d=0;d<b.length;d++){var e={};if(0==b[d].type)e.type=4,e.value=b[d].value;else if(1==b[d].type){var f=b[d].value;
switch(ps.test(f)?0:qs.test(f)?1:rs.test(f)?2:/^\s*\w+\s*/.test(f)?3:5){case 2:e.type=2;e.value=ss(a,b[d].value);break;case 0:e.type=0;e.value=ts(a,b[d].value);break;case 1:e.type=1;e.value=us(a,b[d].value);break;case 3:e.type=3;e.value=b[d].value;break;default:tb("Unknown block type for pattern: "+b[d].value)}}else tb("Unknown part of the pattern.");c.push(e)}return c},ss=function(a,b){var c="";b=b.replace(rs,function(a,b){c=b;return""});var d={};d.Vd=c;b=os(b);for(var e=0;e<b.length;){var f=b[e].value;
e++;if(1==b[e].type)var g=ls(a,b[e].value);else tb("Expected block type.");d[f.replace(/\s/g,"")]=g;e++}return d},ts=function(a,b){var c="",d=0;b=b.replace(ps,function(a,b,e){c=b;e&&(d=parseInt(e,10));return""});var e={};e.Vd=c;e.zg=d;b=os(b);for(var f=0;f<b.length;){var g=b[f].value;f++;if(1==b[f].type)var m=ls(a,b[f].value);else tb("Expected block type.");e[g.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=m;f++}return e},us=function(a,b){var c="";b=b.replace(qs,function(a,b){c=b;return""});var d={};d.Vd=c;
d.zg=0;b=os(b);for(var e=0;e<b.length;){var f=b[e].value;e++;if(1==b[e].type)var g=ls(a,b[e].value);else tb("Expected block type.");d[f.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=g;e++}return d};hs.prototype.f=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};var vs=chrome.i18n.getMessage("1522140683318860351"),ws=chrome.i18n.getMessage("4246483347873264186"),xs=chrome.i18n.getMessage("5991427458288444010"),ys=chrome.i18n.getMessage("6063910461797960050"),zs=chrome.i18n.getMessage("7735695102441495789"),As=chrome.i18n.getMessage("4575332923598659024"),Bs=chrome.i18n.getMessage("2297080986956220930"),Cs=new hs(Bs);var Ds=function(a,b){this.b=a;this.f=b;this.l=v("mr.cloud.calendar.CalendarService")},Hs=function(a){return Es(a,a.f.a).then(function(b){x(a.l,Fs(b.length)+" events discovered before filtering.");return Gs(a,b)},function(b){w(a.l,"Error getting Hangouts from calendar.",b);return[]})},Fs=function(a){return 20<a?"20+":a.toString()},Es=function(a,b){var c=Date.now();return Is(a,b,new Date(c),new Date(c+9E5)).then(function(b){return b.filter(a.a)})};
Ds.prototype.a=function(a){return!(!a.start||!a.end||a.start.date||a.end.date||!a.start.dateTime||!a.end.dateTime)};
var Is=function(a,b,c,d){b=Lq(Hp.a,["calendars",b,"events"],{timeMin:c.toJSON(),timeMax:d.toJSON(),singleEvents:!0});z(a.l,"Retrieving Hangouts from Calendar: "+b);return Mq(a.b,b,"GET").then(function(a){return a.items?a.items:[]})},Gs=function(a,b){var c=[];b.filter(function(a){return a.hangoutLink}).forEach(function(b){var d=new im(b.hangoutLink);if("meet.google.com"==d.mb)c.push(new zq(!0,d.a.substring(1),void 0,void 0,b.summary));else if(d=d.a.substring(12).split("/"),2==d.length){var f=ja(d),
d=f.next().value,f=f.next().value,g,m;-1!=d.indexOf(".")&&(g=f,m=d);c.push(new zq(!1,f+"@"+d,m,g,b.summary,void 0))}else w(a.l,"Invalid hangout link from calendar event: "+b.hangoutLink)});x(a.l,Fs(c.length)+" events discovered with Hangout links.");return c};var Js=function(a){this.a=a;this.l=v("mr.cloud.mesi.MesiService")},Ls=function(a){var b=Ip.a;.1>Math.random()&&(b=b.replace("v1","v1_preprod"));b=Lq(b,["hangouts","search"]);x(a.l,"Retrieving Hangouts from MESI: "+b);return Mq(a.a,b,"POST",Ks).then(function(a){var b=[];a.result&&(b=a.result.map(function(a){var b=a.hangout,c=b.meeting_room_name,d;b.meeting_domain?d=b.meeting_domain:"BUSINESS"==b.type&&b.company_title&&(d=b.company_title.toLowerCase());var e=Cs.format({ORGANIZER:"",PARTICIPANTS:0});
if((a=a.participant)&&0<a.length)var y=a[0].display_name,e=a.reduce(function(a,b){a.add(b.user_id);"ORGANIZER"==b.role&&(y=b.display_name);return a},new Set),e=Cs.format({ORGANIZER:y,PARTICIPANTS:e.size});return c&&d?new zq(!1,c+"@"+d,d,c,e,b.hangout_id):new zq(!1,b.hangout_id,d,c,e,b.hangout_id)}));return b})},Ks={request_header:{client_version:{client_id:"39"}},search_sources:["0"]};var Ms=0,Ns=0,Os=function(a){var b=0>a;a=Math.abs(a);var c=a>>>0;a=Math.floor((a-c)/4294967296);a>>>=0;b&&(a=~a>>>0,c=(~c>>>0)+1,4294967295<c&&(c=0,a++,4294967295<a&&(a=0)));Ms=c;Ns=a},Ps=function(a){if(a.constructor===Uint8Array)return a;if(a.constructor===ArrayBuffer)return new Uint8Array(a);if(a.constructor===Array)return new Uint8Array(a);if(a.constructor===String)return ik(a);tb("Type not convertible to Uint8Array.");return new Uint8Array(0)};var G=function(){},Qs="function"==typeof Uint8Array;G.prototype.fk=function(){return this.kh};
var H=function(a,b,c,d,e){a.a=null;b||(b=c?[c]:[]);a.kh=c?String(c):void 0;a.w=0===c?-1:0;a.f=b;a:{if(a.f.length&&(b=a.f.length-1,(c=a.f[b])&&"object"==typeof c&&!ta(c)&&!(Qs&&c instanceof Uint8Array))){a.m=b-a.w;a.b=c;break a}-1<d?(a.m=d,a.b=null):a.m=Number.MAX_VALUE}a.A={};if(e)for(d=0;d<e.length;d++)b=e[d],b<a.m?(b+=a.w,a.f[b]=a.f[b]||Rs):a.b[b]=a.b[b]||Rs},Rs=Object.freeze?Object.freeze([]):[],Us=function(a,b){var c=Ss,d=Ts.prototype.u,e;for(e in c){var f=c[e],g=f.ir;if(!f.Cg)throw Error("Message extension present that was generated without binary serialization support");
var m=d.call(a,g);if(m)if(g.ih())if(f.Tj)f.Cg.call(b,g.Kg,m,f.Tj);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else f.Cg.call(b,g.Kg,m)}},I=function(a,b){if(b<a.m){b+=a.w;var c=a.f[b];return c===Rs?a.f[b]=[]:c}c=a.b[b];return c===Rs?a.b[b]=[]:c},Vs=function(a,b){a=I(a,b);return null==a?a:+a},J=function(a,b,c){a=I(a,b);return null==a?c:a},K=function(a,b,c){b<a.m?a.f[b+a.w]=c:a.b[b]=c},L=function(a,
b,c,d){a.a||(a.a={});if(!a.a[c]){var e=I(a,c);if(d||e)a.a[c]=new b(e)}return a.a[c]},M=function(a,b,c){Ws(a,b,c);b=a.a[c];b==Rs&&(b=a.a[c]=[]);return b},Ws=function(a,b,c){a.a||(a.a={});if(!a.a[c]){for(var d=I(a,c),e=[],f=0;f<d.length;f++)e[f]=new b(d[f]);a.a[c]=e}},N=function(a,b,c){a.a||(a.a={});var d=c?Xs(c):c;a.a[b]=c;K(a,b,d)},Ys=function(a,b,c){a.a||(a.a={});c=c||[];for(var d=[],e=0;e<c.length;e++)d[e]=Xs(c[e]);a.a[b]=c;K(a,b,d)},Zs=function(a,b,c,d){Ws(a,d,b);var e=a.a[b];e||(e=a.a[b]=[]);
c=c?c:new d;a=I(a,b);e.push(c);a.push(Xs(c))},$s=function(a){if(a.a)for(var b in a.a){var c=a.a[b];if(ta(c))for(var d=0;d<c.length;d++)c[d]&&Xs(c[d]);else c&&Xs(c)}},Xs=function(a){$s(a);return a.f},at=na.JSON&&na.JSON.stringify||"object"===typeof JSON&&JSON.stringify;
G.prototype.ka=Qs?function(){var a=Uint8Array.prototype.toJSON;Uint8Array.prototype.toJSON=function(){return fk(this)};try{var b=at.call(null,Xs(this),bt)}finally{Uint8Array.prototype.toJSON=a}return b}:at?function(){return at.call(null,Xs(this),bt)}:function(){return df(Xs(this),bt)};
var bt=function(a,b){if(l(b)){if(isNaN(b))return"NaN";if(Infinity===b)return"Infinity";if(-Infinity===b)return"-Infinity"}return b},dt=function(a){var b=ct[a[0]];if(!b)throw Error("Unknown JsPb message type: "+a[0]);return new b(a)};G.prototype.toString=function(){$s(this);return this.f.toString()};
G.prototype.u=function(a){if(this.b){this.a||(this.a={});var b=a.Kg;if(a.b){if(a.ih())return this.a[b]||(this.a[b]=Db(this.b[b]||[],function(b){return new a.a(b)})),this.a[b]}else if(a.ih())return!this.a[b]&&this.b[b]&&(this.a[b]=new a.a(this.b[b])),this.a[b];return this.b[b]}};
var ft=function(a,b){a=a||{};b=b||{};var c={},d;for(d in a)c[d]=0;for(d in b)c[d]=0;for(d in c)if(!et(a[d],b[d]))return!1;return!0},et=function(a,b){if(a==b)return!0;if(!ya(a)||!ya(b)||a.constructor!=b.constructor)return!1;if(Qs&&a.constructor===Uint8Array){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0}if(a.constructor===Array){for(var d=void 0,e=void 0,f=Math.max(a.length,b.length),c=0;c<f;c++){var g=a[c],m=b[c];g&&g.constructor==Object&&(d=g,g=void 0);
m&&m.constructor==Object&&(e=m,m=void 0);if(!et(g,m))return!1}return d||e?(d=d||{},e=e||{},ft(d,e)):!0}if(a.constructor===Object)return ft(a,b);throw Error("Invalid type in JSPB array");};G.prototype.clone=function(){return gt(this)};
var gt=function(a){return new a.constructor(ht(Xs(a)))},ht=function(a){var b;if(ta(a)){for(var c=Array(a.length),d=0;d<a.length;d++)null!=(b=a[d])&&(c[d]="object"==typeof b?ht(b):b);return c}if(Qs&&a instanceof Uint8Array)return new Uint8Array(a);c={};for(d in a)null!=(b=a[d])&&(c[d]="object"==typeof b?ht(b):b);return c},it=function(a,b){ct[a]=b;b.messageId=a},ct={};var jt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},kt=function(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new iq(a.clientWidth,a.clientHeight)},lt=function(a){return a?a.parentWindow||a.defaultView:window},mt=function(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=
b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(var c;c=a.firstChild;)a.removeChild(c);a.appendChild((9==a.nodeType?a:a.ownerDocument||a.document).createTextNode(String(b)))}},nt=function(a){this.a=a||na.document||document};
nt.prototype.setProperties=function(a,b){Ha(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:jt.hasOwnProperty(d)?a.setAttribute(jt[d],b):ab(d,"aria-")||ab(d,"data-")?a.setAttribute(d,b):a[d]=b})};nt.prototype.getChildren=function(a){return ds&&void 0!=a.children?a.children:Cb(a.childNodes,function(a){return 1==a.nodeType})};nt.prototype.isElement=function(a){return ya(a)&&1==a.nodeType};
nt.prototype.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};var ot=function(a,b,c,d,e,f,g){var m=ok(nk.U(),a);this.wa=new Wj(m,b,f,g,e);this.deviceId=a;this.a=c;this.model=d},pt=function(a,b,c,d,e){ot.call(this,a,b,["cloud"],"Chrome Streaming Receiver",d);this.Oe=c;this.isAvailable=e};ka(pt,ot);var qt=function(a){var b=a.mb,c;a.Mc&&a.b()!=a.Mc&&(c=a.Mc);ot.call(this,a.getId(),a.b(),["mesi"],"Hangout",b,a.vb()?"meeting":"hangout",c);this.vb=a.vb();this.qc=a.rc||""};ka(qt,ot);var rt=function(a,b,c,d){this.b=a;this.f=b;this.h=c;this.a=d},ut=function(a,b,c,d){return st(a,b,d).then(function(b){var d;a:if(d=c.id,"done"!=b.state)d=Promise.reject(Error("Offer not executed by receiver. State: "+b.state));else{switch(b.type){case "__cloud_webrtc_session_message__":b=new Xi("ANSWER",b.a.sessionDescription);a.a.kb(b,d);break;case "knocking_cloud_webrtc_session_message":tq(0);b=new Xi("KNOCK_ANSWER",b.a.sessionDescription);a.a.kb(b,d);break;case "knock_denied":tq(1);tt(a,ws,d);break;
case "knock_timeout":tq(2);tt(a,xs,d);break;default:d=Promise.reject(Error("Invalid message type: "+b.type));break a}d=Promise.resolve()}return d})},wt=function(a,b){return vt(a.h).then(function(c){a.a.kb(new Xi("TURN_CREDENTIALS",{credentials:c}),b.id)})},st=function(a,b,c){var d=c.deviceId,e=a.f.a,e=e?new Kp(e):void 0;b=b.data;switch(c.Oe){case "owner":wq(0);break;case "manager":wq(1);break;case "user":wq(2);break;case "viewer":wq(3)}return"viewer"==c.Oe?Eq(a.b,d,b,e):Gq(a.b,d,b,e)},tt=function(a,
b,c){b=new zh(b,"warning","dismiss");b.isBlocking=!0;a.a.mh().send(b);a.a.kb(new Xi("STOP"),c)};var xt=function(a,b){this.b=a;this.a=b},yt=function(a,b,c,d){switch(b.type){case "REFRESH_AUTH":var e=d.vb,f=d.deviceId,g=d.qc;return br(a.b).then(function(){a.a.kb(new Xi("AUTH_READY",{vb:e,Ua:f,qc:g}),c.id)});case "LOCAL_PRESENT":return a.a.kb(new Xi("AUTH_READY",{vb:d.vb,Ua:d.deviceId,qc:d.qc,cc:!b.data.local}),c.id),Promise.resolve();case "STATUS_REQUEST":return a.a.kb(b,c.id),Promise.resolve();case "STATUS_RESPONSE":return a.a.kb(b,c.id,!0),b.data.routeDescription||a.a.kb(b,c.id),Promise.resolve();
case "HANGOUT_INACTIVE":return a.a.uc(c,4,new zh(zs,"warning","dismiss"));case "HANGOUT_INVALID":return a.a.uc(c,3,new zh(As,"warning","dismiss"));default:return Promise.reject(Error("Unknown type: "+b.type))}};var zt=function(a,b,c){this.b=a;this.f=b;this.a=c},At=function(a,b,c,d,e){return new Promise(function(f){switch(b){case "cloud":case "mesi":break;default:throw Error("Unrecognized channel type");}if(!c.type)throw Error("Message has no type");switch(c.type){case "STOP":f(a.a.uc(d,1,null));return;case "SESSION_START_SUCCESS":uq(0);break;case "SESSION_END":break;case "SESSION_FAILURE":uq(1);f(a.a.uc(d,2,new zh(vs,"warning","dismiss")));return;case "__webrtc_stats__":break;case "PRESENTATION_CONNECTION_MESSAGE":a.a.kb(c.data,
d.id,!0);break;case "OFFER":f(ut(a.b,c,d,e));return;case "GET_TURN_CREDENTIALS":f(wt(a.b,d));return;case "REFRESH_AUTH":case "LOCAL_PRESENT":case "MUTE":case "STATUS_REQUEST":case "STATUS_RESPONSE":case "HANGOUT_INACTIVE":case "HANGOUT_INVALID":f(yt(a.f,c,d,e));return;case "new_session":a.a.kb(c,d.id,!0);break;case "remove_session":a.a.kb(c,d.id,!0);a.a.terminateRoute(d.id);break;default:throw Error("Unknown type: "+c.type);}f()})};var Bt=function(a,b,c,d,e,f,g,m){this.a=null;this.o=!1;this.v=Qa();this.b=[];this.m=a?encodeURIComponent(String(a)):null;this.u=null;!d&&b&&(this.u=b);this.J=c||null;this.f=!d;this.g=null!=e?e:null;this.j=f||null;this.F=!!g;this.A=m||null};r(Bt,dd);var Ct;var Dt=ug("https://apis.google.com/js/client.js");Dt instanceof tg&&Dt.constructor===tg&&Dt.b===sg?Ct=Dt.a:(tb("expected object of type Const, got '"+Dt+"'"),Ct="type_error:Const");var Et=new Cg;Et.a=Ct;
Bt.prototype.init=function(){var a=n(function(a){this.a=a;var b=oa("client.request",a),c=oa("auth",a);b&&c?this.B():a.load("client",n(this.B,this))},this),b=Ft("gapi");b?a(b.gapi):Gt(this,a);return this.v.a};
var Ft=function(a){for(var b=window,c=oa(a,b);!c&&b!=window.top&&Ht(b.parent,a);)b=b.parent,c=oa(a,b);return c?b:null},Ht=function(a,b){try{return!!a&&null!=a.location.href&&Ya(a,b)}catch(c){return!1}},Gt=function(a,b){var c=Ft("gapi_onload");if(c){var d=c.gapi_onload;c.gapi_onload=function(){d();b(c.gapi)}}else{window.gapi_onload=function(){b(window.gapi)};var e=document.createElement("script");e.src=Dg(Et);a.A&&mt(e,df(a.A));document.getElementsByTagName("head")[0].appendChild(e)}};
Bt.prototype.B=function(){for(var a=0;a<this.b.length;a++)this.b[a].ra.resolve(It(this,this.b[a].Jl));this.o=!0;this.v.resolve(this.a)};Bt.prototype.sendRequest=function(a){if(this.o)return It(this,a);var b=Qa();this.b.push({Jl:a,ra:b});return b.a};
var It=function(a,b){var c,d,e,f=oa("config.get",a.a);a.f||(c=f("googleapis.config/auth/useFirstPartyAuth"),d=f("googleapis.config/auth/useOriginToken"));null!=a.g&&(e=f("client/cors"));try{var g=oa("config.update",a.a);a.f||(g("googleapis.config/auth/useFirstPartyAuth",!1),g("googleapis.config/auth/useOriginToken",!1));null!=a.g&&g("client/cors",a.g);var m=oa("client.request",a.a),q=Jt(a);b.headers&&Wa(q,b.headers);var y={headers:q,root:a.J,path:b.path,method:b.method,body:b.body},D=b.params||{};
a.m&&!a.j?Wa(D,{key:a.m}):a.j&&Wa(D,{key:null});Oa(D)||(y.params=D);var V=Nd(m(y));b.callback&&V.then(function(a){b.callback.apply(null,[a.result,a])},function(a){b.callback.apply(null,[a.result,a])});return V}finally{g=oa("config.update",a.a),a.f||(g("googleapis.config/auth/useFirstPartyAuth",c),g("googleapis.config/auth/useOriginToken",d)),null!=a.g&&g("client/cors",e)}},Jt=function(a){if(a.f){if(a.j)return{Authorization:"Bearer "+a.j};var b=oa("auth.getAuthHeaderValueForFirstParty",a.a);return{Authorization:a.F?
b([]):b(),"X-Goog-AuthUser":a.u}}return{}};var Lt=function(a,b,c){this.b=null;this.m=this.w=this.a=this.h=this.g=0;this.j=!1;a&&Kt(this,a,b,c)},Mt=[],Nt=function(a,b,c){if(Mt.length){var d=Mt.pop();a&&Kt(d,a,b,c);return d}return new Lt(a,b,c)};Lt.prototype.clone=function(){return Nt(this.b,this.g,this.h-this.g)};Lt.prototype.clear=function(){this.b=null;this.a=this.h=this.g=0;this.j=!1};var Kt=function(a,b,c,d){a.b=Ps(b);a.g=k(c)?c:0;a.h=k(d)?a.g+d:a.b.length;a.a=a.g};Lt.prototype.reset=function(){this.a=this.g};
Lt.prototype.f=function(){var a,b=this.b;a=b[this.a+0];var c=a&127;if(128>a)return this.a+=1,c;a=b[this.a+1];c|=(a&127)<<7;if(128>a)return this.a+=2,c;a=b[this.a+2];c|=(a&127)<<14;if(128>a)return this.a+=3,c;a=b[this.a+3];c|=(a&127)<<21;if(128>a)return this.a+=4,c;a=b[this.a+4];c|=(a&15)<<28;if(128>a)return this.a+=5,c>>>0;this.a+=10;return c};Lt.prototype.v=Lt.prototype.f;
var Ot=function(a){a:{for(var b,c=0,d,e=0;4>e;e++)if(b=a.b[a.a++],c|=(b&127)<<7*e,128>b){a.w=c>>>0;a.m=0;break a}b=a.b[a.a++];c|=(b&127)<<28;d=0|(b&127)>>4;if(128>b)a.w=c>>>0,a.m=d>>>0;else{for(e=0;5>e;e++)if(b=a.b[a.a++],d|=(b&127)<<7*e+3,128>b){a.w=c>>>0;a.m=d>>>0;break a}tb("Failed to read varint, encoding is invalid.");a.j=!0}}b=a.w;c=a.m;if(a=c&2147483648)b=~b+1>>>0,c=~c>>>0,0==b&&(c=c+1>>>0);b=4294967296*c+b;return a?-b:b};Lt.prototype.o=function(){return this.v()};var Pt=function(){this.a=[]};Pt.prototype.length=function(){return this.a.length};var Qt=function(a){var b=a.a;a.a=[];return b},Rt=function(a,b,c){for(;0<c||127<b;)a.a.push(b&127|128),b=(b>>>7|c<<25)>>>0,c>>>=7;a.a.push(b)},St=function(a,b){for(;127<b;)a.a.push(b&127|128),b>>>=7;a.a.push(b)},Tt=function(a,b){if(0<=b)St(a,b);else{for(var c=0;9>c;c++)a.a.push(b&127|128),b>>=7;a.a.push(1)}},Ut=function(a,b){a.a.push(b>>>0&255);a.a.push(b>>>8&255);a.a.push(b>>>16&255);a.a.push(b>>>24&255)};var Wt=function(a,b,c,d,e){var f=this;this.g=a;this.h=b;this.b=c;this.a={};Ha(d,function(a,b){return Vt(f,b,a)});this.f=null;this.f=e?e.clone():null};Wt.prototype.getContext=function(){return this.g};Wt.prototype.xb=function(){return Sa(this.a)};var Vt=function(a,b,c){b=b.toLowerCase();null==c?delete a.a[b]:a.a[b]=c};Wt.prototype.clone=function(){return new Wt(this.g,this.h,this.b,this.a,this.f)};var Xt=function(a){dd.call(this);this.m=a;this.f={}};r(Xt,dd);var Yt=[];Xt.prototype.listen=function(a,b,c,d){return Zt(this,a,b,c,d)};var Zt=function(a,b,c,d,e,f){ta(c)||(c&&(Yt[0]=c.toString()),c=Yt);for(var g=0;g<c.length;g++){var m=je(b,c[g],d||a.handleEvent,e||!1,f||a.m||a);if(!m)break;a.f[m.key]=m}return a},au=function(a,b,c){$t(a,b,"playing",c,void 0)},$t=function(a,b,c,d,e,f){if(ta(c))for(var g=0;g<c.length;g++)$t(a,b,c[g],d,e,f);else(b=qe(b,c,d||a.handleEvent,e,f||a.m||a))&&(a.f[b.key]=b)};
Xt.prototype.v=function(a,b,c,d,e){if(ta(b))for(var f=0;f<b.length;f++)this.v(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.m||this,c=ke(c),d=!!d,b=id(a)?ud(a.sb,String(b),c,d,e):a?(a=me(a))?ud(a,b,c,d,e):null:null,b&&(te(b),delete this.f[b.key]);return this};Xt.prototype.removeAll=function(){Ha(this.f,function(a,b){this.f.hasOwnProperty(b)&&te(a)},this);this.f={}};Xt.prototype.T=function(){Xt.S.T.call(this);this.removeAll()};
Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var bu=function(a,b,c){this.j=a;this.h=b;this.a=new Map;this.f=new Map;this.b=null;this.g=c};bu.prototype.Rc=function(){var a=this.b+this.g;if(null==this.b||a<Date.now())this.b=Date.now(),cu(this);return Array.from(this.a.values())};bu.prototype.ic=function(a){return this.a.get(a)||null};
var cu=function(a){a.j().then(function(b){du(a,b)})},du=function(a,b){var c=new Map(a.a),d=new Map,e=new Map,f=[],g=[];b.forEach(function(a){var b=a.wa.id;d.set(b,a);e.set(b,a.deviceId);c.has(b)?c.has(b)&&JSON.stringify(c.get(b))!=JSON.stringify(a)&&g.push(a.wa):f.push(a.wa);c.delete(b)});b=[].concat(la(c.values())).map(function(a){return a.wa});a.f.clear();a.f=e;a.a.clear();a.a=d;eu(a,f,g,b)},eu=function(a,b,c,d){0<b.length&&a.h.rf(b);0<c.length&&a.h.nh(c);0<d.length&&a.h.oe(d)},gu=function(a){for(var b=
{},c=ja(a.a.entries()),d=c.next();!d.done;d=c.next()){var e=ja(d.value),d=e.next().value,e=e.next().value;b[d]=e}c={};d=ja(a.f.entries());for(e=d.next();!e.done;e=d.next()){var f=ja(e.value),e=f.next().value,f=f.next().value;c[e]=f}return new fu(b,c,a.b)},hu=function(a,b){for(var c in b.sinks){var d=b.sinks[c],e=null;"Hangout"==d.model?e=new qt(new zq(d.vb,d.deviceId,d.wa.domain,d.wa.description,d.wa.friendlyName,d.qc)):"Chrome Streaming Receiver"==d.model&&(e=new pt(d.deviceId,d.wa.friendlyName,
d.Oe,d.wa.domain,d.isAvailable));a.a.set(c,e)}for(c in b.a)a.f.set(c,b.a[c]);b.b&&(a.b=b.b)},fu=function(a,b,c){this.sinks=a;this.a=b;this.b=c};var iu=function(a){this.a=a},Lq=function(a,b,c){var d="";b.forEach(function(a){d+="/"+encodeURIComponent(a)});a=new im(a+d);c&&(c=Bm(c),nm(a,c));return a},Mq=function(a,b,c,d){return a.a.getAuthToken().then(function(e){var f=ju(e);return ku(f,b,c,d).catch(function(f){if("INVALID_ACCESS_ERROR"==f)return lu(a,e,b,c,d);throw f;})})},lu=function(a,b,c,d,e){return ar(b).then(function(){return Mq(a,c,d,e)})},ku=function(a,b,c,d){return new Promise(function(e,f){a.sendRequest(mu(b,c,function(a){a&&!a.error?
e(a):a&&401==a.error.code?f("INVALID_ACCESS_ERROR"):f(a&&a.error?a.error.errors?a.error.errors[0]:a:Error(a))},d))})},ju=function(a){a=new Bt(void 0,void 0,void 0,!1,!1,a);a.init();return a},mu=function(a,b,c,d){a={callback:c,method:b,path:a.toString()};d&&(a.body=d);return a};var nu=function(a){this.a=a;this.l=v("mr.cloud.messaging.GcmMessageHandler")};nu.prototype.onMessage=function(a){var b=this;a=JSON.parse(a.data.notification);var c=nk.U();a.events.forEach(function(a){if(a.deviceId){var d=ok(c,a.deviceId);switch(a.type){case "deviceCreated":ou(b,a);break;case "deviceUpdated":pu(b,a,d);break;case "deviceDeleted":qu(b.a,{sinkId:d});break;default:z(b.l,function(){return"[unhandled event] "+JSON.stringify(a)})}}else b.l.error("Device ID not provided")})};
var ou=function(a,b){var c=Sp(b,"statePatch","_cloudCast","settings","receiverName");"string"!=typeof c?a.l.error("Receiver name not a string: "+c):(b=new pt(b.deviceId,c,"owner","default",!0),a=a.a,a.a.a.set(b.wa.id,b),a.a.b=Date.now(),a.f.rf([b.wa]))},pu=function(a,b,c){b=Sp(b,"statePatch","_cloudCast","appStatus");if("string"!=typeof b)a.l.error("App status not a string: "+b);else if(a=a.a,b="available"==b,c=a.a.ic(c))c.isAvailable=b,a.a.b=Date.now(),a.f.nh([c.wa])};var ru=function(a,b,c){this.a=Nt(a,b,c);this.b=this.f=-1;this.h=!1};ru.prototype.reset=function(){this.a.reset();this.b=this.f=-1};
var su=function(a){var b=a.a;if(b.a==b.h)return!1;(b=a.h)||(b=a.a,b=b.j||0>b.a||b.a>b.h);if(b)return tb("Decoder hit an error"),!1;var c=a.a.f(),b=c>>>3,c=c&7;if(0!=c&&5!=c&&1!=c&&2!=c&&3!=c&&4!=c)return tb("Invalid wire type"),a.h=!0,!1;a.f=b;a.b=c;return!0},tu=function(a){switch(a.b){case 0:if(0!=a.b)tb("Invalid wire type for skipVarintField"),tu(a);else{for(a=a.a;a.b[a.a]&128;)a.a++;a.a++}break;case 1:1!=a.b?(tb("Invalid wire type for skipFixed64Field"),tu(a)):(a=a.a,a.a+=8);break;case 2:if(2!=
a.b)tb("Invalid wire type for skipDelimitedField"),tu(a);else{var b=a.a.f();a=a.a;a.a+=b}break;case 5:5!=a.b?(tb("Invalid wire type for skipFixed32Field"),tu(a)):(a=a.a,a.a+=4);break;case 3:b=[a.f];do{if(!su(a)){tb("Unmatched start-group tag: stream EOF");a.h=!0;break}if(3==a.b)b.push(a.f);else if(4==a.b&&a.f!=b.pop()){tb("Unmatched end-group tag");a.h=!0;break}}while(0<b.length);break;default:tb("Invalid wire encoding for field.")}},uu=function(a,b,c){var d=a.a.h,e=a.a.f(),e=a.a.a+e;a.a.h=e;c(b,
a);a.a.a=e;a.a.h=d},vu=function(a){var b=a.a.f();a=a.a;for(var c=a.b,d=a.a,b=d+b,e=[],f="";d<b;){var g=c[d++];if(128>g)e.push(g);else if(192>g)continue;else if(224>g){var m=c[d++];e.push((g&31)<<6|m&63)}else if(240>g){var m=c[d++],q=c[d++];e.push((g&15)<<12|(m&63)<<6|q&63)}else if(248>g){var m=c[d++],q=c[d++],y=c[d++],g=(g&7)<<18|(m&63)<<12|(q&63)<<6|y&63,g=g-65536;e.push((g>>10&1023)+55296,(g&1023)+56320)}8192<=e.length&&(f+=String.fromCharCode.apply(null,e),e.length=0)}f+=String.fromCharCode.apply(null,
e);a.a=d;return f};var O=function(){this.f=[];this.b=0;this.a=new Pt},xu=function(a,b){wu(a,b,2);b=Qt(a.a);a.f.push(b);a.b+=b.length;b.push(a.b);return b},yu=function(a,b){for(var c=b.pop(),c=a.b+a.a.length()-c;127<c;)b.push(c&127|128),c>>>=7,a.b++;b.push(c);a.b++};O.prototype.reset=function(){this.f=[];Qt(this.a);this.b=0};
var P=function(a){for(var b=new Uint8Array(a.b+a.a.length()),c=a.f,d=c.length,e=0,f=0;f<d;f++){var g=c[f];b.set(g,e);e+=g.length}c=Qt(a.a);b.set(c,e);a.f=[b];return b},wu=function(a,b,c){St(a.a,8*b+c)},zu=function(a,b,c){null!=c&&(wu(a,b,0),St(a.a,c))},Q=function(a,b,c){null!=c&&null!=c&&(wu(a,b,0),Tt(a.a,c))},Au=function(a,b,c){null!=c&&null!=c&&(wu(a,b,0),a=a.a,Os(c),Rt(a,Ms,Ns))},Bu=function(a,b,c){null!=c&&null!=c&&(wu(a,b,0),a=a.a,Os(c),Rt(a,Ms,Ns))},Cu=function(a,b,c){if(null!=c){a:{for(var d=
new Tp(0,0),e=new Tp(0,0),f=0;f<c.length;f++){if("0">c[f]||"9"<c[f]){c=null;break a}e.a=parseInt(c[f],10);var g=Wp(d.a),d=Wp(d.b);d.b=d.a;d.a=0;d=g.add(d).add(e)}c=d}wu(a,b,0);Rt(a.a,c.a,c.b)}},Du=function(a,b,c){if(null!=c){wu(a,b,5);a=a.a;var d=c,d=(c=0>d?1:0)?-d:d;0===d?0<1/d?Ms=Ns=0:(Ns=0,Ms=2147483648):isNaN(d)?(Ns=0,Ms=2147483647):3.4028234663852886E38<d?(Ns=0,Ms=(c<<31|2139095040)>>>0):1.1754943508222875E-38>d?(d=Math.round(d/Math.pow(2,-149)),Ns=0,Ms=(c<<31|d)>>>0):(b=Math.floor(Math.log(d)/
Math.LN2),d*=Math.pow(2,-b),d=Math.round(8388608*d)&8388607,Ns=0,Ms=(c<<31|b+127<<23|d)>>>0);Ut(a,Ms)}},R=function(a,b,c){null!=c&&(wu(a,b,0),a.a.a.push(c?1:0))},S=function(a,b,c){null!=c&&(wu(a,b,0),Tt(a.a,c))},T=function(a,b,c){if(null!=c){b=xu(a,b);for(var d=a.a,e=0;e<c.length;e++){var f=c.charCodeAt(e);if(128>f)d.a.push(f);else if(2048>f)d.a.push(f>>6|192),d.a.push(f&63|128);else if(65536>f)if(55296<=f&&56319>=f&&e+1<c.length){var g=c.charCodeAt(e+1);56320<=g&&57343>=g&&(f=1024*(f-55296)+g-56320+
65536,d.a.push(f>>18|240),d.a.push(f>>12&63|128),d.a.push(f>>6&63|128),d.a.push(f&63|128),e++)}else d.a.push(f>>12|224),d.a.push(f>>6&63|128),d.a.push(f&63|128)}yu(a,b)}},Eu=function(a,b,c){null!=c&&(c=Ps(c),wu(a,b,2),St(a.a,c.length),b=Qt(a.a),a.f.push(b),a.f.push(c),a.b+=b.length+c.length)},U=function(a,b,c,d){null!=c&&(b=xu(a,b),d(c,a),yu(a,b))},Fu=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++){var e=a,f=c[d];null!=f&&(wu(e,b,0),Tt(e.a,f))}},Gu=function(a,b,c){if(null!=c)for(var d=0;d<
c.length;d++)zu(a,b,c[d])},Hu=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++){var e=a,f=c[d];null!=f&&(wu(e,b,5),Ut(e.a,f))}},Iu=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)S(a,b,c[d])},Ju=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)T(a,b,c[d])},W=function(a,b,c,d){if(null!=c)for(var e=0;e<c.length;e++){var f=xu(a,b);d(c[e],a);yu(a,f)}},Ku=function(a,b,c,d){if(null!=c)for(var e=0;e<c.length;e++)wu(a,b,3),d(c[e],a),wu(a,b,4)},Lu=function(a,b,c){if(null!=c&&c.length){b=xu(a,
b);for(var d=0;d<c.length;d++)Tt(a.a,c[d]);yu(a,b)}};var Mu=function(){B.call(this)};r(Mu,B);var Nu=function(){B.call(this)};r(Nu,B);qa(Nu);var Ou=function(a){H(this,a,0,-1,null)};r(Ou,G);Ou.prototype.s=function(){var a=new O;Pu(this,a);return P(a)};var Pu=function(a,b){var c;c=L(a,Qu,1);null!=c&&U(b,1,c,Ru);c=L(a,Su,2);null!=c&&U(b,2,c,Tu);c=L(a,Su,3);null!=c&&U(b,3,c,Tu);c=L(a,Uu,4);null!=c&&U(b,4,c,Vu)},Qu=function(a){H(this,a,0,-1,null)};r(Qu,G);Qu.prototype.s=function(){var a=new O;Ru(this,a);return P(a)};var Ru=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&S(b,2,c)},Su=function(a){H(this,a,0,-1,null)};r(Su,G);
Su.prototype.s=function(){var a=new O;Tu(this,a);return P(a)};
var Tu=function(a,b){var c;c=I(a,1);null!=c&&Q(b,1,c);c=I(a,2);null!=c&&Q(b,2,c);c=I(a,3);if(null!=c&&(a=c,null!=a)){wu(b,3,1);b=b.a;var d=a,d=(a=0>d?1:0)?-d:d;0===d?(Ns=0<1/d?0:2147483648,Ms=0):isNaN(d)?(Ns=2147483647,Ms=4294967295):1.7976931348623157E308<d?(Ns=(a<<31|2146435072)>>>0,Ms=0):2.2250738585072014E-308>d?(d/=Math.pow(2,-1074),Ns=(a<<31|d/4294967296)>>>0,Ms=d>>>0):(c=Math.floor(Math.log(d)/Math.LN2),1024==c&&(c=1023),d*=Math.pow(2,-c),Ns=(a<<31|c+1023<<20|1048576*d&1048575)>>>0,Ms=4503599627370496*
d>>>0);Ut(b,Ms);Ut(b,Ns)}},Uu=function(a){H(this,a,0,-1,null)};r(Uu,G);Uu.prototype.s=function(){var a=new O;Vu(this,a);return P(a)};var Vu=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&Au(b,3,c);c=I(a,4);null!=c&&Au(b,4,c)};var Wu=function(a){H(this,a,0,-1,null)};r(Wu,G);Wu.prototype.s=function(){var a=new O;Xu(this,a);return P(a)};var Xu=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};Wu.prototype.V=function(){return I(this,1)};Wu.prototype.R=function(a){K(this,1,a)};var Ts=function(a){H(this,a,0,1,null)};r(Ts,G);Ts.prototype.s=function(){var a=new O;Us(this,a);return P(a)};var Yu=function(a,b){Us(a,b)},Ss={};var $u=function(a){H(this,a,0,-1,Zu)};r($u,G);var Zu=[10];$u.prototype.s=function(){var a=new O;av(this,a);return P(a)};var av=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&Au(b,2,c);c=I(a,4);null!=c&&S(b,4,c);c=I(a,5);null!=c&&Au(b,5,c);c=I(a,6);null!=c&&Au(b,6,c);c=I(a,7);null!=c&&Au(b,7,c);c=I(a,8);null!=c&&T(b,8,c);c=I(a,9);null!=c&&T(b,9,c);c=M(a,bv,10);0<c.length&&W(b,10,c,cv);c=I(a,11);null!=c&&T(b,11,c)};$u.prototype.V=function(){return I(this,1)};
$u.prototype.R=function(a){K(this,1,a)};var bv=function(a){H(this,a,0,-1,null)};r(bv,G);bv.prototype.s=function(){var a=new O;cv(this,a);return P(a)};var cv=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&Du(b,2,c)};var dv=function(a){H(this,a,0,-1,null)};r(dv,G);dv.prototype.s=function(){var a=new O;ev(this,a);return P(a)};var ev=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&Au(b,2,c)};dv.prototype.V=function(){return I(this,1)};dv.prototype.R=function(a){K(this,1,a)};var fv=function(a){H(this,a,0,-1,null)};r(fv,G);fv.prototype.s=function(){var a=new O;gv(this,a);return P(a)};var gv=function(a,b){var c;c=I(a,1);null!=c&&R(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};var hv=function(a){H(this,a,0,-1,null)};r(hv,G);hv.prototype.s=function(){var a=new O;iv(this,a);return P(a)};var iv=function(a,b){var c;c=I(a,1);null!=c&&R(b,1,c);c=I(a,2);null!=c&&S(b,2,c)};var jv=function(a){H(this,a,0,-1,null)};r(jv,G);jv.prototype.s=function(){var a=new O;kv(this,a);return P(a)};var kv=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&Bu(b,2,c);c=I(a,3);null!=c&&Bu(b,3,c);c=I(a,4);null!=c&&Bu(b,4,c)};jv.prototype.ub=function(){return I(this,4)};var lv=function(a){H(this,a,0,-1,null)};r(lv,G);lv.prototype.s=function(){var a=new O;mv(this,a);return P(a)};var mv=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&T(b,4,c)};var nv=function(a){H(this,a,0,-1,null)};r(nv,G);nv.prototype.s=function(){var a=new O;ov(this,a);return P(a)};var ov=function(a,b){a=I(a,1);null!=a&&Au(b,1,a)};var pv=function(a){H(this,a,0,-1,null)};r(pv,G);pv.prototype.s=function(){var a=new O;qv(this,a);return P(a)};var qv=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&S(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&Au(b,4,c);c=I(a,5);null!=c&&T(b,5,c);c=I(a,6);null!=c&&T(b,6,c);c=I(a,7);null!=c&&Q(b,7,c)};pv.prototype.ub=function(){return I(this,4)};var rv=function(a){H(this,a,0,-1,null)};r(rv,G);rv.prototype.s=function(){var a=new O;sv(this,a);return P(a)};var sv=function(a,b){a=I(a,1);null!=a&&T(b,1,a)};rv.prototype.getId=function(){return I(this,1)};var tv=function(a){H(this,a,0,-1,null)};r(tv,G);tv.prototype.s=function(){var a=new O;uv(this,a);return P(a)};var uv=function(a,b){var c;c=I(a,1);null!=c&&R(b,1,c);c=I(a,2);null!=c&&Bu(b,2,c)};var vv=function(a){H(this,a,0,-1,null)};r(vv,G);vv.prototype.s=function(){var a=new O;wv(this,a);return P(a)};var wv=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&Bu(b,2,c)};var yv=function(a){H(this,a,0,-1,xv)};r(yv,G);var xv=[6];yv.prototype.s=function(){var a=new O;zv(this,a);return P(a)};var zv=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&S(b,3,c);c=I(a,4);null!=c&&T(b,4,c);c=I(a,5);null!=c&&T(b,5,c);c=I(a,6);0<c.length&&Ju(b,6,c);c=I(a,7);null!=c&&T(b,7,c);c=I(a,8);null!=c&&S(b,8,c);c=I(a,9);null!=c&&T(b,9,c);c=I(a,10);null!=c&&T(b,10,c);c=I(a,11);null!=c&&S(b,11,c)};h=yv.prototype;h.V=function(){return I(this,1)};
h.R=function(a){K(this,1,a)};h.getTitle=function(){return I(this,9)};h.setTitle=function(a){K(this,9,a)};h.Mf=function(a){K(this,10,a)};var Av=function(a){H(this,a,0,-1,null)};r(Av,G);Av.prototype.s=function(){var a=new O;Bv(this,a);return P(a)};var Bv=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};Av.prototype.V=function(){return I(this,1)};Av.prototype.R=function(a){K(this,1,a)};var Dv=function(a){H(this,a,0,-1,Cv)};r(Dv,G);var Cv=[1];Dv.prototype.s=function(){var a=new O;Ev(this,a);return P(a)};var Ev=function(a,b){a=M(a,Fv,1);0<a.length&&W(b,1,a,Gv)},Fv=function(a){H(this,a,0,-1,null)};r(Fv,G);Fv.prototype.s=function(){var a=new O;Gv(this,a);return P(a)};var Gv=function(a,b){a=I(a,1);null!=a&&S(b,1,a)};var Hv=function(a){H(this,a,0,-1,null)};r(Hv,G);Hv.prototype.s=function(){var a=new O;Iv(this,a);return P(a)};var Iv=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};Hv.prototype.getService=function(){return I(this,1)};var Jv=function(a){H(this,a,0,-1,null)};r(Jv,G);Jv.prototype.s=function(){var a=new O;Kv(this,a);return P(a)};var Kv=function(a,b){a=I(a,1);null!=a&&T(b,1,a)};Jv.prototype.V=function(){return I(this,1)};Jv.prototype.R=function(a){K(this,1,a)};var Lv=function(a){H(this,a,0,-1,null)};r(Lv,G);Lv.prototype.s=function(){var a=new O;Mv(this,a);return P(a)};var Mv=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};Lv.prototype.V=function(){return I(this,1)};Lv.prototype.R=function(a){K(this,1,a)};Lv.prototype.M=function(){return I(this,2)};Lv.prototype.na=function(a){K(this,2,a)};var Ov=function(a){H(this,a,0,-1,Nv)};r(Ov,G);var Nv=[1];Ov.prototype.s=function(){var a=new O;Pv(this,a);return P(a)};var Pv=function(a,b){a=I(a,1);0<a.length&&Ju(b,1,a)};var Qv=function(a){H(this,a,0,-1,null)};r(Qv,G);Qv.prototype.s=function(){var a=new O;Rv(this,a);return P(a)};var Rv=function(a,b){var c;c=I(a,1);null!=c&&null!=c&&zu(b,1,c);c=I(a,2);null!=c&&null!=c&&zu(b,2,c);c=I(a,3);null!=c&&null!=c&&zu(b,3,c)};var Tv=function(a){H(this,a,0,-1,Sv)};r(Tv,G);var Sv=[8];Tv.prototype.s=function(){var a=new O;Uv(this,a);return P(a)};var Uv=function(a,b){var c;c=I(a,1);null!=c&&Q(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&S(b,3,c);c=I(a,4);null!=c&&Q(b,4,c);c=I(a,5);null!=c&&Q(b,5,c);c=I(a,6);null!=c&&Q(b,6,c);c=I(a,7);null!=c&&Q(b,7,c);c=M(a,Vv,8);0<c.length&&W(b,8,c,Wv)};Tv.prototype.getName=function(){return I(this,2)};var Xv=function(a,b){K(a,2,b)};Tv.prototype.W=function(){return I(this,3)};
Tv.prototype.Ma=function(a){K(this,3,a)};var Yv=function(a,b){Ys(a,8,b)},Vv=function(a){H(this,a,0,-1,null)};r(Vv,G);Vv.prototype.s=function(){var a=new O;Wv(this,a);return P(a)};var Wv=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};var Zv=function(a){H(this,a,0,-1,null)};r(Zv,G);Zv.prototype.s=function(){var a=new O;$v(this,a);return P(a)};var $v=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&Q(b,4,c)};var aw=function(a){H(this,a,0,-1,null)};r(aw,G);aw.prototype.s=function(){var a=new O;bw(this,a);return P(a)};var bw=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&S(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&Q(b,4,c);c=I(a,5);null!=c&&S(b,5,c);c=I(a,6);null!=c&&Q(b,6,c);c=I(a,7);null!=c&&T(b,7,c);c=I(a,8);null!=c&&Q(b,8,c);c=I(a,9);null!=c&&S(b,9,c)};aw.prototype.ua=function(){return I(this,4)};aw.prototype.W=function(){return I(this,9)};
aw.prototype.Ma=function(a){K(this,9,a)};var dw=function(a){H(this,a,0,-1,cw)};r(dw,G);var cw=[1];dw.prototype.s=function(){var a=new O;ew(this,a);return P(a)};var ew=function(a,b){var c;c=I(a,1);0<c.length&&Ju(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c)};var fw=function(a){H(this,a,0,-1,null)};r(fw,G);fw.prototype.s=function(){var a=new O;gw(this,a);return P(a)};var gw=function(a,b){var c;c=I(a,1);null!=c&&Q(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&S(b,3,c)};fw.prototype.getId=function(){return I(this,1)};fw.prototype.W=function(){return I(this,3)};fw.prototype.Ma=function(a){K(this,3,a)};var hw=function(a){H(this,a,0,-1,null)};r(hw,G);hw.prototype.s=function(){var a=new O;iw(this,a);return P(a)};var iw=function(a,b){a=I(a,1);null!=a&&T(b,1,a)};hw.prototype.h=function(){return I(this,1)};hw.prototype.oa=function(a){K(this,1,a)};var jw=function(a){H(this,a,0,-1,null)};r(jw,G);jw.prototype.s=function(){var a=new O;kw(this,a);return P(a)};var kw=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c)};h=jw.prototype;h.V=function(){return I(this,1)};h.R=function(a){K(this,1,a)};h.M=function(){return I(this,2)};h.na=function(a){K(this,2,a)};h.ga=function(){return I(this,3)};h.gl=function(a){K(this,3,a)};var lw=function(a){H(this,a,0,-1,null)};r(lw,G);lw.prototype.s=function(){var a=new O;mw(this,a);return P(a)};var mw=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&S(b,4,c)};h=lw.prototype;h.V=function(){return I(this,1)};h.R=function(a){K(this,1,a)};h.xf=function(){return I(this,2)};h.oa=function(a){K(this,2,a)};h.Qa=function(){return I(this,3)};h.il=function(a){K(this,3,a)};h.wf=function(){return I(this,4)};
h.hl=function(a){K(this,4,a)};var nw=function(a){H(this,a,0,-1,null)};r(nw,G);nw.prototype.s=function(){var a=new O;ow(this,a);return P(a)};var ow=function(a,b){a=I(a,1);null!=a&&S(b,1,a)};var pw=function(a){H(this,a,0,-1,null)};r(pw,G);pw.prototype.s=function(){var a=new O;qw(this,a);return P(a)};var qw=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};var rw=function(a){H(this,a,0,-1,null)};r(rw,G);rw.prototype.s=function(){var a=new O;sw(this,a);return P(a)};var sw=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&S(b,2,c);c=I(a,3);null!=c&&Q(b,3,c);c=I(a,4);null!=c&&T(b,4,c);c=I(a,5);null!=c&&S(b,5,c)};rw.prototype.getChannelId=function(){return I(this,1)};rw.prototype.Vb=function(){return I(this,4)};var tw=function(a){H(this,a,0,-1,null)};r(tw,G);tw.prototype.s=function(){var a=new O;uw(this,a);return P(a)};var uw=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&Q(b,2,c)};var X=function(a){H(this,a,0,-1,null)};r(X,G);X.prototype.s=function(){var a=new O;Y(this,a);return P(a)};var Y=function(a,b){var c;c=I(a,1);null!=c&&Au(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=L(a,vw,3);null!=c&&U(b,3,c,ww)};X.prototype.ub=function(){return I(this,1)};var vw=function(a){H(this,a,0,-1,null)};r(vw,G);vw.prototype.s=function(){var a=new O;ww(this,a);return P(a)};var ww=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&Au(b,2,c)};var xw=function(a){H(this,a,0,-1,null)};r(xw,G);xw.prototype.s=function(){var a=new O;yw(this,a);return P(a)};var yw=function(a,b){var c;c=I(a,1);null!=c&&Q(b,1,c);c=I(a,2);null!=c&&Q(b,2,c);c=I(a,3);null!=c&&Q(b,3,c)};xw.prototype.g=function(a){K(this,1,a)};xw.prototype.j=function(a){K(this,2,a)};var zw=function(a,b){this.b=a;this.f=b;this.a=new bu(this.zk.bind(this),b,2E4);this.h=new nu(this);Kr().addListener();rj(this);Ei("mr.cloud.discovery.CloudSinkDiscoveryService",this)};ka(zw,ui);h=zw.prototype;h.Rc=function(){var a=this;Vq(this.b).then(function(b){Wq(a.b,b)},function(){});return this.a.Rc().filter(function(a){return a.isAvailable})};h.ic=function(a){return this.a.ic(a)};
h.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(a==chrome.gcm.onMessage)this.h.onMessage.apply(this.h,[].concat(la(c)));else throw Error("Unhandled event: expected chrome.gcm.onMessage");};
h.zk=function(){return Tq(this.b,{descriptionSubstring:"Chrome Streaming Receiver"}).then(function(a){return a.map(function(a){$h("MediaRouter.Cloud.CloudReceiver.Sink.Discovered");var b=a.isAvailable()&&!(a.a.invitations&&0!=a.a.invitations.length);return new pt(a.getId(),a.b(),a.a.personalizedInfo.maxRole,"default",b)})})};h.fa=function(){return"CloudSinkDiscoveryService"};h.qa=function(){return[{cache:gu(this.a)}]};h.va=function(){var a=oj(this);a&&hu(this.a,a.cache)};
var qu=function(a,b){if(b=a.a.ic(b.sinkId))a.a.a.delete(b.wa.id),a.a.b=Date.now(),a.f.oe([b.wa])};var Aw=function(a){H(this,a,0,-1,null)};r(Aw,G);var Bw=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=vu(b);K(a,1,c);break;case 2:var c=b,d=c.a.f();c=c.a;if(0>d||c.a+d>c.b.length)c.j=!0,tb("Invalid byte length!"),c=new Uint8Array(0);else{var e=c.b.subarray(c.a,c.a+d);c.a+=d;c=e}K(a,2,c);break;default:tu(b)}return a};Aw.prototype.s=function(){var a=new O;Cw(this,a);return P(a)};
var Cw=function(a,b){var c;c=J(a,1,"");0<c.length&&T(b,1,c);a=J(a,2,"");null==a||a instanceof Uint8Array?c=a:va(a)?c=ik(a):(tb("Cannot coerce to Uint8Array: "+ra(a)),c=null);0<c.length&&Eu(b,2,c)};var Dw=function(a){H(this,a,0,-1,null)};r(Dw,G);Dw.prototype.s=function(){var a=new O;Ew(this,a);return P(a)};var Ew=function(a,b){var c;c=J(a,1,0);0!==c&&Au(b,1,c);c=J(a,2,0);0!==c&&Q(b,2,c)};var Fw=function(a){H(this,a,0,-1,null)};r(Fw,G);Fw.prototype.s=function(){var a=new O,b;b=this.getDeviceId();0<b.length&&T(a,1,b);return P(a)};Fw.prototype.getDeviceId=function(){return J(this,1,"")};var Gw=function(a){H(this,a,0,-1,null)};r(Gw,G);Gw.prototype.s=function(){var a=new O,b;b=J(this,1,"");0<b.length&&T(a,1,b);return P(a)};var Hw=function(a,b){K(a,1,b)};var Iw=function(a){H(this,a,0,-1,null)};r(Iw,G);Iw.prototype.s=function(){var a=new O,b;b=J(this,1,"");0<b.length&&T(a,1,b);return P(a)};var Jw=function(a,b){K(a,1,b)};var Lw=function(a){H(this,a,0,-1,Kw)};r(Lw,G);
var Kw=[7,13,16,17],Nw=function(a){a=new ru(a);var b=new Lw;return Mw(b,a)},Mw=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=vu(b);a.h(c);break;case 2:c=vu(b);K(a,2,c);break;case 3:c=vu(b);K(a,3,c);break;case 4:c=Ot(b.a);K(a,4,c);break;case 5:c=!!b.a.f();K(a,5,c);break;case 6:c=vu(b);K(a,6,c);break;case 7:c=vu(b);I(a,7).push(c);break;case 8:c=!!b.a.f();K(a,8,c);break;case 9:c=!!b.a.f();K(a,9,c);break;case 10:c=vu(b);K(a,10,c);break;case 11:c=Ot(b.a);K(a,11,c);break;case 12:c=new Ow;uu(b,
c,Pw);Qw(a,c);break;case 13:for(var c=b,d=b.a.o,e=c.a.f(),e=c.a.a+e,f=[];c.a.a<e;)f.push(d.call(c.a));c=f;K(a,13,c||[]);break;case 14:c=new Rw;uu(b,c,Sw);N(a,14,c);break;case 15:c=!!b.a.f();K(a,15,c);break;case 16:c=new Tw;uu(b,c,Uw);Zs(a,16,c,Tw);break;case 17:c=new Vw;uu(b,c,Ww);Zs(a,17,c,Vw);break;default:tu(b)}return a};Lw.prototype.s=function(){var a=new O;Xw(this,a);return P(a)};
var Xw=function(a,b){var c;c=a.nb();0<c.length&&T(b,1,c);c=J(a,2,"");0<c.length&&T(b,2,c);c=J(a,3,"");0<c.length&&T(b,3,c);c=J(a,4,0);0!==c&&S(b,4,c);(c=a.ge())&&R(b,5,c);c=J(a,6,"");0<c.length&&T(b,6,c);c=I(a,7);0<c.length&&Ju(b,7,c);(c=J(a,8,!1))&&R(b,8,c);(c=J(a,9,!1))&&R(b,9,c);c=J(a,10,"");0<c.length&&T(b,10,c);c=J(a,11,0);0!==c&&S(b,11,c);c=L(a,Ow,12);null!=c&&U(b,12,c,Yw);c=I(a,13);0<c.length&&Lu(b,13,c);c=L(a,Rw,14);null!=c&&U(b,14,c,Zw);(c=J(a,15,!1))&&R(b,15,c);c=M(a,Tw,16);0<c.length&&
W(b,16,c,$w);c=M(a,Vw,17);0<c.length&&W(b,17,c,ax)};Lw.prototype.nb=function(){return J(this,1,"")};Lw.prototype.h=function(a){K(this,1,a)};Lw.prototype.ge=function(){return J(this,5,!1)};var bx=function(a,b){K(a,7,b||[])},Qw=function(a,b){N(a,12,b)},Ow=function(a){H(this,a,0,-1,null)};r(Ow,G);var Pw=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=vu(b);K(a,1,c);break;default:tu(b)}return a};Ow.prototype.s=function(){var a=new O;Yw(this,a);return P(a)};
var Yw=function(a,b){a=J(a,1,"");0<a.length&&T(b,1,a)},Rw=function(a){H(this,a,0,-1,null)};r(Rw,G);var Sw=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=vu(b);K(a,1,c);break;default:tu(b)}return a};Rw.prototype.s=function(){var a=new O;Zw(this,a);return P(a)};var Zw=function(a,b){a=J(a,1,"");0<a.length&&T(b,1,a)},Tw=function(a){H(this,a,0,-1,null)};r(Tw,G);var Uw=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=vu(b);K(a,1,c);break;case 2:c=Ot(b.a);K(a,2,c);break;default:tu(b)}return a};
Tw.prototype.s=function(){var a=new O;$w(this,a);return P(a)};var $w=function(a,b){var c;c=a.zb();0<c.length&&T(b,1,c);c=J(a,2,0);0!==c&&S(b,2,c)};Tw.prototype.zb=function(){return J(this,1,"")};var Vw=function(a){H(this,a,0,-1,null)};r(Vw,G);var Ww=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=vu(b);K(a,1,c);break;case 2:c=Ot(b.a);K(a,2,c);break;default:tu(b)}return a};Vw.prototype.s=function(){var a=new O;ax(this,a);return P(a)};
var ax=function(a,b){var c;c=a.zb();0<c.length&&T(b,1,c);c=J(a,2,0);0!==c&&S(b,2,c)};Vw.prototype.zb=function(){return J(this,1,"")};var dx=function(a){H(this,a,0,-1,cx)};r(dx,G);var cx=[5],ix=function(a){a=new ru(a);for(var b=new dx;su(a)&&4!=a.b;)switch(a.f){case 1:var c=vu(a);b.g(c);break;case 2:c=vu(a);K(b,2,c);break;case 3:c=vu(a);K(b,3,c);break;case 4:c=Ot(a.a);K(b,4,c);break;case 5:c=new ex;uu(a,c,fx);Zs(b,5,c,ex);break;case 6:c=new gx;uu(a,c,hx);N(b,6,c);break;case 7:c=vu(a);K(b,7,c);break;default:tu(a)}return b};dx.prototype.s=function(){var a=new O;jx(this,a);return P(a)};
var jx=function(a,b){var c;c=a.h();0<c.length&&T(b,1,c);c=J(a,2,"");0<c.length&&T(b,2,c);c=J(a,3,"");0<c.length&&T(b,3,c);c=J(a,4,0);0!==c&&S(b,4,c);c=M(a,ex,5);0<c.length&&W(b,5,c,kx);c=L(a,gx,6);null!=c&&U(b,6,c,lx);c=J(a,7,"");0<c.length&&T(b,7,c)};dx.prototype.h=function(){return J(this,1,"")};dx.prototype.g=function(a){K(this,1,a)};var ex=function(a){H(this,a,0,-1,null)};r(ex,G);
var fx=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=vu(b);K(a,1,c);break;case 2:c=vu(b);K(a,2,c);break;case 3:c=vu(b);K(a,3,c);break;case 4:c=vu(b);a.Wc(c);break;default:tu(b)}return a};ex.prototype.s=function(){var a=new O;kx(this,a);return P(a)};var kx=function(a,b){var c;c=J(a,1,"");0<c.length&&T(b,1,c);c=J(a,2,"");0<c.length&&T(b,2,c);c=J(a,3,"");0<c.length&&T(b,3,c);c=J(a,4,"");0<c.length&&T(b,4,c)};ex.prototype.Wc=function(a){K(this,4,a)};var mx=function(a){H(this,a,0,-1,null)};
r(mx,G);var nx=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=vu(b);K(a,1,c);break;case 2:c=vu(b);K(a,2,c);break;default:tu(b)}return a};mx.prototype.s=function(){var a=new O;ox(this,a);return P(a)};var ox=function(a,b){var c;c=J(a,1,"");0<c.length&&T(b,1,c);c=J(a,2,"");0<c.length&&T(b,2,c)},px=function(a){H(this,a,0,-1,null)};r(px,G);var qx=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=Ot(b.a);K(a,1,c);break;case 2:c=vu(b);K(a,2,c);break;case 3:c=vu(b);K(a,3,c);break;default:tu(b)}return a};
px.prototype.s=function(){var a=new O;rx(this,a);return P(a)};var rx=function(a,b){var c;c=a.ie();0!==c&&S(b,1,c);c=a.zb();0<c.length&&T(b,2,c);c=J(a,3,"");0<c.length&&T(b,3,c)};px.prototype.ie=function(){return J(this,1,0)};px.prototype.zb=function(){return J(this,2,"")};var gx=function(a){H(this,a,0,-1,null)};r(gx,G);
var hx=function(a,b){for(;su(b)&&4!=b.b;)switch(b.f){case 1:var c=new mx;uu(b,c,nx);N(a,1,c);break;case 2:c=new px;uu(b,c,qx);N(a,2,c);break;case 3:c=vu(b);K(a,3,c);break;case 4:c=vu(b);K(a,4,c);break;case 5:c=vu(b);K(a,5,c);break;default:tu(b)}return a};gx.prototype.s=function(){var a=new O;lx(this,a);return P(a)};
var lx=function(a,b){var c;c=a.rd();null!=c&&U(b,1,c,ox);c=L(a,px,2);null!=c&&U(b,2,c,rx);c=J(a,3,"");0<c.length&&T(b,3,c);c=J(a,4,"");0<c.length&&T(b,4,c);c=J(a,5,"");0<c.length&&T(b,5,c)};gx.prototype.rd=function(){return L(this,mx,1)};var sx=function(a){H(this,a,0,-1,null)};r(sx,G);sx.prototype.s=function(){var a=new O,b;b=J(this,1,"");0<b.length&&T(a,1,b);b=J(this,2,"");0<b.length&&T(a,2,b);return P(a)};var tx=function(a){H(this,a,0,-1,null)};r(tx,G);tx.prototype.s=function(){var a=new O;ux(this,a);return P(a)};var ux=function(a,b){a=a.ub();0!==a&&Au(b,1,a)};tx.prototype.ub=function(){return J(this,1,0)};var vx=function(a){H(this,a,0,-1,null)};r(vx,G);vx.prototype.s=function(){var a=new O;wx(this,a);return P(a)};var wx=function(a,b){var c;c=I(a,1);null!=c&&Q(b,1,c);c=I(a,2);null!=c&&Q(b,2,c);c=I(a,3);null!=c&&Q(b,3,c);c=I(a,4);null!=c&&Q(b,4,c);c=I(a,5);null!=c&&Q(b,5,c);c=I(a,6);null!=c&&Q(b,6,c);c=I(a,7);null!=c&&Q(b,7,c);c=I(a,8);null!=c&&Q(b,8,c);c=I(a,9);null!=c&&Q(b,9,c);c=I(a,11);null!=c&&R(b,11,c);c=I(a,12);null!=c&&Q(b,12,c);c=I(a,13);null!=c&&Q(b,13,c)};var yx=function(a){H(this,a,"hc:rc",-1,xx)};r(yx,G);var xx=[7];
yx.prototype.s=function(){var a=new O,b;b=I(this,1);null!=b&&Au(a,1,b);b=I(this,2);null!=b&&T(a,2,b);b=I(this,3);null!=b&&T(a,3,b);b=I(this,4);null!=b&&T(a,4,b);b=I(this,5);null!=b&&S(a,5,b);b=I(this,6);null!=b&&T(a,6,b);b=M(this,zx,7);0<b.length&&W(a,7,b,Ax);b=I(this,8);null!=b&&Q(a,8,b);b=I(this,9);null!=b&&S(a,9,b);b=I(this,10);null!=b&&T(a,10,b);b=I(this,11);null!=b&&T(a,11,b);b=I(this,12);null!=b&&T(a,12,b);b=I(this,13);null!=b&&T(a,13,b);return P(a)};it("hc:rc",yx);
var Bx=function(a,b){K(a,2,b)};yx.prototype.V=function(){return I(this,3)};yx.prototype.R=function(a){K(this,3,a)};var Cx=function(a,b){K(a,4,b)},Dx=function(a,b){K(a,5,b)},Ex=function(a,b){K(a,8,b)},Fx=function(a,b){K(a,11,b)},zx=function(a){H(this,a,0,-1,null)};r(zx,G);zx.prototype.s=function(){var a=new O;Ax(this,a);return P(a)};var Ax=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};var Gx=function(a){H(this,a,0,-1,null)};r(Gx,G);Gx.prototype.s=function(){var a=new O,b;b=I(this,1);null!=b&&T(a,1,b);return P(a)};Gx.prototype.h=function(){return I(this,1)};Gx.prototype.g=function(a){K(this,1,a)};var Hx=function(a){H(this,a,0,-1,null)};r(Hx,G);h=Hx.prototype;h.s=function(){var a=new O,b;b=I(this,1);null!=b&&T(a,1,b);b=I(this,2);null!=b&&T(a,2,b);return P(a)};h.Dh=function(){return I(this,1)};h.Fh=function(a){K(this,1,a)};h.nb=function(){return I(this,2)};
h.Eh=function(a){K(this,2,a)};var Ix=function(a,b){B.call(this);this.a=b;this.l=If("realtime.network.ApiaryClient");a.load(n(this.Ck,this),n(this.Dk,this));this.g=0;this.f=new C;this.b=new C;F(this.l,"Created apiary client")};r(Ix,B);var Jx=function(a,b,c,d){var e="\r\n\r\n--"+d+"\r\n";d="\r\n\r\n--"+d+"--\r\n";var f=e+"Content-Type: "+a+"\r\n\r\n"+(b&&!va(b)?b.ka():b);t(c,function(a){f+=e+"Content-Type: "+a.type+"\r\nContent-transfer-encoding: "+a.a+"\r\n\r\n"+a.data+"\r\n\r\n"});return f+=d};h=Ix.prototype;h.Cd=null;
h.Ck=function(a){this.Cd=a;this.dispatchEvent("e");F(this.l,"Apiary client loaded")};h.Dk=function(){this.w||(this.Cd=null,F(this.l,"Apiary client unloaded"))};h.T=function(){var a=this.f.Ea();t(a,Ae);a=this.b.Ea();t(a,Ae)};
h.request=function(a){if(!this.w&&!a.m)if(null!=this.Cd){var b=this.g++;a.a=b;this.a&&this.a.onRequest(a);var b=a.B,c=a.qd(),d=null!=a.o?a.o:{},e=null!=a.J?a.J:"application/json";if(null!=a.f?a.f:1)d.alt="protojson",e="application/json+protobuf",null!=b&&(b=JSON.parse(b.ka()));var f=a.u;if(0<f.length){c["MIME-Version"]="1.0";var g="END_OF_PART_"+ob();c["Content-Type"]='multipart/related; boundary="'+g+'"';b=Jx(e,b,f,g)}else null!=b&&(c["Content-Type"]=e);c["Accept-Language"]=a.ia||"en";b={method:a.H,
path:a.w,params:d,headers:c,body:b};db(mb(a.g||""))||(b.root=a.g||"");F(this.l,"Sending request "+a);try{var m=this.Cd.client.request(b);a.Nf("p");null!=a.h&&this.b.set(a.a,ze(n(this.Kl,this,a),a.h||void 0));m.execute(n(this.Cl,this,a))}catch(q){Kf(this.l,"Failed to enqueue request "+df(b),q),Kx(this,a,new Nr("fatal","request_queuing",null,null),null,0)}}else E(this.l,"Request when client is not ready!")};
h.Kl=function(a){E(this.l,"Request timed out: "+a);Kx(this,a,new Nr("retry","deadline_exceeded",null,null),null,0)};
h.Cl=function(a,b,c){if(this.w||"p"!=a.b)Lx(this,a);else{var d=null,e="ok",f;Lx(this,a);var g=null,m=null;try{var q=cf(c),y=q.gapiRequest.data.body,g=q.gapiRequest.data.headers,d=mq(y)}catch(D){E(this.l,"Failed to parse the response for request "+a+": "+c,D),f="response_decoding",e="retry"}null!=b&&null!=b.error&&(m=b.error.code,E(this.l,"Request failed: "+a+": "+b.error.code+" - "+b.error.message),f="network_or_frontend",e="retry",400==b.error.code?(f="bad_request",e="fatal"):401==b.error.code?(f=
"unauthorized",e="fatal"):402==b.error.code?(f="payment_required",e="fatal"):403==b.error.code&&(f="forbidden",e="fatal"));"ok"==e&&null!=d.error&&(E(this.l,"Server returned an error for request "+a+": "+d.error.code+' "'+d.error.message+'": '+d.error.errors[0].dc),f="backend",e="retry");"ok"==e&&((b=null!=a.f?a.f:!0)&&!ua(d)||!b&&!ya(d))&&(E(this.l,"Apiary returned bad response type for request "+a+": expected "+(b?"Array":"Object")+", received "+ra(d)),f="response_format",e="retry");if("ok"==e&&
(a.Nf("o"),a.je().callback(d),"o"!=a.b))switch(f="response_callback",a.b){case "r":E(this.l,"Error processing response for request "+a+": should retry.");e="retry";break;case "d":E(this.l,"Fatal error processing response for request "+a);e="fatal";break;default:Kf(this.l,"Unexpected response state from processing the response for "+a+": "+a.b)}if("ok"==e)F(this.l,"Response processed successfully for request "+a),this.a&&this.a.b(a,d);else{b=0;if(null!=g&&null!=g["Retry-After"])try{b=1E3*parseInt(g["Retry-After"],
10),b=Math.min(Math.max(b,0),72E5)}catch(D){}Kx(this,a,new Nr(e,f,m,d),c,b)}}c=this.b.get(a.a);null!=c&&(this.b.remove(a.a),Ae(c))};var Lx=function(a,b){var c=a.f.get(b.a);null!=c&&(a.f.remove(b.a),Ae(c))},Kx=function(a,b,c,d,e){a.w||"p"!=b.b&&"r"!=b.b||(a.a&&a.a.onError(b,c,d),d=null!=b.v?b.v:0,"retry"==c.status&&0<d?(F(a.l,"Scheduling retry for request "+b),a.f.set(b.a,ze(n(a.request,a,b),Math.max(cs(b),e)))):(b.cancel(),b.je().b(c)))};var Mx=function(a,b,c){a=Rc(a,encodeURIComponent("$ct"),c);if(null==navigator.sendBeacon||!navigator.sendBeacon(a,b)){c=a;var d="POST",e=b;a=Rc(a,encodeURIComponent("$httpMethod"),"POST");a=Rc(a,encodeURIComponent("$req"),b);2048>a.length&&(c=a,d="GET",e=null);try{var f=kf(hf);f.open(d,c,!1);f.send(e)}catch(g){b=If("realtime.network.Beacon"),Kf(b,"Cannot fallback from sendBeacon",g)}}};var Nx=function(a){return{a:function(b){return a().then(function(a){return Vt(b,"Authorization","Bearer "+a)})}}};var Ox=function(a,b,c){dd.call(this);this.o=null!=c?n(a,c):a;this.v=b;this.m=n(this.ik,this);this.b=!1;this.f=0;this.g=this.a=null;this.j=[]};r(Ox,dd);h=Ox.prototype;h.hk=function(a){this.j=arguments;this.b=!1;this.a?this.g=Ea()+this.v:this.a=ze(this.m,this.v)};h.stop=function(){this.a&&(Ae(this.a),this.a=null);this.g=null;this.b=!1;this.j=[]};h.pause=function(){++this.f};h.resume=function(){this.f&&(--this.f,!this.f&&this.b&&(this.b=!1,this.o.apply(null,this.j)))};h.T=function(){this.stop();Ox.S.T.call(this)};
h.ik=function(){this.g?(this.a=ze(this.m,this.g-Ea()),this.g=null):(this.a=null,this.f?this.b=!0:(this.b=!1,this.o.apply(null,this.j)))};var Px=function(a){H(this,a,0,-1,null)};r(Px,G);Px.prototype.s=function(){var a=new O;Qx(this,a);return P(a)};var Qx=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&S(b,2,c);c=I(a,3);null!=c&&S(b,3,c)};Px.prototype.getDevice=function(){return I(this,1)};var Sx=function(a){H(this,a,0,-1,Rx)};r(Sx,G);var Rx=[14];Sx.prototype.s=function(){var a=new O;Tx(this,a);return P(a)};
var Tx=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&S(b,4,c);c=I(a,10);null!=c&&T(b,10,c);c=I(a,5);null!=c&&T(b,5,c);c=L(a,Ux,6);null!=c&&U(b,6,c,Vx);c=I(a,7);null!=c&&S(b,7,c);c=L(a,Wx,8);null!=c&&U(b,8,c,Xx);c=L(a,Yx,9);null!=c&&U(b,9,c,Zx);c=L(a,$x,11);null!=c&&U(b,11,c,ay);c=a.ie();null!=c&&U(b,12,c,by);c=I(a,13);null!=c&&S(b,13,c);c=I(a,14);0<c.length&&Ju(b,14,c)};Sx.prototype.V=function(){return I(this,1)};
Sx.prototype.R=function(a){K(this,1,a)};Sx.prototype.ie=function(){return L(this,cy,12)};var Wx=function(a){H(this,a,0,-1,null)};r(Wx,G);Wx.prototype.s=function(){var a=new O;Xx(this,a);return P(a)};var Xx=function(a,b){var c;c=I(a,1);null!=c&&Au(b,1,c);c=L(a,dy,2);null!=c&&U(b,2,c,ey);c=I(a,3);null!=c&&T(b,3,c);c=L(a,fy,4);null!=c&&U(b,4,c,gy);c=L(a,hy,5);null!=c&&U(b,5,c,iy);c=L(a,jy,6);null!=c&&U(b,6,c,ky);c=L(a,Ts,7);null!=c&&U(b,7,c,Yu)},dy=function(a){H(this,a,0,-1,null)};r(dy,G);
dy.prototype.s=function(){var a=new O;ey(this,a);return P(a)};var ey=function(a,b){var c;c=I(a,1);null!=c&&Au(b,1,c);c=I(a,2);null!=c&&Au(b,2,c)},Ux=function(a){H(this,a,0,-1,null)};r(Ux,G);Ux.prototype.s=function(){var a=new O;Vx(this,a);return P(a)};var Vx=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&S(b,2,c)},fy=function(a){H(this,a,0,-1,null)};r(fy,G);fy.prototype.s=function(){var a=new O;gy(this,a);return P(a)};
var gy=function(a,b){a=I(a,1);null!=a&&T(b,1,a)},hy=function(a){H(this,a,0,-1,null)};r(hy,G);hy.prototype.s=function(){var a=new O;iy(this,a);return P(a)};var iy=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&Au(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&T(b,4,c)};hy.prototype.getTitle=function(){return I(this,3)};hy.prototype.setTitle=function(a){K(this,3,a)};var Yx=function(a){H(this,a,0,-1,ly)};r(Yx,G);var ly=[5];Yx.prototype.s=function(){var a=new O;Zx(this,a);return P(a)};
var Zx=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&R(b,3,c);c=I(a,4);null!=c&&S(b,4,c);c=I(a,5);0<c.length&&Ju(b,5,c)},jy=function(a){H(this,a,0,-1,null)};r(jy,G);jy.prototype.s=function(){var a=new O;ky(this,a);return P(a)};var ky=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c)};jy.prototype.xa=function(){return J(this,1,0)};var $x=function(a){H(this,a,0,-1,null)};r($x,G);
$x.prototype.s=function(){var a=new O;ay(this,a);return P(a)};var ay=function(a,b){var c;c=I(a,3);null!=c&&S(b,3,c);c=I(a,4);null!=c&&Au(b,4,c);c=I(a,5);null!=c&&R(b,5,c)};$x.prototype.getCurrentState=function(){return I(this,3)};var cy=function(a){H(this,a,0,-1,null)};r(cy,G);cy.prototype.s=function(){var a=new O;by(this,a);return P(a)};var by=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&S(b,2,c)};var ny=function(a){H(this,a,0,-1,my)};r(ny,G);var my=[2,3];ny.prototype.s=function(){var a=new O;oy(this,a);return P(a)};var oy=function(a,b){var c;c=a.ta();0<c.length&&W(b,2,c,av);c=a.Ja();0<c.length&&W(b,3,c,ev)};ny.prototype.ta=function(){return M(this,$u,2)};ny.prototype.Ja=function(){return M(this,dv,3)};var py=function(a){H(this,a,0,-1,null)};r(py,G);py.prototype.s=function(){var a=new O;qy(this,a);return P(a)};var qy=function(a,b){a=L(a,tv,1);null!=a&&U(b,1,a,uv)};var ry=function(a){H(this,a,0,-1,null)};r(ry,G);ry.prototype.s=function(){var a=new O;sy(this,a);return P(a)};var sy=function(a,b){var c;c=L(a,pv,1);null!=c&&U(b,1,c,qv);c=L(a,lv,2);null!=c&&U(b,2,c,mv);c=L(a,nv,3);null!=c&&U(b,3,c,ov);c=I(a,4);null!=c&&T(b,4,c);c=I(a,5);null!=c&&R(b,5,c);c=I(a,6);null!=c&&null!=c&&zu(b,6,c);c=L(a,Px,7);null!=c&&U(b,7,c,Qx);c=I(a,8);null!=c&&T(b,8,c);c=L(a,jv,9);null!=c&&U(b,9,c,kv)};ry.prototype.Wc=function(a){K(this,4,a)};var ty=function(a){H(this,a,0,-1,null)};r(ty,G);ty.prototype.s=function(){var a=new O;uy(this,a);return P(a)};var uy=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&Cu(b,4,c);c=I(a,10);null!=c&&T(b,10,c);c=I(a,11);null!=c&&Q(b,11,c);c=I(a,5);null!=c&&Bu(b,5,c);c=I(a,6);null!=c&&Bu(b,6,c);c=I(a,7);null!=c&&T(b,7,c);c=I(a,8);null!=c&&T(b,8,c);c=L(a,vv,9);null!=c&&U(b,9,c,wv)};ty.prototype.xa=function(){return I(this,1)};var wy=function(a){H(this,a,0,-1,vy)};r(wy,G);var vy=[2,3];wy.prototype.s=function(){var a=new O;xy(this,a);return P(a)};var xy=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=a.ta();0<c.length&&W(b,2,c,zv);c=a.Ja();0<c.length&&W(b,3,c,Bv);c=a.Fa();null!=c&&U(b,4,c,Bv)};h=wy.prototype;h.C=function(){return L(this,X,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,yv,2)};h.Ja=function(){return M(this,Av,3)};h.Fa=function(){return L(this,Av,4)};var zy=function(a){H(this,a,0,-1,yy)};r(zy,G);var yy=[15,26];zy.prototype.s=function(){var a=new O;Ay(this,a);return P(a)};
var Ay=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&S(b,2,c);c=L(a,Hv,3);null!=c&&U(b,3,c,Iv);c=I(a,4);null!=c&&R(b,4,c);c=I(a,6);null!=c&&Au(b,6,c);c=I(a,7);null!=c&&Au(b,7,c);c=I(a,8);null!=c&&T(b,8,c);c=L(a,rv,9);null!=c&&U(b,9,c,sv);c=I(a,10);null!=c&&R(b,10,c);c=I(a,11);null!=c&&Au(b,11,c);c=I(a,12);null!=c&&Au(b,12,c);c=I(a,13);null!=c&&T(b,13,c);c=I(a,14);null!=c&&S(b,14,c);c=I(a,15);0<c.length&&Ju(b,15,c);c=I(a,16);null!=c&&R(b,16,c);c=I(a,24);null!=c&&S(b,24,c);c=a.rd();
null!=c&&U(b,17,c,qw);c=I(a,18);null!=c&&R(b,18,c);c=I(a,25);null!=c&&S(b,25,c);c=L(a,fv,19);null!=c&&U(b,19,c,gv);c=I(a,21);null!=c&&S(b,21,c);c=I(a,22);null!=c&&S(b,22,c);c=I(a,23);null!=c&&S(b,23,c);c=I(a,26);0<c.length&&Iu(b,26,c);c=I(a,27);null!=c&&T(b,27,c);c=I(a,28);null!=c&&T(b,28,c);c=I(a,29);null!=c&&T(b,29,c);c=I(a,30);null!=c&&T(b,30,c)};h=zy.prototype;h.V=function(){return I(this,1)};h.R=function(a){K(this,1,a)};h.W=function(){return I(this,14)};h.Ma=function(a){K(this,14,a)};
h.rd=function(){return L(this,pw,17)};var By=function(a){H(this,a,0,-1,null)};r(By,G);By.prototype.s=function(){var a=new O;Cy(this,a);return P(a)};var Cy=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=I(a,2);null!=c&&Au(b,2,c);c=I(a,3);null!=c&&T(b,3,c)};By.prototype.C=function(){return L(this,X,1)};By.prototype.D=function(a){N(this,1,a)};By.prototype.O=function(){this.D(void 0)};var Ey=function(a){H(this,a,0,-1,Dy)};r(Ey,G);var Dy=[20,8,19,26];Ey.prototype.s=function(){var a=new O;Fy(this,a);return P(a)};
var Fy=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&T(b,4,c);c=I(a,5);null!=c&&T(b,5,c);c=I(a,6);null!=c&&R(b,6,c);c=I(a,7);null!=c&&R(b,7,c);c=M(a,Gy,20);0<c.length&&W(b,20,c,Hy);c=I(a,8);0<c.length&&Ju(b,8,c);c=I(a,9);null!=c&&R(b,9,c);c=I(a,10);null!=c&&T(b,10,c);c=I(a,11);null!=c&&T(b,11,c);c=I(a,12);null!=c&&S(b,12,c);c=I(a,13);null!=c&&S(b,13,c);c=I(a,14);null!=c&&S(b,14,c);c=I(a,17);null!=c&&S(b,17,c);c=I(a,18);null!=
c&&R(b,18,c);c=I(a,19);0<c.length&&Iu(b,19,c);c=I(a,21);null!=c&&R(b,21,c);c=L(a,Ou,22);null!=c&&U(b,22,c,Pu);c=I(a,23);null!=c&&Au(b,23,c);c=I(a,24);null!=c&&S(b,24,c);c=I(a,25);null!=c&&T(b,25,c);c=I(a,26);0<c.length&&Ju(b,26,c)};h=Ey.prototype;h.V=function(){return I(this,1)};h.R=function(a){K(this,1,a)};h.M=function(){return I(this,2)};h.na=function(a){K(this,2,a)};h.ge=function(){return J(this,18,!1)};var Gy=function(a){H(this,a,0,-1,null)};r(Gy,G);
Gy.prototype.s=function(){var a=new O;Hy(this,a);return P(a)};var Hy=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&S(b,2,c)};var Jy=function(a){H(this,a,0,-1,Iy)};r(Jy,G);var Iy=[3];Jy.prototype.s=function(){var a=new O;Ky(this,a);return P(a)};var Ky=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);0<c.length&&Ju(b,3,c);c=I(a,9);null!=c&&Au(b,9,c);c=I(a,4);null!=c&&S(b,4,c);c=L(a,Dv,5);null!=c&&U(b,5,c,Ev);c=L(a,tw,7);null!=c&&U(b,7,c,uw);c=L(a,nw,8);null!=c&&U(b,8,c,ow);c=I(a,6);null!=c&&R(b,6,c)};Jy.prototype.V=function(){return I(this,1)};Jy.prototype.R=function(a){K(this,1,a)};var Ly=function(a){H(this,a,0,-1,null)};r(Ly,G);Ly.prototype.s=function(){var a=new O;My(this,a);return P(a)};var My=function(a,b){a=L(a,Ov,1);null!=a&&U(b,1,a,Pv)};var Ny=function(a){H(this,a,0,-1,null)};r(Ny,G);Ny.prototype.s=function(){var a=new O;Oy(this,a);return P(a)};var Oy=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&S(b,4,c);c=L(a,Py,5);null!=c&&U(b,5,c,Qy);c=L(a,Ry,6);null!=c&&U(b,6,c,Sy);c=L(a,Ty,7);null!=c&&U(b,7,c,Uy);c=L(a,Vy,8);null!=c&&U(b,8,c,Wy)};h=Ny.prototype;h.V=function(){return I(this,1)};h.R=function(a){K(this,1,a)};h.M=function(){return I(this,2)};
h.na=function(a){K(this,2,a)};h.ga=function(){return I(this,3)};h.vf=function(a){K(this,3,a)};h.W=function(){return I(this,4)};h.Ma=function(a){K(this,4,a)};h.Gd=function(a){N(this,5,a)};var Py=function(a){H(this,a,0,-1,null)};r(Py,G);Py.prototype.s=function(){var a=new O;Qy(this,a);return P(a)};var Qy=function(a,b){var c;c=I(a,1);null!=c&&R(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&Du(b,3,c)};Py.prototype.fc=function(){return I(this,1)};var Ry=function(a){H(this,a,0,-1,null)};r(Ry,G);
Ry.prototype.s=function(){var a=new O;Sy(this,a);return P(a)};var Sy=function(a,b){a=I(a,1);null!=a&&T(b,1,a)},Ty=function(a){H(this,a,0,-1,Xy)};r(Ty,G);var Xy=[3];Ty.prototype.s=function(){var a=new O;Uy(this,a);return P(a)};var Uy=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=L(a,xw,2);null!=c&&U(b,2,c,yw);c=M(a,Yy,3);0<c.length&&W(b,3,c,Zy)},Yy=function(a){H(this,a,0,-1,null)};r(Yy,G);Yy.prototype.s=function(){var a=new O;Zy(this,a);return P(a)};
var Zy=function(a,b){var c;c=I(a,1);null!=c&&Du(b,1,c);c=I(a,2);null!=c&&Du(b,2,c);c=I(a,3);null!=c&&Du(b,3,c);c=I(a,4);null!=c&&Du(b,4,c)};Yy.prototype.j=function(a){K(this,3,a)};Yy.prototype.g=function(a){K(this,4,a)};var Vy=function(a){H(this,a,0,-1,null)};r(Vy,G);Vy.prototype.s=function(){var a=new O;Wy(this,a);return P(a)};var Wy=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&Du(b,2,c)};var az=function(a){H(this,a,0,-1,$y)};r(az,G);var $y=[3,6];az.prototype.s=function(){var a=new O;bz(this,a);return P(a)};var bz=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=L(a,cz,2);null!=c&&U(b,2,c,dz);c=I(a,3);0<c.length&&Ju(b,3,c);c=I(a,4);null!=c&&T(b,4,c);c=I(a,5);null!=c&&T(b,5,c);c=M(a,aw,6);0<c.length&&W(b,6,c,bw)},cz=function(a){H(this,a,0,-1,null)};r(cz,G);cz.prototype.s=function(){var a=new O;dz(this,a);return P(a)};
var dz=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c)};var fz=function(a){H(this,a,0,-1,ez)};r(fz,G);var ez=[5];fz.prototype.s=function(){var a=new O;gz(this,a);return P(a)};var gz=function(a,b){var c;c=I(a,1);null!=c&&R(b,1,c);c=I(a,2);null!=c&&R(b,2,c);c=L(a,xw,3);null!=c&&U(b,3,c,yw);c=I(a,4);null!=c&&null!=c&&zu(b,4,c);c=I(a,5);0<c.length&&Fu(b,5,c)};var hz=function(){this.l=v("mr.cloud.CredentialService")},vt=function(a){var b=new Nc,c=Jp.a+"/iceconfig?key="+Jp.b;x(a.l,"Requesting TURN credentials from "+c);var d=Qf(c,function(){We(d)?(x(a.l,"Got TURN credentials: "+Xe(d)),b.resolve(iz(a,$f(d)))):b.resolve(jz(a))},"POST",void 0,{"Content-Type":"application/json"});return b.a},iz=function(a,b){try{var c=[];b.iceServers.forEach(function(a){a.urls.forEach(function(b){0==b.indexOf("turn:")&&c.push({url:b,credential:a.credential,username:a.username})})});
return c}catch(d){return a.l.error("Error parsing TURN credentials.",d),[]}},jz=function(a){a.l.error("XHR failed fetching TURN credentials.",null);return[]};var lz=function(a){H(this,a,0,-1,kz)};r(lz,G);var kz=[3],mz=function(a){a=new ru(a);for(var b=new lz;su(a)&&4!=a.b;)switch(a.f){case 1:var c=a.a.v();K(b,1,c);break;case 2:c=vu(a);K(b,2,c);break;case 3:c=new Aw;uu(a,c,Bw);Zs(b,3,c,Aw);break;default:tu(a)}return b};lz.prototype.s=function(){var a=new O,b;b=J(this,1,0);0!==b&&Q(a,1,b);b=this.getMessage();0<b.length&&T(a,2,b);b=M(this,Aw,3);0<b.length&&W(a,3,b,Cw);return P(a)};lz.prototype.getMessage=function(){return J(this,2,"")};var nz=function(a){H(this,a,0,-1,null)};r(nz,G);nz.prototype.s=function(){var a=new O,b;b=J(this,1,"");0<b.length&&T(a,1,b);b=L(this,Lw,2);null!=b&&U(a,2,b,Xw);return P(a)};var oz=function(a,b){K(a,1,b)};var pz=function(a){H(this,a,0,-1,null)};r(pz,G);pz.prototype.s=function(){var a=new O,b;b=L(this,dx,1);null!=b&&U(a,1,b,jx);return P(a)};var rz=function(a){H(this,a,0,-1,qz)};r(rz,G);var qz=[1];rz.prototype.s=function(){var a=new O,b;b=M(this,Lw,1);0<b.length&&W(a,1,b,Xw);return P(a)};var tz=function(a){H(this,a,0,-1,sz)};r(tz,G);var sz=[2,3];tz.prototype.s=function(){var a=new O;uz(this,a);return P(a)};var uz=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,ux);c=a.ta();0<c.length&&W(b,2,c,Xw);c=a.Ja();0<c.length&&Ju(b,3,c);c=a.Fa();0<c.length&&T(b,4,c)};h=tz.prototype;h.C=function(){return L(this,tx,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,Lw,2)};h.Ja=function(){return I(this,3)};h.Fa=function(){return J(this,4,"")};var vz=function(a){H(this,a,0,-1,null)};r(vz,G);vz.prototype.s=function(){var a=new O;wz(this,a);return P(a)};var wz=function(a,b){var c;c=J(a,1,"");0<c.length&&T(b,1,c);c=J(a,2,"");0<c.length&&T(b,2,c);c=J(a,3,0);0!==c&&Au(b,3,c);c=L(a,Dw,4);null!=c&&U(b,4,c,Ew);c=L(a,xz,5);null!=c&&U(b,5,c,yz)},xz=function(a){H(this,a,0,-1,null)};r(xz,G);xz.prototype.s=function(){var a=new O;yz(this,a);return P(a)};var yz=function(a,b){var c;c=J(a,1,"");0<c.length&&T(b,1,c);(c=J(a,2,!1))&&R(b,2,c)};var Az=function(a){H(this,a,0,-1,zz)};r(Az,G);var zz=[10];Az.prototype.s=function(){var a=new O;Bz(this,a);return P(a)};var Bz=function(a,b){var c;c=a.zb();0<c.length&&T(b,1,c);c=a.getTitle();0<c.length&&T(b,2,c);c=J(a,4,0);0!==c&&S(b,4,c);c=J(a,5,0);0!==c&&S(b,5,c);c=L(a,Dw,7);null!=c&&U(b,7,c,Ew);c=L(a,Dw,8);null!=c&&U(b,8,c,Ew);c=J(a,9,"");0<c.length&&T(b,9,c);c=I(a,10);0<c.length&&Lu(b,10,c);c=J(a,11,"");0<c.length&&T(b,11,c);c=L(a,Cz,12);null!=c&&U(b,12,c,Dz)};
Az.prototype.zb=function(){return J(this,1,"")};Az.prototype.getTitle=function(){return J(this,2,"")};Az.prototype.setTitle=function(a){K(this,2,a)};var Ez=function(a){H(this,a,0,-1,null)};r(Ez,G);Ez.prototype.s=function(){var a=new O;Fz(this,a);return P(a)};var Fz=function(a,b){var c;c=J(a,1,0);0!==c&&S(b,1,c);c=a.getDeviceId();0<c.length&&T(b,2,c)};Ez.prototype.getDeviceId=function(){return J(this,2,"")};var Cz=function(a){H(this,a,0,-1,Gz)};r(Cz,G);var Gz=[1];
Cz.prototype.s=function(){var a=new O;Dz(this,a);return P(a)};var Dz=function(a,b){a=M(a,Ez,1);0<a.length&&W(b,1,a,Fz)};var Iz=function(a){H(this,a,0,-1,Hz)};r(Iz,G);var Hz=[2];Iz.prototype.s=function(){var a=new O;Jz(this,a);return P(a)};var Jz=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,ux);c=a.ta();0<c.length&&W(b,2,c,jx);c=a.Fa();0<c.length&&T(b,3,c)};h=Iz.prototype;h.C=function(){return L(this,tx,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,dx,2)};h.Fa=function(){return J(this,3,"")};var Kz=function(a){H(this,a,0,-1,null)};r(Kz,G);Kz.prototype.s=function(){var a=new O,b;b=L(this,Lw,1);null!=b&&U(a,1,b,Xw);return P(a)};var Lz=function(a){H(this,a,0,-1,null)};r(Lz,G);Lz.prototype.s=function(){var a=new O,b;b=L(this,dx,1);null!=b&&U(a,1,b,jx);return P(a)};var Nz=function(a){H(this,a,0,-1,Mz)};r(Nz,G);var Mz=[3];Nz.prototype.s=function(){var a=new O;Oz(this,a);return P(a)};var Oz=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=M(a,Pz,3);0<c.length&&W(b,3,c,Qz)},Pz=function(a){H(this,a,0,-1,null)};r(Pz,G);Pz.prototype.s=function(){var a=new O;Qz(this,a);return P(a)};
var Qz=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);null!=c&&T(b,2,c);c=I(a,3);null!=c&&Q(b,3,c);c=I(a,4);null!=c&&Q(b,4,c);c=I(a,5);null!=c&&Q(b,5,c)};Pz.prototype.getName=function(){return I(this,2)};var Rz=function(a){var b=new Px;K(b,2,a);K(b,1,sc&&mc?2:sc?3:tc?4:uc?5:1);K(b,3,1);return b};var Tz=function(a,b,c,d,e,f,g){B.call(this);this.b=d;this.F=e;this.g=Ar(this.b,c);this.ya=++Sz;this.G=If("realtime.collections.Collection."+this.ya);this.B=e.a;this.Ya=g||null;this.ja=f&&f.b||null;this.Ka=e.ef();this.Za=f&&f.a||null;this.Ta=new Xt(this);this.h(this.Ta);this.data={};this.Sa=0;this.Ia=[];this.Ca={};this.a=-2;this.m=!0;this.o=Qa();this.state="ga";this.config=gt(b);Nu.U();this.H={};this.Va=Zc};r(Tz,B);var Uz=new C(10,67);Tz.prototype.aa=function(a){return new Vz(a.ad,a.data,[],"ca")};
var Wz=function(a,b){return new Vz(b.ad,[],a,"ca")},Sz=0,Xz=0,Yz=function(a){"ga"==a.state&&(a.state="ea",a.ja&&a.Ta.listen(a.ja,a.Za,a.zh))};Tz.prototype.start=function(a){a&&(this.g=gt(a));"ga"==this.state&&Yz(this);if("ea"!=this.state)return null;this.state="fa";Zz(this);F(this.G,"Collection started: "+this.toString()+", "+this.yb());return null};
Tz.prototype.stop=function(){if("fa"==this.state||"ea"==this.state)this.flush(),this.la(),this.state="ga",F(this.G,"Collection stopped: "+this.toString()+": "+this.yb())};var Zz=function(a){a.m&&a.o&&(F(a.G,"Initial data available: "+a.toString()),a.o.resolve(a.Ia),a.o=null)};Tz.prototype.la=function(){this.ja&&this.Ta.v(this.ja,this.Za,this.zh)};
Tz.prototype.lb=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];if(0==b.length)return this.b.lb(this.b.f(this.g));if(b[0]instanceof this.b.a)return this.b.lb(this.b.h(b[0]));b=Array.prototype.concat.apply(Array.prototype,b);return this.b.lb(this.b.f(this.g),b)};Tz.prototype.bb=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return this.Ca[$z(this,Array.prototype.concat.apply(Array.prototype,b))]||null};var aA=function(a){return"fa"==a.state&&!0};
Tz.prototype.T=function(){this.flush();this.stop();null!=this.o&&(E(this.G,"Never any data: "+this.toString()),this.o.a.cancel(),this.o=null);Tz.S.T.call(this)};Tz.prototype.get=function(){return this.Ia};Tz.prototype.flush=function(){var a;do bA(this),a=this.u();while(0<a)};var bA=function(a){Ha(a.H,function(a){for(;a&&1<=a.length&&a[0].a;)a.shift()})},cA=function(a){return Db(Ka(a.data),function(a){return a.ka()})};
Tz.prototype.add=function(a,b){$z(this,a);if(dA(this,a)&&this.Ka)return b=eA(this,"ia",a),Cd(this.u,this),b;a=this.F.Nb([a]);return fA(this,a,n(this.aa,this),b)};Tz.prototype.modify=function(a,b){$z(this,a);if(dA(this,a)&&this.Ka)return b=eA(this,"ja",a),Cd(this.u,this),b;a=this.F.Ob([a]);return fA(this,a,n(this.aa,this),b)};Tz.prototype.remove=function(a,b,c){var d=this.Ba(a);return dA(this,a)&&null==c&&this.Ka?(a=eA(this,"ka",d,b),Cd(this.u,this),a):fA(this,gA(this,[d],b),Da(Wz,[d]),c)};
var eA=function(a,b,c,d){var e=a.Ba(c).toString(),f=a.H[e]||[];a.H[e]=f;var g=null,e=f.length;if(1<=e&&!f[e-1].a)if(e=f[e-1],"ia"==b){if("ia"==e.type||"ja"==e.type)g=e.ra,f.pop(),hA(a,"e")}else if("ja"==b&&("ia"==e.type||"ja"==e.type)){f=e.Uc;b=JSON.parse(f.ka());c=JSON.parse(c.ka());for(d=0;d<c.length;d++)null!=c[d]&&!et(b[d],c[d])&&(b[d]=c[d]);c=new f.constructor(b);e.Uc=c;hA(a,"d");return e.ra.a}a=new iA(b,c,g,d);f.push(a);return a.ra.a};
Tz.prototype.u=function(){var a=0,b={};Ha(this.H,function(c){if(c&&1<=c.length&&(c=c[0],!c.a)){c.a=!0;if("ka"==c.type&&c.b){var d=[c.Uc];jA(this,gA(this,d,c.b),Da(Wz,d),[c.ra],d)}else d=b[c.type]||[],d.push(c),b[c.type]=d;a++}},this);Ha(b,function(a,b){if(1<=a.length){var c=[],d=[];t(a,function(a){c.push(a.Uc);d.push(a.ra)});switch(b){case "ia":jA(this,this.F.Nb(c),n(this.aa,this),d,c);break;case "ja":jA(this,this.F.Ob(c),n(this.aa,this),d,c);break;case "ka":jA(this,gA(this,c),Da(Wz,c),d,c);break;
default:tb("A request with type "+b+" was put in the queue.")}}},this);return a};var jA=function(a,b,c,d,e){null==b&&t(d,function(a){a.b("Operation not available")});b.ve(J(a.config,7,0));b.we(J(a.config,8,6E4),J(a.config,13,6E4));e=Db(e,a.Ba,a);var f=b.ue();f.then(n(a.Mg,a,e),n(a.Mg,a,e));Yd(f.then(n(a.wh,a,b,c,d,e)),n(a.xh,a,b,d));a.B.execute(b)};Tz.prototype.yd=function(){return Od("Resync not supported")};Tz.prototype.Kc=function(){return!0};
var gA=function(a,b,c){return a.F.Xb(Db(b,a.N,a),c)},dA=function(a,b){return b instanceof kA?Br(a.b,a.N(b)):Br(a.b,b)},lA=function(a,b){b=Ar(a.b,a.b.h(b));return new kA(a.b,b)},mA=function(a,b){var c=a.b;b=a.N(b);a=Cr(c,a.g,c.f);c=Cr(c,b,c.f);return dc(a,c)},fA=function(a,b,c,d){if(null==b)return Od("Operation not available");var e=Qa();d=null!=d?d:J(a.config,7,0);b.ve(d);d=b.Dc()||J(a.config,8,6E4);var f=b.he()||Math.max(d,J(a.config,13,6E4)||0);b.we(d,f);null!=e&&Yd(b.ue().then(n(a.wh,a,b,c,[e],
null)),n(a.xh,a,b,[e]));F(a.G,"Executing operation: "+b);a.B.execute(b);return e.a};h=Tz.prototype;
h.wh=function(a,b,c,d,e){F(this.G,"Operation executed: "+a+", result:"+e);hA(this,"b");null!=b&&(this.Kc(e.ad)?(a=b(e))?this.uf(a):F(this.G,"Operation resulted in no update"):aA(this)&&tb("Result of an operation must have a valid version number, if the collection is active."));!d||null==e.data||1>=e.data.length?c[0].resolve(e.data):t(c,function(a,b){var c=d[b];b=Cb(e.data,function(a){return this.Ba(a).equals(c)},this);0==b.length&&Kf(this.G,"Result data is empty after filtering for target resource id "+
c);a.resolve(b)},this)};h.xh=function(a,b,c){var d="Operation failed: "+c;Kf(this.G,d,c instanceof Error?c:Error(d));hA(this,"a",new nA(0,a.bf(),c));t(b,function(a){a.b(c)});c.response&&c.response.getResponseHeader&&(a=c.response.getResponseHeader().xa(),(b=Uz.get(a))&&oA(this,b,"Collection apiary operation failed with response code "+a+" triggering endcause "+b));return c};
h.Mg=function(a){var b=!1;t(a,function(a){var c=this.H[a.toString()];c&&1<=c.length?(c.shift(),b=b||1<=c.length):Kf(this.G,"A writing request with resource id "+a+" completed but it is not in the request queue.")},this);b&&this.u()};h.zh=function(a){"fa"!=this.state&&"ea"!=this.state||this.tf(a)};
h.tf=function(a){var b=this.bh(a);F(this.G,"Received push notification, version: "+b+", checking if any updates apply to this collection "+this.toString());var c=pA(this,a);a=qA(this,a);c.length||a.length?(F(this.G,"Notification applies to this collection: version: "+b+", add/modify: "+c.length+", remove:"+a.length),b=new Vz(b,c,a,"ba"),Lf(this.G,"Created partial update for notification: "+b),Jf(this.G,Bf,"Add/modify: ["+b.b.join("|")+"], remove: ["+b.f.join("|")+"]"),hA(this,"f"),this.uf(b)):F(this.G,
"Notification does not apply to this collection, ignoring.")};h.bh=function(){return-2};
var pA=function(a,b){var c=[];t(b.notification.ta(),function(a){var b=this.b;a=a instanceof b.a?a:new b.a(JSON.parse(a.ka()));Br(this.b,a)?mA(this,lA(this,a))&&c.push(a):hA(this,"z","Pushed modified: "+a.ka())},a);return c},qA=function(a,b){if(!b.notification.Ja)return[];var c=[];t(b.notification.Ja(),function(a){var b=this.b.g(a);Br(this.b,b)?(a=lA(this,b),mA(this,a)&&c.push(a)):hA(this,"z","Pushed deleted: "+a.ka())},a);return c};
Tz.prototype.uf=function(a){Lf(this.G,"Begin processing update: "+a);a instanceof Vz&&(Lf(this.G,"Applying partial update: "+a),rA(this,a));Lf(this.G,"Finish processing update: "+a+": "+this.yb())};Tz.prototype.yb=function(){return"state: "+this.state+", local version: "+this.a+", snapshot size: "+this.Sa};
var rA=function(a,b){Lf(a.G,"Processing partial update: "+b);Jf(a.G,Bf,"Add/modify: ["+b.b.join("|")+"], remove: ["+b.f.join("|")+"]");t(b.b,function(a){Br(this.b,a)?this.data[$z(this,a)]=gt(a):hA(this,"z","Partial update: "+a.ka())},a);var c=[];t(b.f,function(a){var b=$z(this,a);this.data[b]?delete this.data[b]:c.push(a)},a);0<c.length&&hA(a,"A","Resources not found: "+df(c));sA(a)},sA=function(a){var b={},c={};Ha(a.data,function(a,d){this.Va(a)&&(b[d]=a,c[d]=a)},a);var d=[],e=[];Ha(a.Ca,function(a,
f){var g=b[f];g?(delete c[f],a==g||a&&g&&a instanceof g.constructor&&et(Xs(a),Xs(g))||e.push(g)):d.push(a)});var f=Ka(c);a.Ca=b;a.Ia=Ka(b);a.Sa=Ja(a.data);if(0<e.length||0<f.length||0<d.length)F(a.G,"Obtained update of the filtered view : modified: "+e.length+", added: "+f.length+", removed:"+d.length),Jf(a.G,Bf,"Modified: ["+e.join("|")+"], added: ["+f.join("|")+"], removed: ["+d.join("|")+"]"),a.dispatchEvent(new tA(e,f,d))},uA=function(a,b){a.Va=b;sA(a)},hA=function(a,b,c){null!=a.Ya&&a.Ya.a(b,
c)};Tz.prototype.Ba=function(a){return null==a||a instanceof kA?a:lA(this,a)};var $z=function(a,b){var c;ta(b)?c=b:c=b instanceof kA?zr(a.b,b.a):zr(a.b,b);return df(c)},vA=function(a){this.a=a;this.id=++Xz},Vz=function(a,b,c,d){vA.call(this,a);this.h=d;this.b=b;this.f=c};r(Vz,vA);Vz.prototype.toString=function(){return"[Partial update id: "+this.id+", version: "+this.a+", add/modify: "+this.b.length+", remove: "+this.f.length+", type: "+this.h+"]"};
var oA=function(a,b,c){"ha"!=a.state&&(a.la(),a.state="ha",Kf(a.G,"Collection failed: "+a.toString()+": "+a.yb(),Error(c)),a.dispatchEvent(new wA(b,c)))},iA=function(a,b,c,d){this.type=a;this.Uc=b;this.ra=c||Qa();this.b=d||null;this.a=!1};Tz.prototype.N=function(a){return a.a};var kA=function(a,b){this.b=a;this.a=b};kA.prototype.equals=function(a){return Dr(this.b,this.a,a.a)};kA.prototype.toString=function(){return this.a.ka()};
var tA=function(a,b,c){A.call(this,"g");this.b=b;this.a=a;this.removed=c};r(tA,A);var wA=function(a,b){A.call(this,"i");this.a=a;this.reason=b};r(wA,A);var nA=function(a,b,c){qf(c);this.request=b;this.de=c};r(nA,Error);var xA=function(a){Lw.call(this,a);this.g=this.j=null};r(xA,Lw);var yA=/^(spaces\/[a-zA-Z0-9_-]+)\//,zA=function(a){return(a=yA.exec(a))?a[1]:null};xA.prototype.v=function(){return zA(this.nb())||this.j};xA.prototype.o=function(a){this.j=a};var AA=function(a){if(va(a)){var b=new Gx;b.g(a);return b}return a};var BA=function(a,b,c,d,e){B.call(this);this.g=b;this.j=c;this.m=e||"https://clients6.google.com";this.f=d;this.a=a;this.u=Qa();null!=this.a.Cd?this.u.resolve():re(this.a,"e",function(){this.u.resolve()},!1,this)};r(BA,B);BA.prototype.request=function(a,b,c,d,e,f,g){this.u.a.then(function(){var m=(new bs).gi(this.m).Sh("/"+this.g+"/"+this.j+"/"+a).di(b).hi(c).ii(!k(g)||g).Mf(d),q=Qa();q.a.then(e,f||pa);m.je().bi(n(q.resolve,q)).ci(n(q.b,q));this.a.request(m)},null,this)};
BA.prototype.b=function(a,b,c,d,e){var f=db(mb(this.f))?{}:{key:this.f};a=(new bs).gi(this.m).Sh("/"+this.g+"/"+this.j+"/"+a).di("POST").hi(f).ii(!0).Mf(b);null!=c&&a.Rl(c);null!=d&&a.Ul(d);var g=Qa();a.je().bi(n(function(a){var b=null;try{b=0<a.length?dt(a):null}catch(V){a=new Nr("fatal","response_decoding",null,a);g.b(a);return}var c=b,d=0;c&&wa(c.getResponseHeader)&&(c=c.getResponseHeader())&&wa(c.xa)&&(d=c.xa());1==d?g.resolve(b):(a=new Nr("fatal","backend",null,a),g.b(a))},this)).ci(n(g.b,g));
this.u.a.then(n(this.a.request,this.a,a));return g.a};var CA=function(){this.a=null},DA=function(a,b){if(!a.a||I(a.a,2)<I(b,2))a.a=gt(b)},EA=function(a){return a.a?I(a.a,2)+";"+I(a.a,1):null};var GA=function(a){H(this,a,0,-1,FA)};r(GA,G);var FA=[2,3];GA.prototype.s=function(){var a=new O;HA(this,a);return P(a)};var HA=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=a.ta();0<c.length&&W(b,2,c,Tx);c=a.Ja();0<c.length&&W(b,3,c,Xu);c=a.Fa();null!=c&&U(b,4,c,Xu)};h=GA.prototype;h.C=function(){return L(this,X,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,Sx,2)};h.Ja=function(){return M(this,Wu,3)};h.Fa=function(){return L(this,Wu,4)};var IA=function(a){H(this,a,0,-1,null)};r(IA,G);IA.prototype.s=function(){var a=new O;JA(this,a);return P(a)};var JA=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=L(a,py,4);null!=c&&U(b,4,c,qy);c=I(a,3);null!=c&&Cu(b,3,c);c=I(a,5);null!=c&&Bu(b,5,c);c=L(a,hv,6);null!=c&&U(b,6,c,iv);c=I(a,2);null!=c&&Eu(b,2,c);c=I(a,7);null!=c&&T(b,7,c);c=I(a,8);null!=c&&T(b,8,c)};var LA=function(a){H(this,a,0,-1,KA)};r(LA,G);var KA=[2,3];LA.prototype.s=function(){var a=new O;MA(this,a);return P(a)};var MA=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=a.ta();0<c.length&&W(b,2,c,Fy);c=a.Ja();0<c.length&&W(b,3,c,Mv);c=I(a,4);null!=c&&S(b,4,c);c=a.Fa();null!=c&&U(b,5,c,Mv);c=I(a,6);null!=c&&S(b,6,c)};h=LA.prototype;h.C=function(){return L(this,X,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,Ey,2)};
h.Ja=function(){return M(this,Lv,3)};h.Fa=function(){return L(this,Lv,5)};var OA=function(a){H(this,a,0,-1,NA)};r(OA,G);var NA=[2];OA.prototype.s=function(){var a=new O;PA(this,a);return P(a)};var PA=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=a.ta();0<c.length&&W(b,2,c,Ky)};OA.prototype.C=function(){return L(this,X,1)};OA.prototype.D=function(a){N(this,1,a)};OA.prototype.O=function(){this.D(void 0)};OA.prototype.ta=function(){return M(this,Jy,2)};var RA=function(a){H(this,a,0,-1,QA)};r(RA,G);var QA=[2,3];RA.prototype.s=function(){var a=new O;SA(this,a);return P(a)};var SA=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=a.ta();0<c.length&&W(b,2,c,Ay);c=a.Ja();0<c.length&&W(b,3,c,Kv);c=a.Fa();null!=c&&U(b,4,c,Kv)};h=RA.prototype;h.C=function(){return L(this,X,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,zy,2)};h.Ja=function(){return M(this,Jv,3)};h.Fa=function(){return L(this,Jv,4)};var TA=function(a){H(this,a,0,-1,null)};r(TA,G);TA.prototype.s=function(){var a=new O;UA(this,a);return P(a)};var UA=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=L(a,fz,2);null!=c&&U(b,2,c,gz)};TA.prototype.W=function(){return I(this,1)};TA.prototype.Ma=function(a){K(this,1,a)};var WA=function(a){H(this,a,0,-1,VA)};r(WA,G);var VA=[2,3];WA.prototype.s=function(){var a=new O;XA(this,a);return P(a)};var XA=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=a.ta();0<c.length&&W(b,2,c,Oy);c=a.Ja();0<c.length&&W(b,3,c,kw);c=a.Fa();null!=c&&U(b,4,c,kw)};h=WA.prototype;h.C=function(){return L(this,X,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,Ny,2)};h.Ja=function(){return M(this,jw,3)};h.Fa=function(){return L(this,jw,4)};var YA=function(a){H(this,a,0,-1,null)};r(YA,G);YA.prototype.s=function(){var a=new O;ZA(this,a);return P(a)};var ZA=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=I(a,2);null!=c&&S(b,2,c);c=I(a,3);null!=c&&T(b,3,c);c=I(a,4);null!=c&&T(b,4,c);c=I(a,5);null!=c&&T(b,5,c);c=I(a,6);null!=c&&T(b,6,c);c=I(a,7);null!=c&&T(b,7,c);c=L(a,$A,8);null!=c&&U(b,8,c,aB);c=L(a,fz,9);null!=c&&U(b,9,c,gz);c=L(a,bB,10);null!=c&&U(b,10,c,cB);c=I(a,11);null!=c&&R(b,11,c)};h=YA.prototype;
h.jl=function(){return I(this,1)};h.yf=function(a){K(this,1,a)};h.W=function(){return I(this,2)};h.Ma=function(a){K(this,2,a)};h.kl=function(){return I(this,3)};h.oa=function(a){K(this,3,a)};h.Qa=function(){return I(this,4)};h.zf=function(a){K(this,4,a)};h.V=function(){return I(this,5)};h.R=function(a){K(this,5,a)};h.M=function(){return I(this,6)};h.na=function(a){K(this,6,a)};h.ga=function(){return I(this,7)};h.Gd=function(a){N(this,10,a)};var $A=function(a){H(this,a,0,-1,dB)};r($A,G);
var dB=[1,2,3];$A.prototype.s=function(){var a=new O;aB(this,a);return P(a)};var aB=function(a,b){var c;c=I(a,1);0<c.length&&Gu(b,1,c);c=M(a,eB,2);0<c.length&&W(b,2,c,fB);c=I(a,3);0<c.length&&Ju(b,3,c)},eB=function(a){H(this,a,0,-1,gB)};r(eB,G);var gB=[2];eB.prototype.s=function(){var a=new O;fB(this,a);return P(a)};var fB=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=I(a,2);0<c.length&&Gu(b,2,c)},bB=function(a){H(this,a,0,-1,null)};r(bB,G);bB.prototype.s=function(){var a=new O;cB(this,a);return P(a)};
var cB=function(a,b){a=I(a,1);null!=a&&R(b,1,a)};bB.prototype.fc=function(){return I(this,1)};var iB=function(a){H(this,a,0,-1,hB)};r(iB,G);var hB=[2];iB.prototype.s=function(){var a=new O;jB(this,a);return P(a)};var jB=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,ux);c=a.ta();0<c.length&&W(b,2,c,wz);c=a.Fa();0<c.length&&T(b,3,c)};h=iB.prototype;h.C=function(){return L(this,tx,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,vz,2)};h.Fa=function(){return J(this,3,"")};var lB=function(a){H(this,a,0,-1,kB)};r(lB,G);var kB=[2,3];lB.prototype.s=function(){var a=new O;mB(this,a);return P(a)};var mB=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,ux);c=a.ta();0<c.length&&W(b,2,c,Bz);c=a.Ja();0<c.length&&Ju(b,3,c);c=a.Fa();0<c.length&&T(b,4,c)};h=lB.prototype;h.C=function(){return L(this,tx,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,Az,2)};h.Ja=function(){return I(this,3)};h.Fa=function(){return J(this,4,"")};var oB=function(a,b,c,d,e){dd.call(this);this.o=a;this.b=b;this.B=e||{};this.m=c;this.A=d;this.u=-1;this.v=Qa();this.a=!1;this.g=0;this.j=this.f=void 0;this.ya=++nB};r(oB,dd);var nB=0;h=oB.prototype;h.Of=function(a){this.u=a};h.Gc=function(){return this.v};h.ue=function(){return this.v.a};h.le=function(){return this.a};h.qd=function(){return this.B};h.ve=function(a){this.g=a};h.zd=function(){return this.g};h.we=function(a,b){k(b)&&(b=Math.max(a,b));this.f=a;this.j=b};h.Dc=function(){return this.f};
h.he=function(){return this.j};h.bf=function(){return this.m.ka()};h.toString=function(){return"[Operation id: "+this.ya+": service: "+this.o+", call: "+this.b+", version: "+this.u+"]"};var pB=function(){Fa.call(this)};r(pB,Fa);pB.prototype.message="Operation has already been executed.";pB.prototype.name="AlreadyExecutedError";var qB=function(a,b,c,d,e,f,g){Tz.call(this,0,b,c,d,e,f,g);this.La=e;this.a=-1;this.m=!1;this.ba=-1;this.f=[];this.ha=this.X=this.Aa=this.ea=null;this.A=!1;this.Xa=0;this.K=null;this.j=new Qq(J(this.config,2,1E3),J(this.config,3,6E4));this.Pa=new Ox(this.yg,0,this)};r(qB,Tz);qB.prototype.start=function(a){qB.S.start.call(this,a);if("fa"!=this.state)return null;this.Ta.listen(this.B,"a",this.sh);rB(this,!0);F(this.G,"Starting initial resync.");return sB(this,"oa",!0)};
qB.prototype.la=function(){qB.S.la.call(this);this.Ta.v(this.B,"a",this.sh);Ae(this.ha);this.ha=null;this.j.reset();Ae(this.Aa);this.Aa=null;Ae(this.X);this.K=this.X=null;this.m=!1};qB.prototype.query=function(a,b){return fA(this,this.La.Pb(this.N(a)),null,b)};qB.prototype.search=function(a){return fA(this,this.La.Yb(gt(this.g)),null,a)};
var uB=function(a,b){"na"!=b&&0==a.j.a&&a.B.dispatchEvent("a");Lf(a.G,"Starting sync. Type: "+b);var c="pa"==b||"qa"==b,d=a.La.Yb(gt(a.g)),e=-2;J(a.config,11,!1)&&(9E4>Ea()-a.Xa?(e=a.a,d.Of(e)):a.Xa=Ea());d=fA(a,d,function(a){return e!=a.ad?new tB(a.ad,a.data,b):null});Yd(d.then(n(a.bl,a,c)),n(a.al,a,c));a.ea=d;Yd(a.ea,pa);return d};h=qB.prototype;h.Kc=function(a){return 0<=a};h.sh=function(){sB(this,"na",!0)};h.yd=function(){return null!=sB(this,"ra",!0)||this.ea?this.ea:Od("Collection not yet started, so cannot resync.")};
h.tf=function(a){var b=!1,c=a.notification.Fa();null!=c&&""!=c&&(b=this.b.g(c),b=lA(this,b),b=mA(this,b));b?this.yd():qB.S.tf.call(this,a)};h.bh=function(a){var b;wa(a.notification.C)&&null!=a.notification.C()&&(b=a.notification.C().ub());return b};
h.uf=function(a){Lf(this.G,"Begin processing update: "+a);var b=a.a==this.ba;this.ba=Math.max(this.ba,a.a);rB(this,!1);if(a instanceof tB)vB(this,a);else{wB(this,a.b,a.f);if(this.Kc(this.a)&&a.a<=this.a){"ba"==a.h&&hA(this,"h");var c=!1;b&&(hA(this,"i"),c=!0);100<this.a-a.a&&(hA(this,"j"),c=!0);c&&sB(this,"sa",!0);hA(this,"g");Lf(this.G,"Ignoring update "+a+" below or equal to local version ("+this.a+")");return}b=Ib(this.f,function(b){return b.a<=a.a},this);if(null!=b&&a.a==b.a){hA(this,"g");E(this.G,
"Duplicate update received, ignoring it.");return}Lf(this.G,"Queuing partial update: "+a);Pb(this.f,a,b)}a instanceof tB?this.yg():this.Pa.hk();Lf(this.G,"Finish processing update: "+a+": "+this.yb())};
var wB=function(a,b,c){a.Kc(a.a)||(Lf(a.G,"Dispatch early notification: "),a.dispatchEvent(new xB(b,c)))},sB=function(a,b,c){if(!aA(a)||a.A)return null;a.j.reset();var d=null;a.A=!0;c?d=uB(a,b):yB(a);return d},zB=function(a){a.A&&(F(a.G,"Ending resync"),a.A=!1,a.dispatchEvent("j"))},yB=function(a){var b=a.j.f;hA(a,"m");F(a.G,"Scheduling resync timer, backoff count: "+a.j.a+", backoff: "+b);a.ha=ze(a.Zk,b,a)};h=qB.prototype;
h.Zk=function(){F(this.G,"Resync timer triggered, "+this.yb());this.ha=null;aA(this)?(hA(this,"n"),uB(this,"sa")):zB(this)};
h.bl=function(a){F(this.G,(a?"Poll":"Resync")+" operation executed, "+this.yb());AB(this,!1);if(this.m||!aA(this))zB(this);else{a=!1;var b=J(this.config,5,4);this.j.a>=b?(hA(this,"l"),F(this.G,"Hard sync threshold reached ("+b+"), doing a hard resync"),a=!0):this.f.length>J(this.config,4,64)&&(hA(this,"k"),Lf(this.G,"Number of queued updates is larger than the max ("+J(this.config,4,64)+"), clearing the queue"),a=!0);a?(Mb(this.f),this.j.reset(),uB(this,"ta")):(Rq(this.j),yB(this))}};
h.al=function(a,b){var c=(a?"Poll":"Resync")+" error: "+b;Kf(this.G,c,b instanceof Error?b:Error(c));hA(this,a?"y":"o");AB(this,!0);aA(this)?(Rq(this.j),yB(this)):zB(this)};h.yb=function(){return qB.S.yb.call(this)+", is synced: "+this.m+", is resyncing: "+this.A+", queue size: "+this.f.length+", highest observed server version: "+this.ba+(0<this.f.length?", smallest queued version: "+yb(this.f).a+", largest queued version: "+this.f[0].a:"")};
h.yg=function(){this.Pa.stop();if(0!=this.f.length&&this.Kc(this.a)){Lf(this.G,"Trying to apply any queued updates, "+this.yb());for(var a=0;0<this.f.length&&yb(this.f).a<=this.a;){var b=this.f.pop();Lf(this.G,"Tossing queued update "+b+" below or equal to local version ("+this.a+")");a++}0<a&&Lf(this.G,"Tossed "+a+" queued old updates below or equal to local version ("+this.a+")");for(a=0;0<this.f.length;)if(b=yb(this.f),b.a==this.a)this.f.pop(),a++;else if(b.a==this.a+1)this.a=b.a,rA(this,b),this.f.pop(),
a++;else{Lf(this.G,"Unable to incrementally apply next queued update,  lowest queue update version: "+b.a+", local version:"+this.a+", remaining queue length: "+this.f.length);break}Lf(this.G,"Applied "+a+" queued updates")}(this.m=0==this.f.length&&this.Kc(this.a))?Zz(this):sB(this,"sa",!1)};h.Bh=function(a){aA(this)&&(hA(this,"p"),F(this.G,"Executing poll sync operation"),sB(this,a,!0),rB(this,!0))};
var rB=function(a,b){if(aA(a)){F(a.G,"Scheduling next poll for "+J(a.config,1,3E4)/1E3+" seconds from now");Ae(a.Aa);a.Aa=ze(Da(a.Bh,"pa"),J(a.config,1,3E4),a);var c=J(a.config,9,9E4);null!=c||(c=9E4);b&&0<c&&(Ae(a.X),a.X=ze(Da(a.Bh,"qa"),c,a))}},AB=function(a,b){if(b)if(null!=a.K){b=Ea()-a.K;var c="Sync operations failing for a period of "+b/1E3+" seconds (limit configured to: "+J(a.config,6,3E5)/1E3+" seconds).";E(a.G,c);b>=J(a.config,6,3E5)&&oA(a,22,c)}else a.K=Ea(),E(a.G,"Sync operation failed, we will continue retrying for up to "+
J(a.config,6,3E5)/1E3+" seconds before shutting down...");else a.K=null},vB=function(a,b){Lf(a.G,"Processing full update: "+b);Jf(a.G,Bf,"Snapshot: ["+b.data.join("|")+"]");if(a.a>=b.a&&100>a.a-b.a){var c=[];a.a==b.a&&(t(b.data,function(a){var b=this.data[$z(this,a)]||null;b==a||b instanceof a.constructor&&BB(JSON.parse(b.ka()),JSON.parse(a.ka()))||c.push({local:b&&b.ka(),server:a.ka()})},a),Ha(a.data,function(a,d){null!=Ib(b.data,function(a){return $z(this,a)==d},this)||c.push({local:a.ka(),server:null})},
a));if(0!=c.length)E(a.G,"Reapplying update with version that's the same, update: "+b.a+", local: "+a.a+", type: "+b.b),hA(a,"x",c);else{hA(a,"u");switch(b.b){case "sa":hA(a,"v");break;case "pa":hA(a,"w")}Lf(a.G,"Ignoring update with version not newer than local version, update: "+b.a+", local: "+a.a+", type: "+b.b);return}}a.a>b.a&&100<a.a-b.a&&hA(a,"j",""+(a.a-b.a));hA(a,"q");switch(b.b){case "pa":hA(a,"s");break;case "sa":hA(a,"r");break;case "ta":hA(a,"t")}var d=Cb(b.data,function(a){if(Br(this.b,
a))return!0;hA(this,"z","Full update: "+a.ka());return!1},a),e=[],f={};t(b.data,function(a){f[$z(this,a)]=!0},a);Ha(a.data,function(a,b){f[b]||e.push(lA(this,a))},a);Lf(a.G,"Applying full update as partial and advancing version from "+a.a+" to "+b.a);a.a=b.a;rA(a,new Vz(b.a,d,e,"da"))},BB=function(a,b){var c=ta(a),d=ta(b);if(c&&d){var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=0);for(e in b)b.hasOwnProperty(e)&&(c[e]=0);for(e in c)if(!BB(a[e],b[e]))return!1;return!0}return a==b||null==a&&d&&0==
b.length||null==b&&c&&0==a.length},tB=function(a,b,c){vA.call(this,a);this.data=b;this.b=c};r(tB,vA);tB.prototype.toString=function(){return"[Full update id: "+this.id+", version: "+this.a+", resource count: "+this.data.length+", sync type: "+this.b+"]"};var xB=function(a,b){A.call(this,"h");this.a=a;this.removed=b};r(xB,A);var DB=function(a){H(this,a,"hc:cc",-1,CB)};r(DB,G);var CB=[14,15];
DB.prototype.s=function(){var a=new O,b;b=I(this,1);null!=b&&S(a,1,b);b=I(this,2);null!=b&&T(a,2,b);b=I(this,3);null!=b&&T(a,3,b);b=I(this,4);null!=b&&T(a,4,b);b=I(this,5);null!=b&&S(a,5,b);b=I(this,6);null!=b&&T(a,6,b);b=I(this,7);null!=b&&T(a,7,b);b=I(this,8);null!=b&&R(a,8,b);b=I(this,9);null!=b&&Du(a,9,b);b=I(this,10);null!=b&&T(a,10,b);b=I(this,11);null!=b&&T(a,11,b);b=I(this,12);null!=b&&T(a,12,b);b=L(this,vx,13);null!=b&&U(a,13,b,wx);b=I(this,14);0<b.length&&Ju(a,14,b);b=I(this,15);0<b.length&&
Ju(a,15,b);b=I(this,16);null!=b&&R(a,16,b);b=L(this,Nz,17);null!=b&&U(a,17,b,Oz);b=I(this,18);null!=b&&R(a,18,b);b=L(this,EB,19);null!=b&&U(a,19,b,FB);b=I(this,20);null!=b&&Q(a,20,b);return P(a)};it("hc:cc",DB);var GB=function(a,b){K(a,4,b)};DB.prototype.g=function(a){K(this,6,a)};var EB=function(a){H(this,a,0,-1,null)};r(EB,G);EB.prototype.s=function(){var a=new O;FB(this,a);return P(a)};var FB=function(a,b){var c;c=I(a,1);null!=c&&Q(b,1,c);c=I(a,2);null!=c&&Q(b,2,c);c=I(a,3);null!=c&&Q(b,3,c)};var HB=function(a){if(va(a)){var b=zA(a),c=new Hx;c.Fh(b);c.Eh(a);return c}return a};var IB=function(a,b,c,d,e){d=void 0===d?null:d;e=void 0===e?null:e;var f=c instanceof lz;nq.call(this,a,b,f?null:c);this.f=f?c:null;this.h=e;this.g=d};ka(IB,nq);IB.prototype.getMessage=function(){return this.h};var JB=function(a){return new IB(a.a,a.xb(),(a instanceof IB?a.f:null)||a.Qb,null,"validation failed")};var KB=function(a,b,c,d,e,f){BA.call(this,a,b,c,d,e);this.o=f||new CA};r(KB,BA);KB.prototype.b=function(a,b,c,d,e,f){f||LB(this,b);return KB.S.b.call(this,a,b,c,d,e).then(this.A,null,this)};var LB=function(a,b){if(b&&a.o.a&&wa(b.C)&&wa(b.D)){var c=b.C()||new X;N(c,3,a.o.a);b.D(c)}};KB.prototype.A=function(a){wa(a.getResponseHeader)&&1==a.getResponseHeader().xa()&&MB(this,a);return a};var MB=function(a,b){(b=(b=wa(b.C)&&b.C()||null)&&L(b,vw,3))&&DA(a.o,b)};var OB=function(a){H(this,a,0,-1,NB)};r(OB,G);var NB=[3,4,5,6];OB.prototype.s=function(){var a=new O;PB(this,a);return P(a)};var PB=function(a,b){var c;c=I(a,1);null!=c&&S(b,1,c);c=L(a,az,2);null!=c&&U(b,2,c,bz);c=M(a,Tv,3);0<c.length&&W(b,3,c,Uv);c=M(a,Zv,4);0<c.length&&W(b,4,c,$v);c=M(a,fw,5);0<c.length&&W(b,5,c,gw);c=M(a,TA,6);0<c.length&&W(b,6,c,UA);c=L(a,Qv,7);null!=c&&U(b,7,c,Rv);c=I(a,8);null!=c&&T(b,8,c)};OB.prototype.W=function(){return J(this,1,4)};OB.prototype.Ma=function(a){K(this,1,a)};var RB=function(a){H(this,a,0,-1,QB)};r(RB,G);var QB=[2,3];RB.prototype.s=function(){var a=new O;SB(this,a);return P(a)};var SB=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=a.ta();0<c.length&&W(b,2,c,ZA);c=a.Ja();0<c.length&&W(b,3,c,mw);c=a.Fa();null!=c&&U(b,4,c,mw)};h=RB.prototype;h.C=function(){return L(this,X,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,YA,2)};h.Ja=function(){return M(this,lw,3)};h.Fa=function(){return L(this,lw,4)};var TB=function(a){H(this,a,0,-1,null)};r(TB,G);TB.prototype.s=function(){var a=new O;UB(this,a);return P(a)};var UB=function(a,b){var c;c=a.h();null!=c&&U(b,1,c,uz);c=a.v();null!=c&&U(b,2,c,Jz);c=a.j();null!=c&&U(b,3,c,mB);c=a.g();null!=c&&U(b,4,c,jB)};TB.prototype.h=function(){return L(this,tz,1)};TB.prototype.v=function(){return L(this,Iz,2)};TB.prototype.j=function(){return L(this,lB,3)};TB.prototype.g=function(){return L(this,iB,4)};var VB=function(a){B.call(this);this.l=If("realtime.collections.oneplatform.OperationExecutor");this.m=a.g(Fr)};r(VB,Mu);VB.prototype.execute=function(a,b){if(a.le())throw new pB;WB(this,a,b)};var WB=function(a,b,c){F(a.l,"Making request for operation: "+b);var d=k(c)?c:b.Dc();a.m.then(function(a){Yd(a.a(b.qd(),b.o,b.b,b.m,b.A,d,b.zd()).then(n(this.b,this,b)),n(this.a,this,b))},n(a.a,a,b),a)};
VB.prototype.b=function(a,b){var c=b.headers,c=parseInt(c.ETag||c.etag,10);b=new Xp(b.be,isNaN(c)?-1:c);a.a=!0;a.Gc().resolve(b)};VB.prototype.a=function(a,b){a.a=!0;Kf(this.l,"OnePlatform operation failed for "+(a+": "+(ya(b)?pf(b):b)));a.Gc().b(b)};var XB=function(a){this.a=a};r(XB,Oq);h=XB.prototype;h.ef=Yc;h.Nb=function(a){var b=a[0].g,c={};b&&(c["X-Goog-Meeting-Botguardid"]=b);b=new nz;oz(b,a[0].v());N(b,2,a[0]);return new oB("google.rtc.meetings.v1.MeetingDeviceService","CreateMeetingDevice",b,function(a){return YB([Nw(a)])},c)};h.Ob=function(a){var b=a[0].g,c={};b&&(c["X-Goog-Meeting-Botguardid"]=b);b=new Kz;N(b,1,a[0]);return new oB("google.rtc.meetings.v1.MeetingDeviceService","UpdateMeetingDevice",b,function(a){return YB([Nw(a)])},c)};
h.Xb=function(){throw Error("Invalid Operation: Meeting Device Remove");};h.Pb=function(a){var b=new Fw;a=a.nb();K(b,1,a);return new oB("google.rtc.meetings.v1.MeetingDeviceService","GetMeetingDevice",b,Nw)};h.Yb=function(a){var b=new Iw;Jw(b,a.Dh());return new oB("google.rtc.meetings.v1.MeetingDeviceService","ListMeetingDevices",b,function(a){var b=YB;a=new ru(a);for(var c=new rz;su(a)&&4!=a.b;)switch(a.f){case 1:var f=new Lw;uu(a,f,Mw);Zs(c,1,f,Lw);break;default:tu(a)}return b(M(c,Lw,1))})};
var YB=function(a){return Db(a,function(a){return new xA(JSON.parse(a.ka()))})};var ZB=function(a){this.a=a};r(ZB,Oq);h=ZB.prototype;h.ef=Yc;h.Nb=function(a){var b=new pz;N(b,1,a[0]);return new oB("google.rtc.meetings.v1.MeetingSpaceService","CreateMeetingSpace",b,function(a){return[ix(a)]})};h.Ob=function(a){var b=new Lz;N(b,1,a[0]);return new oB("google.rtc.meetings.v1.MeetingSpaceService","UpdateMeetingSpace",b,function(a){return[ix(a)]})};h.Xb=function(){throw Error("Invalid Operation: Meeting Space Remove");};
h.Pb=function(a){var b=new Gw;Hw(b,a.h());return new oB("google.rtc.meetings.v1.MeetingSpaceService","GetMeetingSpace",b,function(a){return[ix(a)]})};h.Yb=function(a){return this.Pb(a)};var $B=function(a){return{a:a}};var bC=function(a){H(this,a,0,-1,aC)};r(bC,G);var aC=[3,4,5,6,8,10];bC.prototype.s=function(){var a=new O;cC(this,a);return P(a)};var cC=function(a,b){var c;c=I(a,1);null!=c&&T(b,1,c);c=M(a,OB,3);0<c.length&&W(b,3,c,PB);c=M(a,OB,4);0<c.length&&W(b,4,c,PB);c=M(a,rw,5);0<c.length&&W(b,5,c,sw);c=I(a,6);0<c.length&&Ju(b,6,c);c=I(a,7);null!=c&&S(b,7,c);c=M(a,dw,8);0<c.length&&W(b,8,c,ew);c=I(a,9);null!=c&&R(b,9,c);c=I(a,10);0<c.length&&Gu(b,10,c)};bC.prototype.h=function(){return I(this,1)};
bC.prototype.oa=function(a){K(this,1,a)};var dC=function(a,b){Ys(a,3,b)},eC=function(a,b){K(a,6,b||[])};var fC=new Set([502,504,500,503]),gC=new Set([0,-1]),hC=$B(function(a,b){return Nd(fC.has(b.a)?2:0)}),iC=$B(function(a,b){return Nd(gC.has(b.a)?2:0)});var jC=function(){},nC=function(a,b,c){var d=b.getContext();Vt(b,"Content-Type","application/x-protobuf");Vt(b,"X-Goog-Api-Key",kC(d)||null);Vt(b,"X-Goog-Encode-Response-If-Executable","base64");var e=lC(d)+("/$rpc/"+b.h+"/"+b.b),f=null,g=b.f;g&&(f=g.s.call(g));var g=Qa(),m=new Mf;m.listen("complete",a.a.bind(a,g,c));re(m,"ready",m.pa);mC(d)&&(m.f=Math.max(0,mC(d)));m.A=!0;m.j="arraybuffer";m.send(e,"POST",f,b.xb());Yd(g.a,function(a){a instanceof Id&&m.abort()});return g.a};
jC.prototype.a=function(a,b,c){try{var d=c.target,e=d.xa(),f=cg(d),g=bg(d),m=new Uint8Array(g&&g||null);m&&Ia(f,function(a,b){return"BASE64"==a.toUpperCase()&&"X-GOOG-SAFETY-ENCODING"==b.toUpperCase()})&&(m=ik(Zj(m)));if(We(d))try{a.resolve(new Pq(e,f,b?b(m):null))}catch(q){a.resolve(new IB(10002,f,null,q,"Failed to decode response"))}else try{a.resolve(new IB(e,f,mz(m)))}catch(q){a.resolve(new IB(e,f,null,q,"Failed to decode status"))}}catch(q){a.resolve(new IB(10005,{},null,q,"Failure in XHR result processing"))}};var pC=function(a){H(this,a,0,-1,oC)};r(pC,G);var oC=[2,3];pC.prototype.s=function(){var a=new O;qC(this,a);return P(a)};var qC=function(a,b){var c;c=a.C();null!=c&&U(b,1,c,Y);c=a.ta();0<c.length&&W(b,2,c,cC);c=a.Ja();0<c.length&&W(b,3,c,iw);c=a.Fa();null!=c&&U(b,4,c,iw)};h=pC.prototype;h.C=function(){return L(this,X,1)};h.D=function(a){N(this,1,a)};h.O=function(){this.D(void 0)};h.ta=function(){return M(this,bC,2)};h.Ja=function(){return M(this,hw,3)};h.Fa=function(){return L(this,hw,4)};var rC=new jC,sC=function(a){this.a=void 0===a?null:a;this.v=this.b=this.f=this.g=this.w=null;this.j=[];this.h=[];this.m=[]},AC=function(a){var b=new sC;b.setApiKey(kC(a));b.g=lC(a);b.f=mC(a);b.b=tC(a);b.v=uC(a);t(vC(a),function(a){return wC(b,a)});t(xC(a),function(a){b.h.push(a)});t(yC(a),function(a){return zC(b,a)});return b},lC=function(a){return null!=a.g?a.g:a.a?lC(a.a):""};sC.prototype.setApiKey=function(a){this.w=a};
var kC=function(a){return null!=a.w?a.w:a.a?kC(a.a):""},mC=function(a){return null!=a.f?a.f:a.a?mC(a.a):6E4},tC=function(a){return null!=a.b?a.b:a.a?tC(a.a):0},uC=function(a){return a.v?a.v:a.a?uC(a.a):rC},wC=function(a,b){a.j.push(b)},vC=function(a){return a.a?a.j.concat(vC(a.a)):a.j.concat()},xC=function(a){return a.a?a.h.concat(xC(a.a)):a.h.concat()},zC=function(a,b){a.m.push(b)},yC=function(a){return a.a?a.m.concat(yC(a.a)):a.m.concat()};var BC=function(a){H(this,a,0,-1,null)};r(BC,G);BC.prototype.s=function(){var a=new O;CC(this,a);return P(a)};var CC=function(a,b){var c;c=a.Tg();null!=c&&U(b,1,c,MA);c=a.Wg();null!=c&&U(b,2,c,qC);c=a.Yg();null!=c&&U(b,3,c,SB);c=a.Og();null!=c&&U(b,4,c,Cy);c=a.Xg();null!=c&&U(b,5,c,XA);c=a.Sg();null!=c&&U(b,7,c,HA);c=a.Ug();null!=c&&U(b,8,c,SA);c=a.Qg();null!=c&&U(b,9,c,xy);c=a.ah();null!=c&&U(b,10,c,PA);c=a.Pg();null!=c&&U(b,11,c,oy);c=a.Zg();null!=c&&U(b,13,c,UB)};h=BC.prototype;
h.Tg=function(){return L(this,LA,1)};h.Wg=function(){return L(this,pC,2)};h.Yg=function(){return L(this,RB,3)};h.Og=function(){return L(this,By,4)};h.Xg=function(){return L(this,WA,5)};h.Sg=function(){return L(this,GA,7)};h.Ug=function(){return L(this,RA,8)};h.Qg=function(){return L(this,wy,9)};h.ah=function(){return L(this,OA,10)};h.Pg=function(){return L(this,ny,11)};h.Zg=function(){return L(this,TB,13)};var FC=function(a,b){var c=this;this.g=new Qq(1E3,36E4);this.a=a.getContext();this.j=a;this.w=b;this.b=Qa();this.m=0;this.f=this.h=!1;DC(this.b.a,function(){c.f=!0});EC(this)},EC=function(a){GC(a).then(function(b){2==b.Zc&&a.m<tC(a.a)?HC(a):IC(a,b)})},HC=function(a){a.m++;var b=Be(a.g.f).then(function(){return EC(a)});Rq(a.g);DC(a.b.a,function(){return b.cancel()})},IC=function(a,b){a.h||(0==b.Zc?a.b.resolve(b.response):(b.response instanceof Pq&&(b.response=JB(b.response)),a.b.b(b.response)),a.h=
!0,t(yC(a.a),function(c){return Cd(function(){return c.onRequest(a.j.clone(),b.request,b.response)})}))},GC=function(a){var b=Qa().a;DC(a.b.a,function(){return b.cancel()});var c=a.j.clone(),d=!1,e=[],f=JC(a,b,c),g=f.then(function(c){return d?new IB(20002,{},null):KC(a,b,c)}),m=Sd([f,g]).then(function(c){return d?1:LC(a,b,c[0],c[1])},function(){return 3});e.push(Td([f,g,m]).then(function(a){return a[0].ec?a[1].ec?a[2].ec?{request:a[0].value,response:a[1].value,Zc:a[2].value}:{request:a[0].value,response:new IB(10006,
a[1].value.xb(),a[1].value.Qb,a[2].reason),Zc:3}:{request:a[0].value,response:new IB(10005,{},null,a[1].reason),Zc:3}:{request:c.clone(),response:new IB(10004,{},null,a[0].reason),Zc:3}}));f=mC(a.a);if(0<f){var q=Be(f).then(function(){d=!0;return{request:c.clone(),response:new IB(10001,{},null,null,"Client timed out"),Zc:2}});DC(b,function(){return q.cancel()});e.push(q)}e=Rd(e);Xd(e,function(){return b.cancel()});return e},JC=function(a,b,c){if(a.f)return Od(new Id);var d=Db(vC(a.a),function(a){try{return a.a(c)||
Nd()}catch(f){return Od(f)}});DC(b,function(){return t(d,function(a){return a.cancel()})});return Sd(d).then(function(){return c.clone()})},KC=function(a,b,c){if(a.f)return Od(new Id);var d=nC(uC(a.a),c,a.w);DC(b,function(){return d.cancel()});return d},LC=function(a,b,c,d){if(a.f)return Od(new Id);var e=Db(xC(a.a),function(a){return a.a(c,d)});DC(b,function(){return t(e,function(a){return a.cancel()})});return Sd(e).then(function(a){return Eb(a,function(a,b){return Math.max(a,b)},d instanceof Pq?
0:1)})},DC=function(a,b){Yd(a,function(a){a instanceof Id&&b()})};var OC=function(){var a=this;this.a=new jq(100);this.b={onRequest:function(b,c,d){a.a.add({name:c.b,initReq:MC(b),req:MC(c),resp:NC(d)})}}},PC=function(a,b,c){b=void 0===b?"":b;c=void 0===c?100:c;b=b.toLowerCase();a=a.a.P().filter(function(a){return-1!=a.name.toLowerCase().indexOf(b)});return a.slice(-Math.min(a.length,c))},RC=function(a){var b=QC();zC(a,b.b)},QC=function(){SC||(SC=new OC);return SC},SC=null,TC=function(a){if(a){if(a.ka)return cf(a.ka());if(ua(a))return Db(a,function(a){return TC(a)})}return a},
MC=function(a){return{name:a.h+"/"+a.b,body:df(TC(a.f)),head:a.xb()}},NC=function(a){var b={code:a.a,body:df(TC(a.Qb)),head:a.xb()};a instanceof IB&&(b.status=df(TC(a.f)),b.ex=a.g,b.msg=a.getMessage());return b};p("grpc_lookup",function(a){return PC(QC(),a,1)[0]});p("grpc_dump",function(a,b){return PC(QC(),a,b)});var UC=function(a){H(this,a,0,-1,null)};r(UC,G);UC.prototype.s=function(){var a=new O;VC(this,a);return P(a)};var VC=function(a,b){var c;c=L(a,IA,1);null!=c&&U(b,1,c,JA);c=L(a,BC,2);null!=c&&U(b,2,c,CC);c=L(a,Ly,3);null!=c&&U(b,3,c,My)};var WC=function(a,b){sC.call(this,void 0===b?null:b);this.o=a};ka(WC,sC);var XC=function(a,b,c,d,e){d=void 0===d?null:d;e=void 0===e?{}:e;a=new Wt(AC(a),a.o,b,e,c);return(new FC(a,d)).b.a};var ZC=function(a){H(this,a,"hcbu",-1,YC)};r(ZC,G);var YC=[1];ZC.prototype.s=function(){var a=new O,b;b=M(this,UC,1);0<b.length&&W(a,1,b,VC);return P(a)};it("hcbu",ZC);var $C=["ResolveMeetingSpace","CreateMeetingSpace"],cD=function(a,b,c,d,e){d=void 0===d?new CA:d;a=Uc(c,"/"+a+"/${path}");b&&(a=Rc(a,"key",b));this.j=a;this.f=aD(this,c,b);this.m=bD(this,this.f);this.b=d;this.g=e||null;this.h=null};cD.prototype.a=function(a,b,c,d,e,f,g,m){b=new WC(b,dD(this,void 0===m?!1:m));f&&(b.f=f);k(g)&&(b.b=g);return XC(b,c,d,e,a).then(function(a){var b=a.Qb,c={body:b&&b.ka&&b.ka()||b,headers:a.xb(),status:a.a,statusText:""+a.a};return{be:b,headers:a.xb(),tk:a.a,Gh:df(c)}})};
var dD=function(a,b){return(void 0===b?0:b)?a.f:a.m},eD=function(a,b,c){Mx(a.j.replace("${path}",b),df(c),"application/json")},aD=function(a,b,c){var d=new sC;d.setApiKey(c);d.g=b;d.b=2;d.f=2E4;d.h.push(hC);d.h.push(iC);zC(d,{onRequest:function(b,c,d){if(c=d.b["x-goog-meeting-token"]||null)if(b=a.b,c){c=c.split(";");var e=Number(c[0]);if(!isNaN(e)){var f=new vw;K(f,2,e);K(f,1,c[1]);DA(b,f)}}if(d=d.b["x-goog-meeting-debugid"]||null)a.h=d}});wC(d,{a:function(b){!b.a["x-goog-meeting-debugid"]&&a.g&&
Vt(b,"X-Goog-Meeting-Debugid",a.g)}});RC(d);return d},bD=function(a,b){b=new sC(b);wC(b,{a:function(b){null!=(b.a["x-goog-meeting-token"]||null)||Kb($C,b.b)||Vt(b,"X-Goog-Meeting-Token",EA(a.b))}});return b};cD.prototype.a=function(a,b,c,d,e,f,g,m){b=new WC(b,dD(this,void 0===m?!1:m));f&&(b.f=f);k(g)&&(b.b=g);return XC(b,c,d,e,a).then(function(a){var b=a.Qb,c={body:b&&b.ka&&b.ka()||b,headers:a.xb(),status:a.a,statusText:""+a.a};return{be:b,headers:a.xb(),tk:a.a,Gh:df(c)}})};var fD=function(){B.call(this);this.l=If("realtime.pushnotifications.Dispatcher")};r(fD,B);
var gD=[{Wa:BC.prototype.Wg,eventType:"r"},{Wa:BC.prototype.Yg,eventType:"t"},{Wa:BC.prototype.Ug,eventType:"o"},{Wa:BC.prototype.Tg,eventType:"p"},{Wa:BC.prototype.Xg,eventType:"s"},{Wa:BC.prototype.Og,eventType:"k"},{Wa:BC.prototype.Sg,eventType:"l"},{Wa:BC.prototype.Pg,eventType:"m"},{Wa:BC.prototype.ah,eventType:"z"},{Wa:BC.prototype.Qg,eventType:"n"},{Wa:BC.prototype.Zg,eventType:"u"}],hD=[{Wa:TB.prototype.h,eventType:"v"},{Wa:TB.prototype.g,eventType:"w"},{Wa:TB.prototype.j,eventType:"x"},{Wa:TB.prototype.v,
eventType:"y"}];fD.prototype.a=function(a){var b=L(a,BC,2),c,d;if(null!=b)for(a=0;a<gD.length;a++){if(d=gD[a].Wa.call(b),null!=d)if("u"==gD[a].eventType)for(var e=d,f=hD,g=0;g<gD.length;g++){if(d=f[g].Wa.call(e),null!=d){c=f[g].eventType;break}}else{c=gD[a].eventType;break}}else b=L(a,Ly,3),null!=b&&(d=L(b,Ov,1),null!=d&&(c="q"));null!=d?(F(this.l,"Received notification of type "+c+"."),this.dispatchEvent(new iD(c,d))):E(this.l,"A batch notification is empty.")};
var iD=function(a,b){A.call(this,a);this.notification=b};r(iD,A);var kD=function(a,b){DB.call(this,b);a instanceof KB?(b=a,a=new BA(a.a,a.g,a.j,a.f,a.m)):a instanceof BA?b=new KB(a.a,a.g,a.j,a.f,a.m,new CA):a=b=a;this.h=b;this.o=a;this.j=new jD;this.v=new fD;null==I(this,1)&&K(this,1,32);a=I(this,2)||"rmjs";K(this,2,a);a=I(this,3)||"Unknown";K(this,3,a);GB(this,I(this,4)||"0.0");null==I(this,5)&&K(this,5,0);this.g(I(this,6)||I(this,2)+ob().toUpperCase());a=I(this,7)||I(this,6)+"@fake.com";K(this,7,a);null==Vs(this,9)&&K(this,9,.01);a=I(this,10)||null;K(this,10,
a);a=I(this,11)||"https://clients2.google.com/cr/report";K(this,11,a);a=I(this,12)||null;K(this,12,a);a=L(this,vx,13)||new vx;N(this,13,a);null==I(this,8)&&K(this,8,!1);null==I(this,16)&&K(this,16,!1);a=I(this,14)||[];K(this,14,a||[]);a=L(this,Nz,17)||new Nz;N(this,17,a);a=I(this,18)||null;K(this,18,a)};r(kD,DB);var lD=new Nq("CgjDUd");kD.prototype.register=function(a){a.b(lD,this);return this};kD.prototype.g=function(a,b){b=b?ob().toUpperCase():"";kD.S.g.call(this,a+b)};
var mD=function(a){var b=new pv,c=I(a,1);K(b,1,c);var c=new lv,d=I(a,6);K(c,1,d);d=new ry;N(d,1,b);N(d,2,c);d.Wc("en");a=Rz(I(a,5));N(d,7,a);return d},jD=function(){};jD.prototype.a=pa;var nD=function(){Mr(this)};qa(nD);var oD=function(a,b,c,d,e){return a.ma.j(b,c,d,e)},pD=function(){};r(pD,qr);rr(pD,nD);pD.prototype.b=xr();pD.prototype.j=xr();pD.prototype.h=xr();pD.prototype.f=xr();var qD=function(a,b,c,d,e,f){var g=nD.U();e=new e(oD(g,a,b,void 0,!0));f=new Yp(g.ma.h(a,b),f);return new qB(0,g.ma.b(a,b),c,d,e,f,g.ma.f(a,b))};var sD=function(a,b,c,d){return oD(nD.U(),a,b,void 0,!0).m.then(function(a){return rD(a,c,d)})},rD=function(a,b,c){b=tD(b);return uD(a,b,c).then(function(a){return a.be})},uD=function(a,b,c){var d={};c&&(d["X-Goog-Meeting-Botguardid"]=c);return a.a(d,"google.rtc.meetings.v1.MeetingSpaceService","ResolveMeetingSpace",b,ix)},tD=function(a){var b=new sx;K(b,1,a);return b};var xD=function(a,b,c,d){if(!vD){Hf();var e=Gf;e.b=Cf;var f=wD;e.a||(e.a=[]);e.a.push(f);vD=!0}this.f=a;this.h=b;this.j=d;this.a=new bu(this.g.bind(this),c,2E4);this.b=new Map;rj(this)},wD=function(a){Jc({G:a.f,level:Mc(a.b.value),time:a.g,message:a.getMessage(),Ib:a.a})};xD.prototype.Rc=function(){return this.a.Rc()};xD.prototype.ic=function(a){return this.a.ic(a)};
xD.prototype.g=function(){var a=this;x(this.l,"Fetching hangouts");return Ok([Ls(this.h),Hs(this.f)]).then(function(b){var c=Array.from(a.b.values());b.forEach(function(b){b.ec?c=c.concat(b.value):a.l.error("Error discovering Hangouts",b.reason)});var d=c.reduce(function(a,b){var c=a[b.getId()];c?c.merge(b):c=b;a[c.getId()]=c;return a},{});return Object.keys(d).map(function(a){a=d[a];$h("MediaRouter.Cloud.Hangout.Sink.Discovered");return new qt(a)})})};
var zD=function(a,b){return Promise.resolve(rD(a.j,b.input).then(function(b){return yD(a,J(b,2,""))},function(){return b.input.match(/^#/)?Promise.reject("Failed to resolve meeting alias."):yD(a,b.input,b.domain)}))},yD=function(a,b,c){c=c||void 0;var d=!c;b=new zq(d,d?b:b+"@"+c,c,b,void 0,void 0);a.b.set(b.getId(),b);b=new qt(b);a.a.a.set(b.wa.id,b);return b.wa};xD.prototype.fa=function(){return"HangoutSinkDiscoveryService"};
xD.prototype.qa=function(){for(var a={},b=ja(this.b.entries()),c=b.next();!c.done;c=b.next()){var d=ja(c.value),c=d.next().value,d=d.next().value;a[c]=d}return[{cache:gu(this.a),manualHangouts:a}]};xD.prototype.va=function(){var a=oj(this);if(a){hu(this.a,a.cache);for(var b in a.manualHangouts){var c=a.manualHangouts[b];this.b.set(b,new zq(c.hh,c.ya,c.mb,c.Mc,c.wb,c.rc))}}};xD.prototype.l=v("mr.cloud.discovery.HangoutSinkDiscoveryService");var vD=!1;var AD=function(){this.v=this.a=this.F=this.J=this.B=this.A=this.w=this.u=this.j=this.f=this.m=this.g=this.h=this.o=this.b=null},DD=function(a){null==a.a&&(a.a=new cD("v1","","https://meetings.clients6.google.com",BD(a)),wC(dD(a.a,!0),Nx(function(){return Nd(CD(a).getAuthToken())})));return a.a},BD=function(a){null==a.v&&(a.v=new CA);return a.v},CD=function(a){null==a.b&&(a.b=new Zq);return a.b},ED=function(a){null==a.o&&(a.o=new iu(CD(a)));return a.o},FD=function(a){null==a.u&&(a.u=new Bq(ED(a)));
return a.u};qa(AD);
